!function(e){var t={};function i(e){return t[e]||n(e),t[e].exports}function n(n){var s={exports:{}};t[n]=s,e[n](i,s)}n(0)}({0:function(e,t){const{getShowFns:i}=e(1);e(2);var{waitdotheme:n}=e(61),{cateWidthShiPei:s}=e(26);localStorage.__quik_egg__?(delete localStorage.__quik_egg__,window.eggnow__=!0,clearTimeout(loadingtimeout),document.querySelector(".loading-f").style.display="block"):(n((()=>{a()})),setTimeout((()=>{a()}),500));var o=!1;function a(){o||(clearTimeout(loadingtimeout),document.querySelector(".loading-f").classList.add("h"),document.querySelector(".loading-f").style.display="none",document.querySelector("main").style.display="block",document.querySelector("main").style.opacity="1",i().forEach((e=>e())),s(),o=!0,setTimeout((()=>{document.querySelector("main").classList.add("sicon")}),360))}var r="@font-face {\n    font-family: 'Material Symbols Outlined';\n    font-style: normal;\n    font-weight: 100 700;\n    src: url($0) format('woff2');\n  }";window.isExt?util.addStyle(r.replace("$0","chrome-extension://"+window.extid+"/assets/google-icon.woff2")):util.addStyle(r.replace("$0","https://fonts.gstatic.com/s/materialsymbolsoutlined/v213/kJEhBvYX7BgnkSrUwT8OhrdQw4oELdPIeeII9v6oFsI.woff2"))},1:function(e,t){var i=[];t.exports={showOpenFilePicker:function(){return new Promise(((e,t)=>{var i=document.createElement("input");i.type="file",document.body.append(i),i.style.display="none",i.click(),i.onchange=()=>{e(i.files),i.remove()}}))},Onshow:function(e){i.push(e)},getShowFns:function(){return i}}},2:function(e,t){var i=e(3),n=e(4),s=e(5),o=e(6),{storage:a}=e(7),r=e(9);let{alert:l,confirm:c,prompt:d}=e(8);var u=e(10),g=e(11),h=e(12),p=h.Setting,y=h.SettingGroup,v=h.SettingItem,m=h.mainSetting,f=h.tyGroup,b=e(19),w=e(26),k=e(41),q=e(58),x=e(59),L=e(60),T=e(61),S=e(68),_=e(83),I=e(85);e(87),e(88);var E=e(43),M=e(89);e(92),e(93),e(97),e(98),e(102),e(103);var D={},C=["runAddon","enable","disable","upupdate","upinstallByUrl","upinstallByOfficialMarket","upuninstall","installByLocal"];for(var O in E)-1==C.indexOf(O)&&(D[O]=E[O]);D.update=E.upupdate,D.installByUrl=E.upinstallByUrl,D.installByOfficialMarket=E.upinstallByOfficialMarket,D.uninstall=E.upuninstall,window.quik={searchEditor:_,guidecreator:x,fcard:L,custom:T,sync:M,addon:D,storage:a,omnibox:b,util:n,link:w,dialog:r,toast:s,says:k,menu:u,iconc:o,background:S,mainmenu:g,Setting:p,SettingGroup:y,SettingItem:v,mainSetting:m,notice:I,tyGroup:f,alert:l,confirm:c,prompt:d,card:q,getEventHandle:i},window.util=n},3:function(e,t){var i=[];t.exports=function(){var e=i.length;return i.push({}),{on:(t,n)=>(i[e][t]||(i[e][t]=[]),i[e][t].push(n),!0),off(t,n){if(!i[e][t])return!1;for(var s=0;s<i[e][t].length;s++)if(i[e][t][s]===n)return i[e][t].splice(s,1),!0;return!1},doevent(t,n){if(!i[e][t])return!1;Array.isArray(n)||(n=[n]);for(var s=0;s<i[e][t].length;s++)i[e][t][s].apply(null,n);return!0}}}},4:function(e,t){let i;setTimeout((function(){i=e(5)})),-1!=location.hash.indexOf("extdheodqp2eidhjwe")?(window.isExt=!0,-1!=location.hash.indexOf(";")?window.extid=location.hash.substring(location.hash.indexOf(":")+1,location.hash.indexOf(";")):window.extid=location.hash.substring(location.hash.indexOf(":")+1,location.hash.length)):window.isExt=!1,window.parent!=window&&(window.isInframe=!0);var n=[],s=0;window.addEventListener("message",(function(e){if("xhr_cb"==e.data.type)for(var t=e.data.id,i=0;i<n.length;i++)if(n[i].id==t){"function"==typeof n[i][e.data.fn]&&n[i][e.data.fn](e.data.data),1==e.data.finish&&n.slice(i,1);break}})),t.exports={deepClone(e){const t=new WeakMap;function i(e){return"object"==typeof e&&e}return function e(n){if(!i(n))return n;if([Date,RegExp].includes(n.constructor))return new n.constructor(n);const s=t.get(n);if(s)return s;if(n instanceof Map){const s=new Map;return t.set(n,s),n.forEach(((t,n)=>{i(t)?s.set(n,e(t)):s.set(n,t)})),s}if(n instanceof Set){const s=new Set;return t.set(n,s),n.forEach((t=>{i(t)?s.add(e(t)):s.add(t)})),s}const o=Reflect.ownKeys(n),a=Object.getOwnPropertyDescriptors(n),r=Object.create(Object.getPrototypeOf(n),a);return t.set(n,r),o.forEach((t=>{const s=n[t];i(s)?r[t]=e(s):r[t]=s})),r}(e)},requestByExt(e){s++,e.id=s,n.push(e);var t=this.deepClone(e);for(var i in t)"function"==typeof t[i]&&(t[i]={_t:"fn",_n:i});parent.postMessage({type:"xhr",data:t,id:s},"*")},addStyle(e){var t=util.element("style");t.innerHTML=e,document.head.appendChild(t)},initSet(e,t,i){var n=e.get(t);if("object"==typeof i&&i)if("object"==typeof n&&n){var s=!1;for(var o in i)void 0===n[o]&&(s=!0,n[o]=i[o]);s&&e.set(t,n)}else void 0===n&&e.set(t,i);else void 0===n&&e.set(t,i)},joinObj(){var e=arguments,t=e[0];function i(e,t){for(var i in t)e[i]=t[i];return e}for(var n=1;n<e.length;n++)t=i(t,e[n]);return t},loadimg(e,t){var i=new Image;i.src=e,i.onload=function(){t(!0)},i.onerror=function(){t(!1)}},element(e,t={}){var i=document.createElement(e);for(var n in t)i.setAttribute(n,t[n]);return i},query:(e,t,i)=>e["querySelector"+(i?"All":"")](t),getFavicon(e,t){try{var i=new URL(e)}catch(e){return void t(!1)}var n="https://api.xinac.net/icon/?url="+i.origin;-1!=i.hostname.indexOf("bing.com")?n="https://bing.com/favicon.ico":-1!=i.hostname.indexOf("www.google.com")||0==i.hostname.indexOf("google.com")?n="https://s2.loli.net/2024/08/10/dVNZ4SzFxTMpj1a.png":-1!=i.hostname.indexOf("tfseek.top")&&(n="https://tfseek.top/assets/img/216.png"),this.loadimg(n,(function(e){e?t(n):util.loadimg(i.protocol+"//"+i.host+"/favicon.ico",(function(e){t(!!e&&i.protocol+"//"+i.host+"/favicon.ico")}))}))},createIcon(e){var t=document.createElement("canvas");t.width=64,t.height=64;var i=t.getContext("2d");return i.fillStyle=this.getRandomColor(),i.font="bold 32px Arial",i.fillText(e,20,40),t.toDataURL()},getRandomColor:()=>"#"+Math.random().toString(16).substring(2,8).toUpperCase(),fangdou(e,t){var i=null;return function(){i&&clearTimeout(i);var n=this;i=setTimeout((()=>{e.apply(n,arguments)}),t)}},jsonp(e,t,i){var n="a"+Math.random().toString(36).slice(2),s=this.element("script",{src:function(e,t,i){var n=new URL(e);return n.searchParams.set(t,i),n.href}(e,i||"callback",n)});return document.body.appendChild(s),s.onerror=function(){t(!1),document.body.removeChild(s)},window[n]=function(e){t(e);try{document.body.removeChild(s)}catch(e){}delete window[n]},{abort(){try{s.remove()}catch(e){}}}},xhr(e,t,i){var n=new XMLHttpRequest;return n.onreadystatechange=function(){4==n.readyState&&(200==n.status?t(n.responseText):n.status>=400&&i&&i({status:n.status,statusText:n.statusText,readyState:n.readyState,responseText:n.responseText}))},n.onerror=function(){i&&i({status:n.status,statusText:n.statusText,readyState:n.readyState,responseText:n.responseText})},n.open("GET",e,!0),n.send(),{abort(){n.abort()}}},checkSession:e=>e.isSession&&"Hvm_session_token_eoi1j2j"===e.session_token,getRandomHashCache:()=>Math.random().toString(36).slice(2)+Date.now().toString(36),copyText(e){if(window.isExt)parent.postMessage({type:"copy",text:e},"*");else if(navigator.clipboard)navigator.clipboard.writeText(e);else{const t=document.createElement("input");t.value=e,t.style.display="none",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}i.show("复制成功")},getGoogleIcon:(e,t)=>'<span class="material-symbols-outlined'+(t&&t.type?" "+t.type:"")+'">&#x'+e+";</span>",getGoogleIconByString:(e,t)=>'<span class="material-symbols-outlined'+(t&&t.type?" "+t.type:"")+'">'+e+"</span>",checkDetailsCorrect(e,t){for(var i=0;i<t.length;i++)if(0==e.hasOwnProperty(t[i]))return!1;return!0},checkUrl:e=>/^(https?:\/\/)?([a-zA-Z0-9\.\-]+(\:[a-zA-Z0-9\.&%\$\-]+)*@)?((25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9])\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[0-9])|([a-zA-Z0-9\-]+\.)*[a-zA-Z0-9\-]+\.[a-zA-Z]{2,4})(\:[0-9]+)?(\/[^\/][a-zA-Z0-9\.\,\?\'\\\/\+&%\$#\=~_\-@]*)*(\/)?$/.test(e),b0:e=>e<10?"0"+e:e}},5:function(e,t){const i=e(4);var n=i.element("div",{class:"toast"}),s=null,o=null;i.query(document,"body").append(n),t.exports={show(e,t){n.innerHTML=e,n.classList.add("show"),n.style.animation="toastin .3s",clearTimeout(s),clearTimeout(o),s=setTimeout((()=>{n.style.animation="toastout .3s",o=setTimeout((()=>{n.classList.remove("show")}),298)}),t||2e3)}}},6:function(e,t){const i=e(4);var n={tl:i.query(document,".topper .left"),tr:i.query(document,".topper .right"),bl:i.query(document,".bottomer .left"),br:i.query(document,".bottomer .right")},s=function(e){this.content=e.content,this.width=e.width;var t=i.element("div",{class:"item"+(e.class?" "+e.class:"")+(e.important?" important":"")});n[e.offset].append(t),t.innerHTML=this.content,this.element=t,this.width&&(t.style.width=this.width+"px")};s.prototype={getIcon(){return this.element},setIcon(e){this.content=e,this.element.innerHTML=this.content},setWidth(e){this.width=e,this.width&&(ic.style.width=this.width+"px")},getWidth(){return this.width},show(){this.element.classList.remove("hide"),this.element.classList.add("show")},hide(){this.element.classList.add("hide"),this.element.classList.remove("show")}},t.exports.icon=s},7:function(e,t){const{alert:i}=e(8),n=e(3),s=e(4);function o(){this.items={},this.count=0,this.head=0,this.tail=0}localStorage.quik2||(localStorage.quik2="{}"),o.prototype.enqueue=function(e){this.items[this.tail]=e,this.tail=this.tail+1,this.count=this.tail-this.head},o.prototype.dequeue=function(){if(0==this.count)return null;var e=this.items[this.head];return delete this.items[this.head],this.head=this.head+1,this.count--,e},o.prototype.isEmpty=function(){return 0==this.count},o.prototype.size=function(){return this.count};var a=n(),r=localforage._getSupportedDrivers([localforage.INDEXEDDB])[0]==localforage.INDEXEDDB;r||localStorage.notdb||(localStorage.notdb="1",setTimeout((()=>{i("浏览器版本过低，不支持indexedDB，一些功能的使用将受限！")})));var l=new o,c={get(e,t){localforage.getItem(e).then(t)},set(e,t,i){t=t||"^"+s.getRandomHashCache(),localforage.setItem(t,e).then((()=>{i(t)}))},delete(e,t){localforage.removeItem(e).then(t)}},d={get(e,t){l.enqueue(["get",[e],t]),u()},set(e,t,i){l.enqueue(["set",[e,t],i]),u()},delete(e,t){l.enqueue(["delete",[e],t]),u()}};function u(){if(!l.isEmpty()){var e=l.dequeue(),t=e[1];t.push((function(){u(),e[2].apply(null,arguments)})),c[e[0]].apply(null,t)}}var g={},h=function(e,t){if("string"==typeof e){function i(t,i,s){if(!i)return n()[e][t];if(!r)throw new Error("indexedDB is not support in this browser");d.get(n()[e][t],(e=>{s(e)}))}function n(){return JSON.parse(localStorage.getItem("quik2"))}function s(i){var s=n();s[e]=i,localStorage.setItem("quik2",JSON.stringify(s)),a.doevent("storage",[{key:e,value:i}]),t&&!t.websync&&t.sync&&a.doevent("websync",[{key:e,value:i}])}return JSON.parse(localStorage.getItem("quik2"))[e]||s({}),g[e]=t,{get:i,websync:function(t){a.doevent("websync",[{key:e,value:t,sp:!0}])},set:function(t,o,a,l){if(a){if(!r)throw new Error("indexedDB is not support in this browser");d.set(o,i(t),(i=>{var o=n();o[e][t]=i,s(o[e]),l(i)}))}else{var c=n();c[e][t]=o,s(c[e])}},remove:function(t,i,o){var a=n();if(i){if(!r)throw new Error("indexedDB is not support in this browser");d.delete(a[e][t],(()=>{var i=n();delete i[e][t],s(i[e]),o()}))}else delete a[e][t],s(a[e])},list:function(){return Object.keys(n()[e])},getAll:()=>n()[e],clear(){var t=n()[e];for(var i in t){var o=i[t];"string"==typeof o&&o.startsWith("^")&&d.delete(o)}s({})}}}throw new Error("ck is not a string")};h.checkIDB=()=>r,h.on=a.on,h.off=a.off,t.exports={storage:h,getStorageList:()=>g,getAllStorage:()=>JSON.parse(localStorage.getItem("quik2")),dbTool:d}},8:function(e,t){const i=e(9),n=e(4);var s='<div class="def_dialog"><h1>提示</h1><div class="content">$0</div><div class="footer">$1<button class="ok btn">确定</button></div></div>',o=()=>{};t.exports={alert:function(e,t){t||(t=o);var a=new i({content:s.replace("$0","").replace("$1",""),clickOtherToClose:!1});setTimeout((()=>{a.open()}),10);var r=a.getDialogDom();n.query(r,".content").innerText=e,n.query(r,".ok").onclick=()=>{t(),a.close(),setTimeout((()=>{a.destroy()}),299)}},confirm:function(e,t){t||(t=o);var a=new i({content:s.replace("$0","").replace("$1",'<button class="cancel btn">取消</button>'),clickOtherToClose:!1});setTimeout((()=>{a.open()}),10);var r=a.getDialogDom();n.query(r,".content").innerText=e,n.query(r,".ok").onclick=()=>{t(!0),a.close(),setTimeout((()=>{a.destroy()}),299)},n.query(r,".cancel").onclick=()=>{t(!1),a.close(),setTimeout((()=>{a.destroy()}),299)}},prompt:function(e,t){t||(t=o);var a=new i({content:s.replace("$0",'<p class="c"></p><p><input type="text"/></p>').replace("$1",'<button class="cancel btn">取消</button>'),clickOtherToClose:!1});setTimeout((()=>{a.open()}),10);var r=a.getDialogDom();n.query(r,".content .c").innerText=e,n.query(r,".ok").onclick=()=>{t(n.query(r,".content input").value),a.close(),setTimeout((()=>{a.destroy()}),299)},n.query(r,".cancel").onclick=()=>{t(""),a.close(),setTimeout((()=>{a.destroy()}),299)},n.query(r,".content input").focus(),n.query(r,".content input").addEventListener("keydown",(function(e){"Enter"==e.key&&(t(this.value),a.close(),setTimeout((()=>{a.destroy()}),299))}))}}},9:function(e,t){const i=e(4);var n=[],s=1,o=0,a=function(e){this.options=e;var t=i.element("div",{class:"dialog"});t.innerHTML=`<div class="d-b"></div><div class="d-c">${e.content}</div>`,i.query(document,".dialogs").append(t);var s=i.query(t,".d-c");e.class&&(s.className+=" "+e.class),1==e.mobileShowtype&&t.classList.add("mobile-show-full"),this.element=t,this.id=o,o++,t.setAttribute("data-id",this.id),void 0===e.clickOtherToClose?this.clickOtherToClose=!0:this.clickOtherToClose=e.clickOtherToClose,this.clickOtherToClose&&t.querySelector(".d-b").addEventListener("click",(function(){r(this.parentElement.getAttribute("data-id")).close()})),n.push(this)};function r(e){var t=null;return n.forEach((i=>{i.id==e&&(t=i)})),t}a.SHOW_TYPE_FULLSCREEN=1,a.SHOW_TYPE_DIALOG=2,a.iframeDialogBuilder=function(e,t=1){var n=new a({content:`<div class="material-symbols-outlined closebtn">&#xE5CD;</div><iframe src="${e}" class="dialog-iframe"></iframe>`,class:"iframe-dialog",mobileShowtype:t}),s=n.getDialogDom();return i.query(s,".closebtn").onclick=()=>{n.close()},this.closed=!0,n},a.getDialogById=r,a.prototype={open(){this.element.classList.add("show"),this.element.style.zIndex=s,s++,this.closed=!1,this.onopen&&this.onopen(),i.query(this.element,"img[data-src]",!0).forEach((function(e){e.src=e.getAttribute("data-src"),e.removeAttribute("data-src")}))},close(){this.element.classList.remove("show"),this.closed=!0,this.onclose&&this.onopen()},destroy(){this.element.remove(),n.splice(n.indexOf(this),1)},getDialogDom(){return i.query(this.element,".d-c")}},t.exports=a},10:function(e,t){const i=e(4);var n=function(e){this.options=e;var t=i.element("div",{class:"contextMenu"});e.offset&&(t.style.top=e.offset.top+"px",t.style.left=e.offset.left+"px",t.style.bottom=e.offset.bottom+"px",t.style.right=e.offset.right+"px"),s(e.list,t),document.body.appendChild(t),this.element=t};function s(e,t){e.forEach((function(e){if("hr"==e.type){var n=i.element("div",{class:"hr"});t.appendChild(n)}else{(n=i.element("div",{class:"item"})).innerHTML=`<div class="icon">${e.icon}</div><div class="title">${e.title}</div>`,n.onclick=function(){e.click()},t.appendChild(n)}}))}function o(e){document.querySelectorAll(".contextMenu").forEach((t=>{e&&t.isSameNode(e)||(t.style.height="0px",setTimeout((()=>{t.style.transition="none",t.classList.remove("show")}),200))}))}n.prototype={show(){o(this.element),this.element.classList.add("show"),this.element.style.height="auto";var e=this.element.getBoundingClientRect().height;this.element.style.height="0px",this.element.style.transition="height .2s";var t=this;setTimeout((()=>{t.element.style.height=e+"px"}))},hide(){this.element.style.height="0px";var e=this;setTimeout((()=>{e.element.style.transition="none",e.element.classList.remove("show")}),200)},isShow(){return this.element.classList.contains("show")},destroy(){this.element.remove()},setOffset(e){this.options.offset=e;var t=this.options,i=this.element;i.style.top="",i.style.left="",i.style.bottom="",i.style.right="",t.offset&&("number"==typeof t.offset.top?i.style.top=t.offset.top+"px":i.style.bottom=t.offset.bottom+"px","number"==typeof t.offset.left?i.style.left=t.offset.left+"px":i.style.right=t.offset.right+"px")},setList(e){this.options.list=e;var t=this.element;t.innerHTML="",s(e,t)}},document.addEventListener("click",(()=>{o()})),document.addEventListener("contextmenu",(()=>{o()})),t.exports=n},11:function(e,t){const i=e(10),{icon:n}=e(6);var s=new n({class:"main_menu",content:e(4).getGoogleIcon("e5d2"),offset:"tr"}),o=[],a=[],r=new i({list:[],offset:{top:40,right:15}});s.getIcon().onclick=e=>{e.stopPropagation(),r.show()};t.exports={pushMenu:function(e,t){1==t?a.push(e):o.push(e),r.setList(o.concat([{type:"hr"}],a))},MAIN_MENU_BOTTOM:1,MAIN_MENU_TOP:0}},12:function(e,t){const i=e(13);var n=e(14),s=e(15),o=e(16),a=e(17);e(18);var r=new s({title:"通用",index:0});a.addNewGroup(r),t.exports={Setting:n,SettingGroup:s,SettingItem:o,mainSetting:a,tyGroup:r,settingSto:i}},13:function(e,t){const{storage:i}=e(7);var n=i("setting",{title:"设置",desc:"QUIK起始页的各项设置",sync:!0});t.exports=n},14:function(e,t){const i=e(9);function n(e){this.title=e.title,this.ifo=!1,this.groups=[],this._events={change:[]}}function s(e,t,i){util.query(e,".qui-options").innerHTML=(()=>{var e="";for(var i in t)e+=`<div class="qui-option" data-value="${i}">${t[i]}</div>`;return e})(),util.query(e,".qui-options .qui-option",!0).forEach((n=>{n.onclick=()=>{var s=n.getAttribute("data-value");util.query(e,".setting-item-input").value=s,util.query(e,".qui-select").innerText=t[s];var a=util.query(e,".qui-options .qui-option.selected");a&&a.classList.remove("selected"),n.classList.add("selected"),o.call(util.query(e,".setting-item-input"),i)}}))}function o(e){var t;this.classList.contains("null-click")||(t="checkbox"==this.type?this.checked:this.value,"function"==typeof e.check?e.check(t)?e.callback(t):e.getacb():e.callback(t))}n.prototype={drawAll(){if(!this.ifo){this.ifo=!0,this.dialog=new i({content:`<div class="actionbar"><h1>设置</h1><div class="closeBtn">${util.getGoogleIcon("e5cd")}</div></div><ul class="setting-root"></ul>`,class:"setting_dia auto-size",mobileShowtype:i.SHOW_TYPE_FULLSCREEN}),this.dialogDom=this.dialog.getDialogDom(),util.query(this.dialogDom,".closeBtn").addEventListener("click",(()=>{this.dialog.close()})),util.query(this.dialogDom,".actionbar h1").innerText=this.title;var e=this;this.groups.forEach((t=>{e._drawGroup(t)}))}},addNewGroup(e){this.groups.push(e);var t=this;e.on("change",((e,i)=>{t._dochange({type:e.type,details:e.details,id:e.id}),"it"==e.type?t._dochangeGroup(i,e.details):"add"==e.type?t._drawItem(i,i.items[i.items.length-1]):"change"==e.type&&("reinit"==e.details.attr?t._reinitItem(i,i.items.find((t=>t.id==e.id)),e.details):"reget"==e.details.attr?t._regetItem(i.items.find((t=>t.id==e.id)),e.details):t._dochangeItem(i,i.items.find((t=>t.id==e.id)),e.details))})),t._dochange({type:"addgroup"}),t._drawGroup(e)},setTitle(e){this.title=e,this.ifo&&(util.query(this.dialogDom,".actionbar h1").innerText=e),_._dochange({type:"changetitle",title:e})},open(){var e=this;e.ifo?e.dialog.open():(e.drawAll(),setTimeout((()=>{e.dialog.open()}),10))},close(){this.dialog.close()},on(e,t){this._events[e]&&this._events[e].push(t)},_dochange(e){var t=this;this._events.change.forEach((i=>{i(e,t)}))},_drawGroup(e){if(this.ifo){var t=this,i=util.element("li",{class:"setting-group","data-index":e.index,"data-id":e.id});i.innerHTML='<div class="setting-group-title"></div><ul class="setting-tree"></ul>';for(var n=util.query(this.dialogDom,".setting-root"),s=n.children,o=!0,a=0;a<s.length;a++)if(parseInt(s[a].getAttribute("data-index"))>e.index){n.insertBefore(i,s[a]),o=!1;break}o&&n.appendChild(i),util.query(i,".setting-group-title").innerText=e.title,e.items.forEach((i=>{t._drawItem(e,i)}))}},_drawItem(e,t){if(this.ifo){var i=util.element("li",{class:"setting-item","data-index":t.index,"data-id":t.id});t._show||(i.style.display="none"),i.innerHTML='<div class="setting-item-left"><div class="setting-item-title"></div><div class="setting-item-message"></div></div><div class="setting-item-right"></div>';for(var n=util.query(this.dialogDom,".setting-group[data-id="+e.id+"] .setting-tree"),a=n.children,r=!0,l=0;l<a.length;l++)if(parseInt(a[l].getAttribute("data-index"))>t.index){n.insertBefore(i,a[l]),r=!1;break}r&&n.appendChild(i),util.query(i,".setting-item-title").innerText=t.title,t.message?util.query(i,".setting-item-message").innerText=t.message:i.classList.add("no-message");var c=util.query(i,".setting-item-right"),d=()=>{};({string(){c.innerHTML='<input type="text" class="setting-item-input">',d=e=>{util.query(c,".setting-item-input").value=e}},number(){c.innerHTML='<input type="number" class="setting-item-input">',d=e=>{util.query(c,".setting-item-input").value=e}},boolean(){c.innerHTML='<div class="check-box"><div class="check-box-inner"></div></div><input type="checkbox" class="setting-item-input">',d=e=>{util.query(c,".setting-item-input").checked=e,e?util.query(c,".check-box").classList.add("checked"):util.query(c,".check-box").classList.remove("checked")},util.query(c,".check-box").addEventListener("click",(function(){util.query(c,".setting-item-input").click(),util.query(c,".setting-item-input").checked?this.classList.add("checked"):this.classList.remove("checked")}))},range(){c.innerHTML='<input type="range" class="setting-item-input">',d=e=>{util.query(c,".setting-item-input").value=e};var e=t.init();function i(e){util.query(c,".setting-item-input").max=e[1],util.query(c,".setting-item-input").min=e[0]}e instanceof Promise?e.then(i):i(e)},select(){var e;c.innerHTML='<input class="setting-item-input" type="text" style="display:none"></input><div class="qui-select"></div><div class="qui-options"></div>',util.query(c,".qui-select").onclick=function(e){e.stopPropagation();var t=util.query(document,".qui-options.active");t&&t.classList.remove("active"),util.query(c,".qui-options").classList.add("active")},d=t=>{e=t};var i=t.init();function n(i){s(c,i,t),d=e=>{util.query(c,".setting-item-input").value=e,util.query(c,".qui-select").innerText=i[e];var t=util.query(c,".qui-options .qui-option.selected");t&&t.classList.remove("selected");try{util.query(c,'.qui-options .qui-option[data-value="'+e+'"]').classList.add("selected")}catch(e){util.query(c,".qui-select").innerText=""}},e&&d(e)}i instanceof Promise?i.then(n):n(i)},null(){c.innerHTML=`<div class="setting-item-input null-click">${util.getGoogleIcon("e5e1")}</div>`,i.classList.add("just-callback-item"),i.onclick=()=>{t.callback()}}})[t.type](),u(),t.getacb=u,util.query(c,".setting-item-input").addEventListener("range"==t.type?"input":"null"==t.type?"click":"change",(function(){o.call(this,t)}))}function u(){if("null"!=t.type){var e=t.get();e instanceof Promise?e.then(d):d(e)}}},_dochangeGroup(e,t){if(this.ifo){var i=util.query(this.dialogDom,".setting-group[data-id="+e.id+"]");if("title"==t.attr)util.query(i,".setting-group-title").innerText=t.content;else if("index"==t.attr){i.setAttribute("data-index",t.content);for(var n=util.query(this.dialogDom,".setting-root"),s=n.children,o=!0,a=0;a<s.length;a++)if(!s[a].isSameNode(i)&&parseInt(s[a].getAttribute("data-index"))>t.content){n.insertBefore(i,s[a]),o=!1;break}o&&n.appendChild(i)}else"show"==t.attr&&(i.style.display=t.content?"block":"none")}},_dochangeItem(e,t,i){if(this.ifo){var n=util.query(this.dialogDom,".setting-group[data-id="+e.id+"] .setting-item[data-id="+t.id+"]");if("title"==i.attr)util.query(n,".setting-group-title").innerText=i.content;else if("message"==i.attr)i.content?(util.query(n,".setting-item-message").innerText=i.content,n.classList.remove("no-message")):n.classList.add("no-message");else if("index"==i.attr){n.setAttribute("data-index",i.content);for(var s=util.query(this.dialogDom,".setting-group[data-id="+e.id+"] .setting-tree"),o=s.children,a=!0,r=0;r<o.length;r++)if(!o[r].isSameNode(n)&&parseInt(o[r].getAttribute("data-index"))>i.content){s.insertBefore(n,o[r]),a=!1;break}a&&s.appendChild(n)}else"show"==i.attr&&(n.style.display=i.content?"block":"none")}},_reinitItem(e,t){if(this.ifo){var i,n=util.query(this.dialogDom,".setting-group[data-id="+e.id+"] .setting-item[data-id="+t.id+"]"),o=util.query(n,".setting-item-right");if("range"==t.type)i=e=>{util.query(o,".setting-item-input").max=e[1],util.query(o,".setting-item-input").min=e[0]};else{if("select"!=t.type)return;i=e=>{s(o,e,t),cb=t=>{util.query(o,".setting-item-input").value=t,util.query(o,".qui-select").innerText=e[t];var i=util.query(o,".qui-options .qui-option.selected");i&&i.classList.remove("selected");try{util.query(o,'.qui-options .qui-option[data-value="'+t+'"]').classList.add("selected")}catch(e){}};var i=t.get();i instanceof Promise?i.then(cb):cb(i)}}var a=t.init();a instanceof Promise?a.then(i):i(a)}},_regetItem(e){this.ifo&&e.getacb()}},document.addEventListener("click",(()=>{var e=util.query(document,".qui-options.active");e&&e.classList.remove("active")})),t.exports=n},15:function(e,t){var i=0;function n(e){this.title=e.title,this.index=e.index,this.index<0&&(this.index=0),this.items=[],this.id="seg_"+i,i++,this._events={change:[]}}n.prototype={addNewItem(e){this.items.push(e);var t=this;e.on("change",((e,i)=>{t._dochange({type:"change",details:e,id:i.id})})),t._dochange({type:"add"})},setTitle(e){this.title=e,this._dochange({type:"it",details:{attr:"title",content:e}})},setIndex(e){this.index=e,this._dochange({type:"it",details:{attr:"index",content:e}})},on(e,t){this._events[e]&&this._events[e].push(t)},show(){this.show=!0,this._dochange({type:"it",details:{attr:"show",content:!0}})},hide(){this.show=!1,this._dochange({type:"it",details:{attr:"show",content:!1}})},_dochange(e){var t=this;this._events.change.forEach((i=>{i(e,t)}))}},t.exports=n},16:function(e,t){var i=0;function n(e){this.title=e.title,this.index=e.index,this.type=e.type,this.init=e.init,this.check=e.check,this.callback=e.callback,this.message=e.message,this.get=e.get,this._show=!0,this.id="sei_"+i,i++,this._events={change:[]}}n.prototype={reInit(){this._dochange({attr:"reinit"})},reGet(){this._dochange({attr:"reget"})},setTitle(e){this.title=e,this._dochange({attr:"title",content:e})},setIndex(e){this.index=e,this._dochange({attr:"index",content:e})},setMessage(e){this.message=e,this._dochange({attr:"message",content:e})},show(){this._show=!0,this._dochange({attr:"show",content:!0})},hide(){this._show=!1,this._dochange({attr:"show",content:!1})},on(e,t){this._events[e]&&this._events[e].push(t)},_dochange(e){var t=this;this._events.change.forEach((function(i){i(e,t)}))}},t.exports=n},17:function(e,t){const i=e(11),n=e(4);var s=new(e(14))({title:"设置"});i.pushMenu({icon:n.getGoogleIcon("e8b8",{type:"fill"}),title:"主设置",click(){s.open()}},i.MAIN_MENU_TOP),t.exports=s},18:function(e,t){const{icon:i}=e(6),n=e(4),s=e(17);var o=new i({content:n.getGoogleIcon("e8b8",{type:"fill"}),offset:"bl"});o.getIcon().title="(Alt+S) 打开设置",o.getIcon().onclick=()=>{s.open()}},19:function(e,t){var i=e(20),n=e(22),s=i.initsto.get("ob_enable");s&&!i.isInit()&&i.initNative(),i.initSett(s),n.uiEnable(s),t.exports={value:n.setValue,focus:n.focus,blur:n.blur,isblur:n.isblur,addNewSug:i.addNewSA,addNewType:i.addNewType,on:i.on,off:i.off,getSearchType:i.searchUtil.getSearchType,getSearchTypeList:i.searchUtil.getSearchTypeList,getSearchTypeIndex:i.searchUtil.getSearchTypeIndex,setSearchType:i.searchUtil.setSearchType,setSearchList:i.searchUtil.setSearchList,keywordText:i.searchUtil.keywordText,neizhi:i.searchUtil.neizhi,search:{on:i.searchUtil.on},sg:i.sg,setAutoFocus:n.setAutoFocus,setJustSearch:n.setJustSearch}},20:function(e,t){const{mainSetting:i,settingSto:n,SettingGroup:s,SettingItem:o}=e(12),a=e(3),r=e(4);var l=e(21);let c;setTimeout((function(){c=e(22)}));var d=n,{on:u,off:g,doevent:h}=a(),p=new s({title:"搜索框",index:1});i.addNewGroup(p);var y={SA:[],enter:[]};null==d.get("ob_justsearch")&&d.set("ob_justsearch",!1),null==d.get("ob_http")&&d.set("ob_http",!1),null==d.get("ob_enable")&&d.set("ob_enable",!0);var v=[],m=[],f=function(e){for(var t=0;t<y.enter.length;t++)if(y.enter[t].check(e))return y.enter[t]},b=function(e){y.enter.unshift(e)},w=function(e){y.SA.push(e)};function k(e){return!d.get("ob_justsearch")&&r.checkUrl(e)}function q(){b({check:()=>!0,enter(e){open(l.getSearchType().replace(l.keywordText,encodeURIComponent(e)))},icon:":searchtype",submit:r.getGoogleIcon("E8B6")}),b({check:k,enter(e){-1==e.indexOf("://")&&(e=(d.get("ob_http")?"https://":"http://")+e),open(e)},icon:r.getGoogleIcon("E80B"),submit:r.getGoogleIcon("E89E")}),w({check:e=>!!e,get(e,t){var i=t();return i.unshift({icon:r.getGoogleIcon("E8B6"),text:e,click(){open(l.getSearchType().replace(l.keywordText,encodeURIComponent(e)))}}),i}});var t=null;w({check:e=>!!e,get:(e,i)=>new Promise((function(n,s){t=r.jsonp("https://www.baidu.com/sugrec?pre=1&p=3&ie=utf-8&json=1&prod=pc&from=pc_web&wd="+encodeURIComponent(e),(function(e){var s=i();t=null,e.g?(e.g.forEach((function(e){s.push({icon:r.getGoogleIcon("E8B6"),text:e.q,click(){open(l.getSearchType().replace(l.keywordText,encodeURIComponent(e.q)))}})})),n(s)):n(s)}),"cb")})),interrupt(){t&&(t.abort(),t=null)}}),w({check:k,get:(e,t)=>new Promise((function(i,n){var s=t();s.unshift({icon:r.getGoogleIcon("E80B"),text:e,click(){-1==e.indexOf("://")&&(e=(d.get("ob_http")?"https://":"http://")+e),open(e)}}),i(s)}))});var i=e(24),n=e(25);m.push(i),m.push(n),x=!0}var x=!1;var L=new o({title:"启用搜索框",index:1,type:"boolean",message:"关闭将不显示搜索框",get:()=>!!d.get("ob_enable"),callback:e=>(d.set("ob_enable",e),e&&!x&&q(),_(e),c.uiEnable(e),!0)}),T=new o({title:"搜索框仅搜索",index:1,type:"boolean",message:"打开后，搜索框将失去打开链接的功能",get:()=>!!d.get("ob_justsearch"),callback:e=>(d.set("ob_justsearch",e),c.getInput().placeholder=e?"搜索":"搜索或输入网址",!0)}),S=new o({title:"默认HTTPS打开链接",index:1,type:"boolean",message:"打开后，搜索框打开链接在默认情况下使用HTTPS",get:()=>!!d.get("ob_http"),callback:e=>(d.set("ob_http",e),!0)});function _(e){e?m.forEach((e=>e.show())):m.forEach((e=>e.hide()))}p.addNewItem(L),p.addNewItem(T),p.addNewItem(S),m.push(T),m.push(S),t.exports={getSA:function(e,t){v.length>0&&v.forEach((function(e){y.SA[e].interrupt()}));for(var i=[],n=y.SA.length,s=0;s<n;s++)if(y.SA[s].check(e)){var o=y.SA[s].get(e,(function(){return i}));o instanceof Promise?(v.push(s),function(e){o.then((function(n){i=n,v.splice(v.indexOf(e),1),t(i)}))}(s)):t(i=o)}},enter:function(e){h("beforeenter",[e]),f(e).enter(e),h("afterenter",[e])},getType:f,addNewType:b,addNewSA:w,searchUtil:l,initsto:d,setJustSearch(e){d.set("ob_justsearch",e),T.reGet()},isInit:function(){return x},initNative:q,initSett:_,on:u,off:g,doevent:h,sg:p}},21:function(e,t){const i=e(3),{storage:n}=e(7);var s=n("search",{sync:!0,title:"搜索引擎",desc:"搜索引擎配置",compare(e,t,i){var n=d();for(var t in i.typelist)n[t]=i.typelist[t];i.typelist=n,e[t]=i}});s.get("typelist")||s.set("typelist",{bing:"",baidu:"",so:"",sogou:"",google:""}),s.get("type")||s.set("type","bing");var o={bing:{name:"必应",link:"https://www.bing.com/search?q="},baidu:{name:"百度",link:"https://www.baidu.com/s?ie=utf-8&wd="},google:{name:"Google",link:"https://www.google.com/search?q="},so:{name:"360搜索",link:"https://www.so.com/s?q="},sogou:{name:"搜狗",link:"https://www.sogou.com/sogou?query="},stear:{name:"林中木<span>赞助</span>",link:"https://tfseek.top/search?q="},yandex:{name:"Yandex",link:"https://yandex.com/search/?text="},github:{name:"GitHub",link:"https://github.com/search?q="},bilibili:{name:"哔哩哔哩",link:"https://search.bilibili.com/all?keyword="},zhihu:{name:"知乎",link:"https://www.zhihu.com/search?type=content&q="},weibo:{name:"微博",link:"https://s.weibo.com/weibo?q="},taobao:{name:"淘宝",link:"https://ai.taobao.com/search/index.htm?pid=mm_31205575_2237000308_114588650482&union_lens=lensId%3APUB%401667806444%402104ee54_0bea_1845102bd01_03e9%4001&key="},jd:{name:"京东",link:"https://search.jd.com/Search?keyword="},xiaohongshu:{name:"小红书",link:"https://www.xiaohongshu.com/search_result/?&m_source=itab&keyword="},kugou:{name:"酷狗音乐",link:"https://www.kugou.com/yy/html/search.html#searchType=song&searchKeyWord="},qqm:{name:"QQ音乐",link:"https://y.qq.com/n/ryqq/search?t=song&remoteplace=txt.yqq.top&w="},netease:{name:"网易云音乐",link:"https://music.163.com/#/search/m/?type=1&s="},douyin:{name:"抖音",link:"https://www.douyin.com/search/%s?ug_source=lenovo_stream"},duckduckgo:{name:"DuckDuckGo",link:"https://duckduckgo.com/?q="},stackoverflow:{name:"StackOverflow",link:"https://stackoverflow.com/nocaptcha?s="},yahoo:{name:"Yahoo",link:"https://hk.search.yahoo.com/search?p="},mdn:{name:"MDN",link:"https://developer.mozilla.org/zh-CN/search?q="},douban:{name:"豆瓣",link:"https://www.douban.com/search?q="},toutiao:{name:"头条搜索",link:"https://so.toutiao.com/search?dvpf=pc&keyword="},fsearch:{name:"F搜",link:"https://fsoufsou.com/search?q="}},{on:a,off:r,doevent:l}=i(),c=l,d=()=>s.get("typelist"),u={getSearchType:()=>o[s.get("type")]?o[s.get("type")].link+"%keyword%":s.get("typelist")[s.get("type")],on:a,setSearchList:e=>{if(0==Object.keys(e).length)throw new Error("newList is empty");s.set("typelist",e);var t=s.get("typelist");c("typelistchange");var i=s.get("type");t[i]!=e[i]&&c("nowtypechange")},getSearchTypeList:d,setSearchType:e=>{s.set("type",e),c("nowtypechange")},getSearchTypeIndex:()=>s.get("type"),neizhi:o};Object.defineProperty(u,"keywordText",{get:()=>"%keyword%"}),t.exports=u},22:function(e,t){const{SettingItem:i}=e(12),n=e(4),{initsto:s,getSA:o,enter:a,searchUtil:r,getType:l,sg:c,doevent:d}=e(20),{Onshow:u}=e(1);var g,h,p,y,v,m,f,b;function w(e,t){var i=l(e);if(":"==i.icon[0]){if(!t&&p.getAttribute("data-teshu")==i.icon)return;p.setAttribute("data-teshu",i.icon);var s=function(e){return":searchtype"==e?new Promise((function(e,t){n.getFavicon(r.getSearchType(),(function(t){e(t?'<img src="'+t+'" style="border-radius:50%;"/>':'<img src="'+n.createIcon("S")+'" style="border-radius:50%;"/>')}))})):""}(i.icon);s instanceof Promise?s.then((function(e){p.innerHTML=e})):p.innerHTML=s}else p.innerHTML=i.icon,p.removeAttribute("data-teshu");":"==i.submit[0]?(v.setAttribute("data-teshu",i.submit),v.innerHTML=(i.submit,"")):(v.innerHTML=i.submit,v.removeAttribute("data-teshu"))}f=n.element("div",{class:"searchpadding"}),n.query(document,"main .center").append(f),null==s.get("ob_autofocus")&&s.set("ob_autofocus",!1);var k=new i({title:"自动聚焦",index:1,type:"boolean",message:"打开页面自动聚焦搜索框",get:()=>!!s.get("ob_autofocus"),callback:e=>(s.set("ob_autofocus",e),!0)});c.addNewItem(k);var q=new i({title:"聚焦时背景蒙版",index:6,type:"boolean",message:"关闭后聚焦搜索框时不再出现背景蒙版",get:()=>!s.get("ob_notshowb"),callback:e=>(s.set("ob_notshowb",!e),L(),!0)});c.addNewItem(q);var x=new i({title:"背景蒙版模糊",index:7,type:"boolean",message:"背景蒙版模糊（可能会影响性能）",get:()=>s.get("ob_bblur"),callback:e=>(s.set("ob_bblur",e),L(),!0)});function L(){s.get("ob_notshowb")?(h.classList.add("notshow"),x.hide()):(h.classList.remove("notshow"),x.show(),s.get("ob_bblur")?h.classList.add("blur"):h.classList.remove("blur"))}c.addNewItem(x),t.exports={setValue(e){y.value=e,y.focus(),b.call(y)},focus(){y.focus()},blur(){y.blur()},isblur:()=>!y.classList.contains("active"),setAutoFocus(e){s.set("ob_autofocus",e),k.reGet()},getInput:()=>y,uiEnable:function(t){t?(g||function(){var t;function i(){clearTimeout(t),h.classList.add("active"),g.classList.add("active"),d("focus",[y])}g=n.element("div",{class:"searchbox"}),h=n.element("div",{class:"cover searchcover"}),g.innerHTML=e(23).replace("{i}",s.get("ob_autofocus")?"autofocus":""),n.query(document,"main").append(g),n.query(document,"main").append(h),p=n.query(g,"div.icon"),y=n.query(g,"div.input input"),v=n.query(g,"div.submit"),m=n.query(g,"ul.sas"),s.get("ob_justsearch")&&(y.placeholder="搜索"),b=function(){w(this.value.trim()),m.innerHTML="",o(this.value.trim(),(function(e){var t=n.query(m,"li.active");t&&(t={icon:n.query(t,"div.saicon").innerHTML,text:n.query(t,"div.sa_text").innerText}),m.innerHTML="",e.forEach((e=>{var t=n.element("li");t.innerHTML=`<div class="saicon">${e.icon}</div><div class="sa_text"></div>`,t.querySelector(".sa_text").innerText=e.text,m.append(t),t.onclick=()=>{e.click()}})),t&&n.query(m,"li",!0).forEach((e=>{n.query(e,"div.saicon").innerHTML&&n.query(e,"div.sa_text").innerHTML==t.text&&e.classList.add("active")}))})),d("input",[y.value])},y.oninput=n.fangdou(b,300),y.onkeydown=function(e){if("Enter"==e.key)(t=n.query(m,"li.active"))?t.click():a(this.value);else if("ArrowUp"==e.key)e.preventDefault(),(t=n.query(m,"li.active"))&&(t.classList.remove("active"),t.previousElementSibling&&t.previousElementSibling.classList.add("active"));else if("ArrowDown"==e.key)e.preventDefault(),(t=n.query(m,"li.active"))?t.nextElementSibling&&(t.classList.remove("active"),t.nextElementSibling.classList.add("active")):n.query(m,"li").classList.add("active");else if("ArrowRight"==e.key){var t;(t=n.query(m,"li.active"))&&(y.value=n.query(t,".sa_text").innerText,b.call(this))}else if("Tab"==e.key)if(e.preventDefault(),e.shiftKey)if(n.query(x,"li.active").previousElementSibling)n.query(x,"li.active").previousElementSibling.click();else{var i=n.query(x,"li",!0);i[i.length-2].click()}else n.query(x,"li.active").nextElementSibling.classList.contains("add")?n.query(x,"li").click():n.query(x,"li.active").nextElementSibling.click()},y.addEventListener("focus",i),y.addEventListener("blur",(function(){this.classList.remove("active"),t=setTimeout((()=>{l?c=function(){setTimeout((()=>{h.classList.remove("active"),g.classList.remove("active")}),10)}:(h.classList.remove("active"),g.classList.remove("active"))})),d("blur",[y])})),document.addEventListener("mousedown",k),document.addEventListener("touchstart",k),document.addEventListener("mouseup",q),document.addEventListener("touchend",q);var l=!1,c=function(){};function k(){l=!0}function q(){l=!1,c(),c=function(){}}v.onclick=function(){a(y.value)};var x=n.element("div",{class:"searchtypeselector"});function T(){var e=n.query(x,"ul"),t=r.getSearchTypeIndex();e.innerHTML="";var i=r.getSearchTypeList();for(var s in i){var o;(o=n.element("li")).innerHTML="<img/>",function(e,t){!i[t]&&r.neizhi[t]&&(i[t]=r.neizhi[t].link),n.getFavicon(i[t],(function(t){e.querySelector("img").src=t||n.createIcon("s")}))}(o,s),o.setAttribute("data-type",s),e.append(o),s==t&&o.classList.add("active"),o.onclick=function(){var e=n.query(x,"ul li.active");e&&e.classList.remove("active"),this.classList.add("active"),r.setSearchType(this.getAttribute("data-type")),x.classList.remove("active")}}(o=n.element("li")).classList.add("add"),o.innerHTML=n.getGoogleIcon("e145"),e.append(o),o.onclick=function(){quik.searchEditor.open()},x.style.width=36*n.query(e,"li",!0).length-6+"px"}x.innerHTML="<ul></ul>",n.query(document,"main .center").insertBefore(x,f.nextElementSibling),p.addEventListener("click",(function(){x.classList.contains("active")?(x.classList.remove("active"),document.querySelector("main .links").classList.remove("duan")):(x.classList.add("active"),document.querySelector("main .links").classList.add("duan"))})),r.on("nowtypechange",(function(){":searchtype"==p.getAttribute("data-teshu")&&w(y.value,!0)})),r.on("typelistchange",(function(){T()})),T(),w(""),L(),s.get("ob_autofocus")&&u((()=>{setTimeout((()=>{y.focus(),i()}),100)}))}(),g.style.display="block",f.style.height="",k.show(),q.show(),x.show()):(g&&(g.style.display="none"),f.style.height="20px",k.hide(),q.hide(),x.hide())}}},23:function(e,t){t.exports='<div class="box"><div class="icon"></div><div class="input"><input type="text" placeholder="搜索或输入网址" {i}></div><div class="submit"></div></div><ul class="sas"></ul>'},24:function(_r,module){const{SettingItem:SettingItem}=_r(12),util=_r(4),{addNewSA:addNewSA,initsto:initsto,sg:sg}=_r(20),{setValue:setValue}=_r(22);var si=new SettingItem({title:"自动计算",index:2,type:"boolean",message:"搜索框输入=自动计算后面的内容",get:()=>!!initsto.get("ob_cal"),callback:e=>(initsto.set("ob_cal",e),!0)});sg.addNewItem(si),addNewSA({check:e=>!!initsto.get("ob_cal")&&"="==e[0],get(text,getsa){var a=getsa();try{if(text=text.substr(1),!text)return a;var e=Math.E,PI=Math.PI,ln=Math.log,lg=Math.log10,sin=Math.sin,cos=Math.cos,tan=Math.tan,asin=Math.asin,acos=Math.acos,atan=Math.atan,sqrt=Math.sqrt,abs=Math.abs;text=text.replaceAll("^","**").replaceAll("π","PI").replaceAll("[","(").replaceAll("]",")").replaceAll("{","(").replaceAll("}",")");var result=eval(text);result=result.toString().replace("e+","*10^"),a.unshift({icon:util.getGoogleIcon("ea5f"),text:result,click(){setValue(result)}})}catch(e){}return a}}),module.exports=si},25:function(e,t){const{SettingItem:i}=e(12),n=e(4),{addNewSA:s,initsto:o,sg:a}=e(20),{setValue:r}=e(22);var l,c=new i({title:"自动翻译",index:2,type:"boolean",message:"搜索框输入非中文时自动翻译为中文",get:()=>!!o.get("ob_tran"),callback:e=>(o.set("ob_tran",e),!0)});a.addNewItem(c),s({check:e=>!!o.get("ob_tran")&&!n.checkUrl(e)&&function(e){var t=e.length,i=e.match(/[a-zA-Z\u3040-\u309F\u30A0-\u30FF\u31F0-\u31FFйцукенгшщзхъфывапролджэячсмитьбюёàâäèéêëîïôœùûüÿçÀÂÄÈÉÊËÎÏÔŒÙÛÜŸÇ\u0530-\u1CDF]/g);return!!i&&i.length/t>.5}(e),get:(e,t)=>new Promise((function(i,s){l=setTimeout((()=>{n.xhr("https://edge.microsoft.com/translate/auth",(function(s){var o=new XMLHttpRequest;o.open("POST","https://api.cognitive.microsofttranslator.com/translate?from=en&to=zh-CHS&api-version=3.0&includeSentenceLength=true",!0),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("authorization","Bearer "+s),o.onreadystatechange=function(){if(4==o.readyState&&200==o.status){var e=t(),s=JSON.parse(o.responseText);if(s[0]){var a=s[0].translations[0].text;e.unshift({icon:n.getGoogleIcon("e8e2"),text:a,click(){r(a)}})}i(e)}};var a=[{Text:e.replace(/[\r\n]/g," ")}];o.send(JSON.stringify(a))}),(function(){}))}),1500)})),interrupt(){clearTimeout(l)}}),t.exports=c},26:function(e,t){var{initsto:i}=e(27),n=e(4),s=e(28),o=e(31);s.on("change",(function(e){i.websync(e)})),t.exports=n.joinObj(s,o)},27:function(e,t){var{storage:i,dbTool:n}=e(7),s=e(3),o=i("link",{sync:!0,title:"链接",desc:"QUIK起始页链接数据",websync:!0,get:async function(){var e=o.getAll();return"db"==e["storage-mode"]&&(e.links=await localforage.getItem(e.links),e.cate=await localforage.getItem(e.cate)),delete e["storage-mode"],e},rewrite:(e,t,i)=>new Promise((s=>{i["storage-mode"]=o.get("storage-mode"),"db"==o.get("storage-mode")?o.remove("links",!0,(()=>{n.set(i.links,void 0,(a=>{i.links=a,o.remove("cate",!0,(()=>{n.set(i.cate,void 0,(n=>{i.cate=n,e[t]=i,s()}))}))}))})):(e[t]=i,s())})),compare:(e,t,i)=>new Promise((s=>{if(i["storage-mode"]=o.get("storage-mode"),"db"==i["storage-mode"])o.get("links",!0,(r=>{o.remove("links",!0,(()=>{i.links=a(r,i.links),n.set(i.links,void 0,(o=>{i.links=o,n.get(e[t].cate,(o=>{n.delete(e[t].cate,(()=>{var r=o;if(r)for(var l in i.cate)r[l]=a(r[l],i.cate[l]);else r=i.cate;i.cate=r,n.set(i.cate,void 0,(n=>{i.cate=n,e[t]=i,s()}))}))}))}))}))}));else{i.links=a(o.get("links"),i.links);var r=o.get("cate");for(var l in i.cate)r[l]=a(r[l],i.cate[l]);i.cate=r,e[t]=i}}))});function a(e,t){if(!e)return t;if(!t)return e;for(var i=0;i<e.length;i++)t.find((function(t){return t.title==e[i].title&&t.url==e[i].url}))||t.push(e[i]);return t}var{on:r,off:l,doevent:c}=s();t.exports={initsto:o,on:r,off:l,doevent:c,pushLink:function(e,t){var i={title:e.title,url:e.url};return"number"==typeof e.index&&e.index>=0?e.index>t.length?t.push(i):t.splice(e.index,0,i):t.push(i),t},writeLink:function(e,t,i){if(!i[e])return!1;var n={title:t.title,url:t.url};if(i[e]=n,"number"==typeof t.index&&t.index>=0)if(t.index>=i.length);else{var s=i.splice(e,1)[0];i.splice(t.index,0,s)}return i},limitURL:function(e){return e.url.length>1e3?"url":e.title.length>60&&"title"},compareLinks:a,compareCates:function(e,t){for(var i in e)t[i]?t[i]=a(e[i],t[i]):t[i]=e[i];return t}}},28:function(e,t){let{storage:i}=e(7);var n;n=i.checkIDB()?e(29):e(30),t.exports=n},29:function(e,t){let{initsto:i,doevent:n,on:s,off:o,writeLink:a,pushLink:r}=e(27),l=e(4);const{confirm:c}=e(8);i.set("storage-mode","db");var d=[{title:"百度翻译",url:"https://fanyi.baidu.com/"},{title:"哔哩哔哩",url:"https://www.bilibili.com/"},{title:"知乎",url:"https://www.zhihu.com/"},{title:"网易云音乐",url:"https://music.163.com/"},{title:"Github",url:"https://github.com/"}],u=0,g=[];i.get("links")?3==++u&&g.forEach((e=>e())):i.set("links",d,!0,(()=>{3==++u&&g.forEach((e=>e()))})),i.get("cate")?(u++,i.get("catelist")?3==++u&&g.forEach((e=>e())):i.get("cate",!0,(e=>{i.set("catelist",Object.keys(e)),3==++u&&g.forEach((e=>e()))}))):i.set("cate",{},!0,(()=>{u++,i.set("catelist",[]),3==++u&&g.forEach((e=>e()))})),3==u&&g.forEach((e=>e())),t.exports={setAll(e,t,s){if(3!=u)throw"初始化未完成";Array.isArray(e)&&"object"==typeof t&&(e&&i.set("links",e,!0,(()=>{s&&s("link"),n("change",{type:"all",links:e})})),t&&i.set("cate",t,!0,(()=>{i.set("catelist",Object.keys(t)),s&&s("cate"),n("change",{type:"all",cate:t})})))},addLink(e,t){if(3!=u)throw"初始化未完成";if(!l.checkDetailsCorrect(e,["title","url"]))throw"参数不正确";e.cate?i.get("cate",!0,(s=>{s[e.cate]?(s[e.cate]=r(e,s[e.cate]),i.set("cate",s,!0,(()=>{t&&t({code:0,msg:"添加成功"}),n("change",{cate:e.cate,type:"add",detail:e})}))):t&&t({code:-1,msg:"分组不存在"})})):i.get("links",!0,(s=>{s=r(e,s),i.set("links",s,!0,(()=>{t&&t({code:0,msg:"添加成功"}),n("change",{cate:null,type:"add",detail:e})}))}))},changeLink(e,t,s,o,r={}){if(3!=u)throw"初始化未完成";if(!l.checkDetailsCorrect(s,["title","url"])||"number"!=typeof t)throw"参数错误";e?i.get("cate",!0,(l=>{if(l[e]){var c=a(t,s,l[e]);c?(l[e]=c,i.set("cate",l,!0,(()=>{o&&o({code:0,msg:"修改成功"}),n("change",{cate:e,index:t,type:"change",detail:s,other:r})}))):o&&o({code:-2,msg:"链接不存在"})}else o&&o({code:-1,msg:"分组不存在"})})):i.get("links",!0,(e=>{var l=a(t,s,e);l?(e=l,i.set("links",e,!0,(()=>{o&&o({code:0,msg:"修改成功"}),n("change",{cate:null,index:t,type:"change",detail:s,other:r})}))):o&&o({code:-2,msg:"链接不存在"})}))},deleteLink(e,t,s){if(3!=u)throw"初始化未完成";e?i.get("cate",!0,(o=>{o[e]?o[e][t]?(o[e].splice(t,1),i.set("cate",o,!0,(()=>{s&&s({code:0,msg:"删除成功"}),n("change",{cate:e,index:t,type:"delete"})}))):s&&s({code:-2,msg:"链接不存在"}):s&&s({code:-1,msg:"分组不存在"})})):i.get("links",!0,(e=>{e[t]?(e.splice(t,1),i.set("links",e,!0,(()=>{s&&s({code:0,msg:"删除成功"}),n("change",{cate:null,index:t,type:"delete"})}))):s&&s({code:-2,msg:"链接不存在"})}))},addCate(e,t,s){if(3!=u)throw"初始化未完成";i.get("cate",!0,(o=>{o[e]?t&&t({code:-1,msg:"分组已存在"}):(o[e]=[],i.set("cate",o,!0,(()=>{var o=i.get("catelist");void 0===s?o.splice(s,0,e):o.push(e),i.set("catelist",o),t&&t({code:0,msg:"添加成功"}),n("change",{cate:e,type:"cateadd"})})))}))},renameCate(e,t,s,o){if(3!=u)throw"初始化未完成";var a=i.get("catelist");if(!(a.indexOf(e)<0))return e==t?(a.splice(a.indexOf(e),1),a.splice(o,0,e),i.set("catelist",a),s&&s({code:0,msg:"修改成功"}),void n("change",{cate:e,catename:t,type:"caterename"})):void i.get("cate",!0,(r=>{r[e]?(r[t]&&s&&s({code:-2,msg:"分组重名"}),r[t]=r[e],delete r[e],i.set("cate",r,!0,(()=>{"number"!=typeof o&&(o=a.indexOf(e)),a.splice(a.indexOf(e),1),a.splice(o,0,t),i.set("catelist",a),s&&s({code:0,msg:"修改成功"}),n("change",{cate:e,catename:t,type:"caterename"})}))):s&&s({code:-1,msg:"分组不存在"})}));s&&s({code:-1,msg:"分组不存在"})},deleteCate(e,t){if(3!=u)throw"初始化未完成";var s=i.get("catelist");s.indexOf(e)<0?t&&t({code:-1,msg:"分组不存在"}):(s.splice(s.indexOf(e),1),i.set("catelist",s),i.get("cate",!0,(s=>{s[e]?s[e].length<=0?(delete s[e],i.set("cate",s,!0,(()=>{t&&t({code:0,msg:"删除成功"}),n("change",{cate:e,type:"catedelete"})}))):c("确定要删除分组吗？无法恢复！",(o=>{o?(delete s[e],i.set("cate",s,!0,(()=>{t&&t({code:0,msg:"删除成功"}),n("change",{cate:e,type:"catedelete"})}))):t&&t({code:-2,msg:"用户取消删除"})})):t&&t({code:-1,msg:"分组不存在"})})))},getLinks(e,t){if(3!=u)throw"初始化未完成";e?i.get("cate",!0,(i=>{i[e]?t&&t({code:0,msg:"获取成功",data:i[e]}):t&&t({code:-1,msg:"分组不存在"})})):i.get("links",!0,(e=>{t&&t({code:0,msg:"获取成功",data:e})}))},getCates(e){if(3!=u)throw"初始化未完成";e&&e({code:0,msg:"获取成功",data:i.get("catelist")})},getCateAll(e){if(3!=u)throw"初始化未完成";i.get("cate",!0,(t=>{e&&e({code:0,msg:"获取成功",data:t})}))},ready(e){3==u?e():g.push(e)},on:s,off:o}},30:function(e,t){let{initsto:i,doevent:n,on:s,off:o,pushLink:a,writeLink:r,limitURL:l}=e(27),c=e(4);const{confirm:d}=e(8);i.set("storage-mode","localstorage"),i.get("links")||i.set("links",[]),i.get("cate")?i.get("catelist")||i.set("catelist",Object.keys(i.get("cate"))):(i.set("cate",{}),i.set("catelist",[])),t.exports={setAll(e,t,s){Array.isArray(e)&&"object"==typeof t&&(i.set("links",e),i.set("cate",t),i.set("catelist",Object.keys(t)),s&&s(),n("change",{type:"all",links:e,cate:t}))},addLink(e,t){if(!c.checkDetailsCorrect(e,["title","url"]))throw"参数不正确";var s=l(e);if(s)t&&t({code:-3,msg:"受限模式下，"+s+"长度过长",lm:s});else if(e.cate){var o=i.get("cate");if(o[e.cate]){if(o[e.cate].length>100)return void(t&&t({code:-4,msg:"受限模式下，分组下已超过100条链接，无法添加"}));o[e.cate]=a(e,o[e.cate]),i.set("cate",o),t&&t({code:0,msg:"添加成功"}),n("change",{cate:e.cate,type:"add",detail:e})}else t&&t({code:-1,msg:"分组不存在"})}else{var r=i.get("links");if(r.length>100)return void(t&&t({code:-4,msg:"受限模式下，分组下已超过100条链接，无法添加"}));r=a(e,r),i.set("links",r),t&&t({code:0,msg:"添加成功"}),n("change",{cate:null,type:"add",detail:e})}},changeLink(e,t,s,o,a={}){if(!c.checkDetailsCorrect(s,["title","url"])||"number"!=typeof t)throw"参数错误";var d=l(s);if(d)o&&o({code:-3,msg:"受限模式下，"+d+"长度过长",lm:d});else if(e){var u=i.get("cate");if(!u[e])return void(o&&o({code:-1,msg:"分组不存在"}));if(!(g=r(t,s,u[e])))return void(o&&o({code:-2,msg:"链接不存在"}));u[e]=g,i.set("cate",u),o&&o({code:0,msg:"修改成功"}),n("change",{cate:e,index:t,type:"change",detail:s,other:a})}else{var g,h=i.get("links");if(!(g=r(t,s,h)))return void(o&&o({code:-2,msg:"链接不存在"}));h=g,i.set("links",h),o&&o({code:0,msg:"修改成功"}),n("change",{cate:null,index:t,type:"change",detail:s,other:a})}},deleteLink(e,t,s){if(e){var o=i.get("cate");if(!o[e])return void(s&&s({code:-1,msg:"分组不存在"}));if(!o[e][t])return void(s&&s({code:-2,msg:"链接不存在"}));o[e].splice(t,1),i.set("cate",o),s&&s({code:0,msg:"删除成功"}),n("change",{cate:e,index:t,type:"delete"})}else{var a=i.get("links");if(!a[t])return void(s&&s({code:-2,msg:"链接不存在"}));a.splice(t,1),i.set("links",a),s&&s({code:0,msg:"删除成功"}),n("change",{cate:null,index:t,type:"delete"})}},addCate(e,t){var s=i.get("cate");s[e]?t&&t({code:-1,msg:"分组已存在"}):Object.keys(s).length>=20?t&&t({code:-2,msg:"受限模式下，分组数量不能超过20个"}):(s[e]=[],i.set("cate",s),t&&t({code:0,msg:"添加成功"}),n("change",{cate:e,type:"cateadd"}))},renameCate(e,t,s){var o=i.get("cate");o[e]?(o[t]&&s&&s({code:-2,msg:"分组重名"}),o[t]=o[e],delete o[e],i.set("cate",o),s&&s({code:0,msg:"修改成功"}),n("change",{cate:e,catename:t,type:"caterename"})):s&&s({code:-1,msg:"分组不存在"})},deleteCate(e,t){var s=i.get("cate");s[e]?s[e].length<=0?(delete s[e],i.set("cate",s),t&&t({code:0,msg:"删除成功"})):d("确定要删除分组吗？无法恢复！",(o=>{o?(delete s[e],i.set("cate",s),t&&t({code:0,msg:"删除成功"}),n("change",{cate:e,type:"catedelete"})):t&&t({code:-2,msg:"用户取消删除"})})):t&&t({code:-1,msg:"分组不存在"})},getLinks(e,t){if(e){if(!(n=i.get("cate"))[e])return void(t&&t({code:-1,msg:"分组不存在"}));t&&t({code:0,msg:"获取成功",data:n[e]})}else{var n=i.get("links");t&&t({code:0,msg:"获取成功",data:n})}},getCates(e){var t=i.get("catelist");e&&e({code:0,msg:"获取成功",data:t})},getCateAll(e){var t=i.get("cate");e&&e({code:0,msg:"获取成功",data:t})},ready(e){e()},on:s,off:o}},31:function(e,t){const{dcate:i,enabledCateSi:n,cateWidthShiPei:s}=e(32),{dsize:o,linkSizeSi:a}=e(34);let{initsto:r}=e(27);const{init:l}=e(36);e(35),l(),t.exports={isShowCate:()=>r.get("enabledCate"),setShowCate(e){r.set("enabledCate",e),i(e),n.reGet()},getLinkSize:()=>r.get("linksize"),setLinkSize(e){-1!=["xs","s","m","l","xl"].indexOf(e)&&(r.set("linksize",e),o(e),a.reGet())},cateWidthShiPei:s}},32:function(e,t){let{linkF:i,linksg:n}=e(33),s=e(4),o=e(28);const{drawLinks:a}=e(34),r=e(10),{initsto:l}=e(27),{SettingItem:c}=e(12),d=e(9),u=e(5),{confirm:g}=e(8);let h;setTimeout((function(){h=e(36).resetmenued}));var p,y=null,v=new r({list:[{icon:s.getGoogleIcon("e3c9"),title:"修改",click(){w(y.innerText)}},{icon:s.getGoogleIcon("e92e"),title:"删除",click(){var e=y.innerText;o.deleteCate(e,(e=>{0==e?u.show("删除成功"):u.show(e.msg)}))}}]});function m(e){var t=s.element("div",{class:"cate-item"});t.innerText=e,s.query(i,".cate-bar-items").append(t),t.onclick=function(){b(this)},t.oncontextmenu=function(e){e.preventDefault(),e.stopPropagation(),h(),y=this,v.setOffset({top:e.pageY,left:e.pageX}),this.classList.add("menued"),v.show()}}function f(){s.query(i,".cate-bar-items .cate-item",!0).forEach((e=>{e.classList.contains("mr")||e.remove()})),o.getCates((e=>{e.data.forEach((e=>{m(e)}))}))}function b(e){s.query(i,".link-list").innerHTML='<div class="insert-line"></div>';var t=null;if("string"==typeof e){try{s.query(i,".cate-bar-items .cate-item.active").classList.remove("active")}catch(e){}for(var n=s.query(i,".cate-bar-items .cate-item",!0),o=0;o<n.length;o++)if(!n[o].classList.contains("mr")&&n[o].innerText==e){n[o].classList.add("active");break}t=e}else if(e){try{s.query(i,".cate-bar-items .cate-item.active").classList.remove("active")}catch(e){}e.classList.add("active"),e.classList.contains("mr")||(t=e.innerText)}else{try{s.query(i,".cate-bar-items .cate-item.active").classList.remove("active")}catch(e){}s.query(i,".cate-bar-items .cate-item.mr").classList.add("active")}a(t)}function w(t){p||(p=new d({class:"link-add-dialog",content:e(40)}));var i=p.getDialogDom();function n(e,t,n,o,a){s.query(i,"h1").innerHTML=e,s.query(i,".cate-name").value=t,s.query(i,".cate-index").value=n,s.query(i,".cate-index").max=o,s.query(i,".cate-index").min=1,s.query(i,"form").onsubmit=e=>{e.preventDefault();var t=s.query(i,".cate-name").value,n=s.query(i,".cate-index").value;a(t,n-1)}}s.query(i,".cancel.btn").onclick=e=>{e.preventDefault(),p.close()},setTimeout((()=>{p.open(),o.getCates((function(e){var i=e.data;t?n("修改分组",t,i.indexOf(t)+1,i.length,(function(e,i){o.renameCate(t,e,(e=>{e.code<0?u.show(e.msg):(u.show("修改成功"),p.close())}),i)})):n("添加分组","",i.length+1,i.length+1,(function(e,t){o.addCate(e,(e=>{e.code<0?u.show(e.msg):(u.show("添加成功"),p.close())}),t)}))}))}))}void 0===l.get("enabledCate")&&l.set("enabledCate",!1);var k=new c({type:"boolean",title:"链接分组",message:"(Alt+G)启用链接分组功能来管理链接",get:()=>l.get("enabledCate"),callback(e){l.set("enabledCate",e),q(e)}});function q(e){b(),e?(s.query(i,".cate-bar").style.display="block",function(){if(T)return;function e(e){if(e<0)return 0;var t=s.query(i,".cate-bar-scrolls").scrollWidth-s.query(i,".cate-bar-scrolls").getBoundingClientRect().width;return e>t?t:void 0}o.getCates((e=>{e.data.forEach((e=>{m(e)}))})),s.query(i,".cate-item.mr").onclick=function(){try{s.query(i,".cate-bar-items .cate-item.active").classList.remove("active")}catch(e){}this.classList.add("active"),b()},s.query(i,".cate-item.mr").oncontextmenu=function(e){e.preventDefault(),e.stopPropagation(),S.setOffset({top:e.pageY,left:e.pageX}),S.show()},s.query(i,".cate-add-btn").onclick=()=>{w()},s.query(i,".cate-left-btn").onclick=()=>{s.query(i,".cate-bar-scrolls").scrollTo({left:e(s.query(i,".cate-bar-scrolls").scrollLeft-s.query(i,".cate-bar-scrolls").getBoundingClientRect().width/2),behavior:"smooth"})},s.query(i,".cate-right-btn").onclick=()=>{s.query(i,".cate-bar-scrolls").scrollTo({left:e(s.query(i,".cate-bar-scrolls").scrollLeft+s.query(i,".cate-bar-scrolls").getBoundingClientRect().width/2),behavior:"smooth"})},s.query(i,".cate-bar-scrolls").onscroll=function(){x.call(this)},x.call(s.query(i,".cate-bar-scrolls")),T=!0}(),setTimeout((()=>{L()}),10)):s.query(i,".cate-bar").style.display="none"}function x(){var e=0;0==this.scrollLeft?(s.query(i,".cate-left-btn").classList.add("disabled"),e++):s.query(i,".cate-left-btn").classList.remove("disabled"),this.scrollLeft>=this.scrollWidth-this.getBoundingClientRect().width?(s.query(i,".cate-right-btn").classList.add("disabled"),e++):s.query(i,".cate-right-btn").classList.remove("disabled"),this.style.width="calc(100% - "+(120-40*e)+"px)"}function L(){var e=s.query(i,".cate-bar-items .cate-item",!0);s.query(i,".cate-bar-items").style.width="100000px",e[0].offsetHeight;var t=0;e.forEach((function(e){t+=e.getBoundingClientRect().width+4})),s.query(i,".cate-bar-items").style.width=t+"px",x.call(s.query(i,".cate-bar-scrolls"))}n.addNewItem(k),window.addEventListener("resize",(()=>{x.call(s.query(i,".cate-bar-scrolls"))}));var T=!1,S=new r({list:[{icon:s.getGoogleIcon("e92e"),title:"清空",click(){g("确定清空默认分组的链接吗？该操作不可恢复！",(function(e){e&&o.setAll([],null,(function(e){"link"==e&&u.show("清空成功")}))}))}}],offset:{top:0,left:0}});o.on("change",(e=>{var t=s.query(i,".cate-bar-items .cate-item.active");if("cateadd"==e.type)f(),b(e.cate);else if("catedelete"==e.type){var n=t.innerText;f(),n==e.cate&&b()}else if("caterename"==e.type){n=t.innerText;f(),n==e.cate&&b(e.catename)}else"all"==e.type&&(f(),b())})),t.exports={getMenuedCate:()=>y,observeCate:function(){new MutationObserver((()=>{setTimeout(L,1)})).observe(s.query(i,".cate-bar-items"),{childList:!0})},dcate:q,cateWidthShiPei:L,enabledCateSi:k}},33:function(e,t){let{SettingGroup:i,mainSetting:n}=e(12),s=e(4);var o=s.element("div",{class:"links"});s.query(document,"main .center").append(o);var a=new i({title:"链接"});n.addNewGroup(a);var r=[];t.exports={linkF:o,linksg:a,getIndex:function(e,t){for(var i=0;i<t.length;i++)if(t[i].isSameNode(e))return i;return-1},getLinklist:()=>r,setLinklist:e=>{r=e}}},34:function(e,t){let{getIndex:i,linkF:n,getLinklist:s,setLinklist:o,linksg:a}=e(33),r=e(4),l=e(28);const{SettingItem:c}=e(12),d=e(10),{initsto:u}=e(27),g=e(35),h=e(9),p=e(5);let y;setTimeout((function(){y=e(36).resetmenued}));var v=null;function m(){var e=i(v,r.query(n,".link-list li",!0)),t=r.query(n,".cate-bar-items .cate-item.active");return{cate:t=t.classList.contains("mr")?null:t.innerText,index:e}}var f,b=new d({list:[{icon:r.getGoogleIcon("e3c9"),title:"修改",click(){var{index:e,cate:t}=m();L(e,t)}},{icon:r.getGoogleIcon("e92e"),title:"删除",click(){var{index:e,cate:t}=m();l.deleteLink(t,e,(function(){p.show("删除成功")}))}},{icon:r.getGoogleIcon("e14d"),title:"复制链接",click(){r.copyText(r.query(v,"a").href)}},{icon:r.getGoogleIcon("e941"),title:"移动至...",click(){var{index:t,cate:i}=m();!function(t,i){w||(w=new h({class:"move-link-dialog",content:e(38)}),k=w.getDialogDom(),r.query(k,".cancel.btn").onclick=function(e){e.preventDefault(),w.close()},q=r.query(k,".group-list"));r.query(k,".ok.btn").onclick=function(e){var n=r.query(q,".item.act");if(n){var o=n.classList.contains("mr")?null:r.query(n,".item-name").innerText,a=s()[i];l.addLink({title:a.title,url:a.url,cate:o},(function(){l.deleteLink(t,i,(function(){p.show("移动成功"),w.close()}))}))}else p.show("请选择一个分组")},q.innerHTML="",l.getCates((e=>{e.data.unshift(null),e.data.forEach((e=>{var t=r.element("div",{class:"item"+(e?"":" mr")});t.innerHTML=`<div class="item-name">${e||r.getGoogleIcon("e838",{type:"fill"})}</div><div class="item-select">${r.getGoogleIcon("e5ca")}</div>`,q.append(t),t.onclick=function(){var e=r.query(q,".item.act");e&&e.classList.remove("act"),this.classList.add("act")}}))})),setTimeout((()=>{w.open()}))}(i,t)}}]}),w=null,k=null,q=null;function x(e){var t=r.element("li");return t.innerHTML=`<a href="${e.url}" target="_blank" rel="noopener noreferer"><div class="link-icon"><img/></div><p></p></a>`,r.query(t,"p").innerText=e.title,r.getFavicon(e.url,(i=>{r.query(t,"img").src=i||r.createIcon(e.title[0]),r.query(t,"img").onload=function(){this.classList.add("load")}})),t.oncontextmenu=function(e){e.preventDefault(),e.stopPropagation(),y(),v=this,b.setOffset({top:e.pageY,left:e.pageX}),this.classList.add("menued"),b.show()},g(t),t}function L(t,i){if(!f){var n=(f=new h({class:"link-add-dialog",content:e(39)})).getDialogDom();r.query(n,".cancel.btn").onclick=function(e){e.preventDefault(),f.close()}}setTimeout((()=>{f.open();var e=f.getDialogDom(),n=s().length;if(-1==t)a("添加链接","添加","","",n,n,(t=>{t.preventDefault();var s=r.query(e,".link-add-url").value;-1==s.indexOf("://")&&(s="http://"+s);var o=r.query(e,".link-add-title").value,a=r.query(e,".link-add-index").value;a=""==a?n:a-0,l.addLink({url:s,title:o,index:a,cate:i},(e=>{0!=e.code?p.show(e.msg):(p.show("添加成功"),f.close())}))}));else{var o=s();a("修改链接","修改",o[t].url,o[t].title,n-1,t,(n=>{n.preventDefault();var s=r.query(e,".link-add-url").value;-1==s.indexOf("://")&&(s="http://"+s);var o=r.query(e,".link-add-title").value,a=r.query(e,".link-add-index").value;a=""==a?t:a-0,l.changeLink(i,t,{url:s,title:o,index:a},(e=>{0!=e.code?p.show(e.msg):(p.show("修改成功"),f.close())}))}))}function a(t,i,n,s,o,a,l){r.query(e,"h1").innerHTML=t,r.query(e,".ok.btn").innerHTML=i,r.query(e,"input.link-add-url").value=n,r.query(e,"input.link-add-title").value=s,r.query(e,"input.link-add-index").setAttribute("max",o),r.query(e,"input.link-add-index").value=a,r.query(e,"form").onsubmit=l}}))}u.get("linksize")||u.set("linksize","m"),u.get("linkstyle")||u.set("linkstyle","round"),u.get("linkpailie")||u.set("linkpailie","a");var T=new c({type:"select",title:"链接大小",message:"修改链接显示的大小",init:()=>({xs:"很小",s:"小",m:"中",l:"大",xl:"很大"}),get:()=>u.get("linksize"),callback(e){u.set("linksize",e),E(e)}}),S=new c({type:"select",title:"链接样式",message:"修改链接显示的样式",init:()=>({def:"圆方",round:"圆形",square:"方形"}),get:()=>u.get("linkstyle"),callback(e){u.set("linkstyle",e),I()}}),_=new c({type:"select",title:"链接排列",message:"修改链接的排列方式",init:()=>({a:"靠左",b:"居中"}),get:()=>u.get("linkpailie"),callback(e){u.set("linkpailie",e),I()}});function I(){n.className="links "+u.get("linkstyle")+" "+u.get("linkpailie")}function E(e){r.query(n,".link-list").className="link-list "+e}a.addNewItem(T),a.addNewItem(S),a.addNewItem(_),l.on("change",(e=>{var t=r.query(n,".cate-bar-items .cate-item.active"),i=s();if(t&&(e.cate==t.innerText||null==e.cate&&t.classList.contains("mr")))if("add"==e.type){var a=x(e.detail);r.query(n,".link-list").insertBefore(a,r.query(n,".link-list .link-add")),i.push(e.detail),o(i)}else if("change"==e.type){if(!e.other||!e.other.justindex){i.splice(e.index,1),i.splice(e.detail.index,0,e.detail),o(i);var l=r.query(n,".link-list li",!0),c=l[e.index];e.index<e.detail.index?r.query(n,".link-list").insertBefore(c,l[e.detail.index+1]):r.query(n,".link-list").insertBefore(c,l[e.detail.index]),r.query(c,"a").href=e.detail.url,r.query(c,"p").innerText=e.detail.title,r.getFavicon(e.detail.url,(t=>{r.query(c,"img").src=t||r.createIcon(e.detail.title[0])}))}}else if("delete"==e.type){(a=r.query(n,".link-list li",!0)[e.index]).remove(),i.splice(e.index,1),o(i)}})),t.exports={drawLinks:function(e){l.getLinks(e,(e=>{o(e.data),e.data.forEach((e=>{var t=x(e);r.query(n,".link-list").append(t)}));var t=r.element("li",{class:"link-add"});t.innerHTML='<a href="javascript:void(0)" class="material-symbols-outlined">&#xe145;</a>',r.query(n,".link-list").append(t),t.onclick=()=>{var e=r.query(n,".cate-bar-items .cate-item.active");L(-1,e=e.classList.contains("mr")?null:e.innerText)}}))},dstyle:I,dsize:E,getMenuedLi:()=>v,linkSizeSi:T}},35:function(e,t){let{initsto:i}=e(27),n=e(4),{SettingItem:s}=e(12),{linksg:o,linkF:a,getLinklist:r,getIndex:l}=e(33),c=e(28);n.initSet(i,"draglink",!0);var d=new s({type:"boolean",index:2,title:"拖动排序链接(Beta)",message:"（仅在链接排列靠左时生效）开启后，你可以通过拖动链接来进行排序，手机端需长按链接1s才可拖动（Beta）",get:()=>i.get("draglink"),callback(e){i.set("draglink",e)}});setTimeout((()=>{o.addNewItem(d)}));var u=null;t.exports=function(e){function t(t){var s=null,o=null;e.addEventListener(t?"mousedown":"touchstart",(d=>{var g=r();if(3==d.which)return!0;if(t||(o=setTimeout((()=>{resetmenued(),menuedLi=e,linkMenu.setOffset({top:d.targetTouches[0].pageY,left:d.targetTouches[0].pageX}),e.classList.add("menued"),linkMenu.show()}),600)),!i.get("draglink")||"b"==i.get("linkpailie"))return!0;let h=t?d.pageX-e.getBoundingClientRect().left:d.targetTouches[0].pageX-e.getBoundingClientRect().left,p=t?d.pageY-e.getBoundingClientRect().top:d.targetTouches[0].pageY-e.getBoundingClientRect().top;t?(s=setTimeout((()=>{document.addEventListener("mousemove",k,{passive:!1})}),50),document.addEventListener("mouseup",x,{passive:!1})):(s=setTimeout((()=>{document.addEventListener("touchmove",k,{passive:!1}),e.classList.add("touching"),linkMenu.hide()}),1e3),document.addEventListener("touchend",x,{passive:!1}));var y=null,v=null,m=n.query(a,".link-list").getBoundingClientRect().left,f=n.query(a,".link-list").getBoundingClientRect().top,b=e.getBoundingClientRect().width,w=e.getBoundingClientRect().height;function k(i){i.preventDefault(),clearTimeout(o),y||(e.querySelector("a").addEventListener("click",q),(y=e.cloneNode(!0)).classList.add("dragging-link"),e.classList.add("mousing"),document.body.appendChild(y),y.style.width=e.getBoundingClientRect().width+"px",y.style.height=e.getBoundingClientRect().height+"px");var s=(t?i.pageX:i.targetTouches[0].pageX)-h,r=(t?i.pageY:i.targetTouches[0].pageY)-p;y.style.left=s+"px",y.style.top=r+"px";var l=s-m+50,c=r-f+n.query(a,".link-list").scrollTop;if(r-f<-w/2||r>n.query(a,".link-list").getBoundingClientRect().height+n.query(a,".link-list").getBoundingClientRect().top){(d=n.query(a,".link-list .insert-line")).style.display="none",v=null,r-f<0?(clearInterval(u),u=setInterval((()=>{n.query(a,".link-list").scrollTop-=2,n.query(a,".link-list").scrollTop<=0&&clearInterval(u)}),5)):(clearInterval(u),u=setInterval((()=>{n.query(a,".link-list").scrollTop+=2,n.query(a,".link-list").scrollTop>=n.query(a,".link-list").scrollHeight-n.query(a,".link-list").getBoundingClientRect().height&&clearInterval(u)}),5))}else{clearInterval(u);var d,k=parseInt(c/w),x=parseInt(l/b),L=x+k*function(){var e=n.query(a,".link-list").getBoundingClientRect().width/n.query(a,".link-list li").getBoundingClientRect().width;return parseInt(e)}();if(g.length>L)v=L,(d=n.query(a,".link-list .insert-line")).style.top=k*w+7+"px",d.style.left=x*b+"px",d.style.height=w+"px",d.style.display="block"}}function q(e){e.preventDefault()}function x(i){if(clearTimeout(s),clearTimeout(o),e.classList.remove("touching"),e.classList.remove("mousing"),setTimeout((()=>e.querySelector("a").removeEventListener("click",q)),10),document.removeEventListener(t?"mousemove":"touchmove",k),document.removeEventListener(t?"mouseup":"touchend",x),y&&(y.remove(),y=null),null!==v){n.query(a,".link-list .insert-line").style.display="none";var r=l(e,n.query(a,".link-list li",!0));if(v==r)return;var d=n.query(a,".cate-bar-items .cate-item.active");d=d.classList.contains("mr")?null:d.innerText,c.changeLink(d,r,{url:g[r].url,title:g[r].title,index:v},(t=>{0!=t.code?toast.show(t.msg):(g.splice(v,0,g.splice(r,1)[0]),v>r?n.query(a,".link-list").insertBefore(e,n.query(a,".link-list li",!0)[v+1]):n.query(a,".link-list").insertBefore(e,n.query(a,".link-list li",!0)[v]))}),{justindex:!0})}return!0}return!0}))}t(0),t(1)}},36:function(e,t){const i=e(4),{initsto:n}=e(27),s=e(28),{getMenuedCate:o,observeCate:a,dcate:r}=e(32),{linkF:l}=e(33),{getMenuedLi:c,dsize:d,dstyle:u}=e(34);function g(){o()&&o().classList.remove("menued"),c()&&c().classList.remove("menued")}document.addEventListener("click",g),document.addEventListener("contextmenu",g),t.exports={resetmenued:g,init:function(){l.innerHTML=e(37).replace("{{cate-left}}",i.getGoogleIcon("e314")).replace("{{cate-right}}",i.getGoogleIcon("e315")).replace("{{cate-add}}",i.getGoogleIcon("e145")).replace("{{mr}}",i.getGoogleIcon("e838",{type:"fill"})),s.ready((()=>{r(n.get("enabledCate")),d(n.get("linksize")),u(n.get("linkstyle")),setTimeout((function(){l.style.opacity=1}),300)})),a()}}},37:function(e,t){t.exports='<div class="cate-bar"><div class="cate-bar-controls"><div class="cate-left-btn">{{cate-left}}</div></div><div class="cate-bar-scrolls"><div class="cate-bar-items"><div class="cate-item mr active">{{mr}}</div></div></div><div class="cate-bar-controls r"><div class="cate-right-btn">{{cate-right}}</div><div class="cate-add-btn">{{cate-add}}</div></div></div><div class="linkscroll"><ul class="link-list"></ul></div>'},38:function(e,t){t.exports='<h1>移动至</h1><div class="group-list"></div><div class="footer"><div class="btn cancel">取消</div><div class="btn ok">确定</div></div>'},39:function(e,t){t.exports='<form><h1></h1><div class="content"><p>URL ：<input class="link-add-url" type="text" required placeholder="链接地址(必填)"></p><p>标题：<input class="link-add-title" type="text" required placeholder="链接标题(必填)"></p><p>位置：<input class="link-add-index" type="number" min="0" placeholder="链接位置"></p></div><div class="footer"><div class="cancel btn">取消</div><button class="ok btn"></button></div></form>'},40:function(e,t){t.exports='<form><h1></h1><div class="content"><p>标题：<input class="cate-name" type="text" required placeholder="分组标题(必填)"></p><p>位置：<input class="cate-index" type="number" required placeholder="分组位置"></p></div><div class="footer"><div class="cancel btn">取消</div><button class="ok btn">确定</button></div></form>'},41:function(e,t){const{_addSayType:i,getNowSay:n,setSayType:s,addSayType:o,initsto:a,getSayTypes:r,set_key:l,sayF:c,typesi:d,sayMenu:u,sayI:g,refsay:h}=e(42);if(i(e(55)),i(e(56)),i(e(57)),a.get("enabled")){var p=a.get("saytype"),y=r();y[p]?(u.setList(y[p].menu),g.onclick=y[p].click,h(p)):l(p)}else c.style.display="none",d.hide();t.exports={getNowSay:n,setSayType:s,addSayType:o}},42:function(e,t){const i=e(9),n=e(10),{SettingGroup:s,SettingItem:o,mainSetting:a}=e(12),{storage:r}=e(7),l=e(4),{alert:c,confirm:d}=e(8),u=e(43);var g=r("says",{sync:!0,title:"一言",desc:"QUIK起始页一言相关配置",get:async()=>{var e=g.getAll(),t=u.getAddonBySessionId(e.saytype);return t&&(e.requireAddon=t.url),e},rewrite:(e,t,i)=>new Promise(((n,s)=>{if(i.requireAddon){var o=u.getAddonByUrl(i.requireAddon);o?(i.saytype=o.session.id,e[t]=i,n()):d("该一言数据需要安装插件以同步，是否安装？",(s=>{s?u.installAddon(i.requireAddon).then((s=>{i.saytype=s.session.id,e[t]=i,n()})).catch((e=>{c(0==e?"插件取消安装，同步取消":"插件安装失败，同步取消",(()=>{n()}))})):c("已取消一言同步",(()=>{n()}))}))}else e[t]=i,n()}))}),h=l.element("div",{class:"says"});l.query(document,"main").appendChild(h),h.innerHTML=`<div class="say-inner"></div><div class="say-control">${l.getGoogleIcon("e5d4")}</div>`;var p=l.query(h,"div.say-inner"),y=l.query(h,"div.say-control"),v=new n({list:[]}),m=new i({content:`<div class="closeBtn">${l.getGoogleIcon("e5cd")}</div><ul></ul>`,class:"says_info"}),f=m.getDialogDom();l.query(f,"div.closeBtn").onclick=()=>{m.close()};var b={},w={};function k(e){b[e.key]={name:e.name,callback:e.callback,click:e.click||(()=>{}),menu:e.menu||[{icon:l.getGoogleIcon("e14d"),title:"复制",click(){var e=w.say;l.copyText(e)}}]}}function q(e,t){if(l.checkSession(e)&&(e=e.id),!b[e])throw"type不存在 type:"+e;g.set("saytype",e),v.setList(b[e].menu),p.onclick=b[e].click,x(e,t),S.reGet()}function x(e,t){if(l.checkSession(e)&&(e=e.id),!b[e])throw"key不存在";p.innerText="...",p.title="加载中",b[e].callback().then((e=>{p.innerText=e.say,p.setAttribute("title",e.title),w=e,t&&t()}))}u.on("allrun",(()=>{L&&(g.set("saytype","user"),x("user"),c("您的一言数据由于插件缺失无法显示，已为您切换为默认。"))})),y.onclick=e=>{e.stopPropagation();var t=y.getBoundingClientRect();v.setOffset({bottom:window.innerHeight-t.top,left:t.left-90+t.width}),v.show()},g.get("saytype")||g.set("saytype","user"),null==g.get("enabled")&&g.set("enabled",!0);var L,T=new s({title:"一言",index:3}),S=new o({title:"一言类型",type:"select",index:1,message:"页面底部显示的一言类型",init(){var e={};for(var t in b)e[t]=b[t].name;return e},callback(e){q(e)},get:()=>g.get("saytype")}),_=new o({title:"显示一言",type:"boolean",message:"是否页面底部显示的一言",index:0,callback(e){g.set("enabled",e),e?(q(g.get("saytype")),h.style.display="",S.show()):(h.style.display="none",S.hide())},get:()=>g.get("enabled")});a.addNewGroup(T),T.addNewItem(S),T.addNewItem(_),t.exports={getNowSay:function(){return w},setSayType:q,addSayType:function(e){if(!l.checkSession(e.session))throw"错误的session";var t;e.key=e.session.id,k(e),S.reInit(),(t=e.key)==L&&(v.setList(b[t].menu),p.onclick=b[t].click,x(t),L=null)},_addSayType:k,refsay:x,initsto:g,openSayDetailsDialog:function(e){l.query(f,"ul").innerHTML=(()=>{var t="";for(var i in e)t+="<li><b>"+i+":</b> "+e[i]+"</li>";return t})(),m.open()},sayMenu:v,sayI:p,sayF:h,typesi:S,getSayTypes:()=>b,set_key:e=>{L=e}}},43:function(e,t){const{icon:i}=e(6);var n=e(44);const{alert:s}=e(8),{storage:o}=e(7),a=e(4);var r,l=e(45);new i({offset:"tr",content:a.getGoogleIcon("e87b",{type:"fill"})}).getIcon().onclick=()=>{o.checkIDB()?r?r.open():(e(52),e(48),e(53),r=e(49).addon_dialog,setTimeout((()=>{r.open()}),10)):s("浏览器版本过低，无法使用插件功能！")},o.checkIDB()&&(window.addon_&&s("已在安全模式下运行，插件功能已关闭！"),n=l(n),t.exports=n)},44:function(e,t){const{alert:i}=e(8),n=e(9),s=e(3),{storage:o}=e(7),a=e(4);window.isExt&&window.extid;var r,l=s(),c=["浏览器不支持IndexedDB","安全模式下安装程序被禁止","确定是否安装此插件？"];function d(e,t){return new Promise(((i,n)=>{var s=new XMLHttpRequest;s.open("GET",e,!0),s.onreadystatechange=function(){4==s.readyState&&200==s.status&&i(s.responseText)},s.onerror=()=>{n(s.status)},s.onprogress=e=>{e.total?t&&t(e.loaded/e.total):t&&t(0)},s.send()}))}function u(e){if(0==(e=e.trim()).indexOf("/*QUIK_ADDON ")){var t=e.substring(13,e.indexOf(" */"));return"1"==(t=t.split("|"))[0]?{name:t[1],version_code:parseInt(t[2]),version:t[3],desc:t[4],author:t[5],icon:t[6],website:t[7],update:t[8],signature:t[9]}:{error:!0,msg:"un support meta version"}}return{error:!0,msg:"not QUIK addon"}}async function g(e,t,i){if("object"!=typeof t||t.error)return{msg:"插件格式错误:"+(t.msg||"META isn't an object"),error:!0};if(function(e){if(!e)return!1;for(var t=h.list(),i=0;i<t.length;i++)if(h.get(t[i]).signature==e)return!0}(t.signature))return{msg:"已安装相同插件",error:!0};var n=a.getRandomHashCache();for(var s in await new Promise((function(t){y.set(n,e,!0,t)})),t.id=n,i)void 0===t[s]&&(t[s]=i[s]);return h.set(n,t),await L(n),{id:n}}var h=o("addon",{sync:!0,title:"插件",desc:"QUIK起始页插件数据",rewrite:(e,t,s)=>new Promise((function(o){if(0!=Object.keys(s).length){var r=new n({content:"<div>正在同步插件...[<span>0</span>/"+Object.keys(s).length+"]</div>",class:"dialog-addon-install",clickOtherToClose:!1});r.open();var l=r.getDialogDom(),c=0;for(var d in s){var u;s[d].url&&v(s[d].url)?g():(s[d].marketId?u=q(s[d].marketId):s[d].type?g():u=x(s[d].url),u.on("done",(()=>{g()})),u.on("error",(()=>{g(),i("安装一个插件时失败")})),u.on("wait",(e=>e(!0))))}}else o();function g(){c++,a.query(l,"span").innerHTML=c,c==Object.keys(s).length&&(e[t]=h.getAll(),o())}}))}),y=o("addonscript");function v(e){var t=h.getAll();for(var i in t)if(t[i].url==e)return t[i]}function m(e){return h.get(e)}var f=["初始化","获取插件信息","下载插件","等待确认","安装插件","安装成功"],b=["初始化失败","未找到插件信息","下载插件失败","插件解析错误","用户取消","安装失败"];function w(){this.statuCode=0,this.statuMsg=f[0],this.progress=0,this.errorCode=-1,this.errorMsg="",this.result=null,this.ev=s(),this.on=this.ev.on,this.off=this.ev.off}function k(e){return function(t){t.error?e.setError(5,t.msg):(e.setStatu(5),e.setProgress(1),e.setDone(t),l.doevent("installnew",[t]))}}function q(e){var t=new w;function i(){if(r[e]){t.setProgress(.1),t.setStatu(2);var i=r[e].url;d(i,(e=>{t.setProgress(.1+.5*e)})).then((i=>{t.setProgress(.6),t.setStatu(3),g(i,u(i),{marketId:e}).then(k(t))})).catch((()=>{t.setError(2,i)}))}else t.setError(1,e)}return o.checkIDB()||t.setError(0,c[0]),window.addon_&&t.setError(0,c[1]),r?i():T().then(i),t}function x(e){var t=new w;if(o.checkIDB()||t.setError(0,c[0]),!window.addon_)return t.setProgress(.1),t.setStatu(2),d(e,(e=>{t.setProgress(.1+.5*e)})).catch((()=>{t.setError(2,e)})).then((i=>{t.setProgress(.6);var n=u(i);n.error?t.setError(3,n.msg):(t.setStatu(3),t.wait({meta:n,msg:c[2]},(s=>{s?g(i,n,{url:e}).then(k(t)):t.setError(4,"")})))})),t;t.setError(0,c[1])}async function L(e){var t,n=h.get(e),s=document.createElement("script");"dev"==n.type?await new Promise(((e,s)=>{a.requestByExt({url:n.url+"index.js",method:"get",responseType:"text",then(i){t=i.data,e()},catch(){i("开发端口出错"),s()}})})):t=await new Promise((t=>y.get(e,!0,t))),s.innerHTML=`(()=>{\nfunction Session(id){this.id="ext_"+id;this.session_token="Hvm_session_token_eoi1j2j";this.isSession=true}\nvar addonData={session:new Session('${e}'),uninstall(fn){quik.addon._doonun(this.session,fn)}};\n(function(){${t}})();})()`,document.body.appendChild(s)}async function T(){return r||(r=await(await fetch("/addon_market/list.json")).json())}function S(){return h.list()}if(w.prototype={setProgress(e){this.progress=e,this.ev.doevent("progress",[e])},setStatu(e){this.statuCode=e,this.statuMsg=f[e],this.ev.doevent("statu",[{code:e,msg:f[e]}])},setError(e,t){this.errorCode=e,this.errorMsg=b[e]+" "+t,this.ev.doevent("error",[{code:e,msg:b[e]+" "+t}])},setDone(e){this.result=e,this.ev.doevent("done",[e])},wait(e,t){this.waiting=!0;var i=this;this.ev.doevent("wait",[function(n){i.waiting=!1,t(n),i._waitfn=t,i._waitd=e},e]),this._waitfn=t,this._waitd=e}},!window.addon_){var _=[];S().forEach((e=>{h.get(e).disabled||_.push(L(e))}));try{Promise.all(_).then((()=>{setTimeout((()=>{l.doevent("allrun",[])}),100)}))}catch(e){}}var I={};t.exports={enable:function(e){var t=h.get(e);t.disabled=!1,h.set(e,t)},disable:function(e){var t=h.get(e);t.disabled=!0,h.set(e,t)},loadMarketData:T,installByOfficialMarket:q,installByUrl:x,installByLocal:function(e,t){if(t=new w,o.checkIDB()||t.setError(0,c[0]),!window.addon_){t.setProgress(.1),t.setStatu(1);var i=u(e);return i.error?t.setError(3,i.msg):(t.setProgress(.5),t.setStatu(3),t.wait({meta:i,msg:c[2]},(n=>{n?g(e,i,{local:!0}).then(k(t)):t.setError(4,"")}))),t}t.setError(0,c[1])},installByDev:function(e){if(window.isExt){if(!window.addon_){var t=a.getRandomHashCache();return h.set(t,{name:"DEVPORT:"+e,url:e,type:"dev"}),l.doevent("installnew",{id:t}),L(t),t}p.setError(0,c[1])}else i("请在浏览器扩展中安装开发端口")},uninstall:async function(e){var t=h.get(e);return!!t&&(h.remove(e),"dev"!=t.type&&await new Promise((t=>{y.remove(e,!0,t)})),l.doevent("uninstall",{id:e,marketId:t.marketId}),I[e]&&I[e](),!0)},runAddon:L,checkUpdate:async function(e){var t=h.get(e);if(!t)throw"not found addon";if(t.type)return!1;var i=t.update;if(!i)return!1;var n,s,o=await fetch((n=t.marketId?(await T())[t.marketId].url:t.url,s=i,n.substring(0,n.lastIndexOf("/"))+"/"+s));return o=await o.text(),(o=parseInt(o))>t.version_code},update:async function(e){var t=h.get(e);if(!t)return{error:!0,msg:"未找到插件"};if(t.url||t.marketId){t.marketId&&(t.url=(await T())[t.marketId].url);try{var i=await d(t.url)}catch(e){return{error:!0,msg:"代码请求失败",code:e}}var n=u(i);if(n.error)return{error:!0,msg:"META 解析失败:"+n.msg};if(n.signature!=t.signature)return{error:!0,msg:"签名校验失败"};if(n.version_code>=t.version_code){for(var s in n)t[s]=n[s];return await new Promise((t=>{y.set(e,i,!0,t)})),h.set(e,t),l.doevent("update",{id:e}),{ok:1,id:e,version_code:n.version_code}}return{error:!0,msg:"版本校验失败"}}return{error:!0,msg:"无法升级此插件"}},checkMarket:async function(e){for(var t in r||await T(),r)if(r[t].url==e){var i=JSON.parse(JSON.stringify(r[t]));return i.id=t,i}return!1},getAddonByUrl:v,getAddonBySessionId:m,getAddonById:m,getAddonByMarketId:function(e){var t=h.getAll();for(var i in t)if(t[i].marketId==e)return t[i]},getAddonList:S,getEnable:function(e){return!h.get(e).disabled},_doonun(e,t){a.checkSession(e)&&"function"==typeof t&&(I[e.id]=t)},on:l.on,off:l.off}},45:function(e,t){const{alert:i,confirm:n}=e(8),s=e(46),{xraddon:o}=e(48);t.exports=function(e){return e.upinstallByOfficialMarket=t=>new Promise(((n,o)=>{if(e.getAddonByMarketId(t))o({code:-3,msg:"插件已安装"});else{var a=new s;a.show(),e.loadMarketData().then((s=>{s[t]?a.ask("要安装插件 “"+s[t].name+"” 吗？（该插件来自官方商店）",(s=>{if(s){var r=e.installByOfficialMarket(t);a.bind(r),r.on("done",(e=>{i("安装成功"),n({code:0,result:e})})),r.on("error",(e=>{o({code:-2,msg:"安装错误",err:e})}))}else o({code:-1,msg:"用户取消"})}),{img:s[t].icon,name:s[t].name,version:s[t].version}):o({code:-2,msg:"插件ID不存在"})}))}})),e.upinstallByUrl=t=>new Promise(((n,o)=>{if(e.getAddonByUrl(t))o({code:-3,msg:"插件已安装"});else{var a=new s;a.show(),a.ask("要安装来自 "+t+" 的插件吗？",(s=>{if(s){var r=e.installByUrl(t);a.bind(r),r.on("done",(e=>{i("安装成功"),n({code:0,result:e})})),r.on("error",(e=>{o({code:-2,msg:"安装错误",err:e})}))}else o({code:-1,msg:"用户取消"}),a.hide(),setTimeout((()=>{a.destroy()}),200)}))}})),e.upuninstall=function(t){return new Promise(((s,o)=>{e.getAddonBySessionId(t)?n("要卸载 "+e.getAddonBySessionId(t).name+" 吗？",(n=>{n?e.uninstall(t).then((e=>{e.error?(i("卸载出现错误："+e.msg),o({code:-3,msg:"卸载出现错误",err:e})):(i("卸载成功，刷新生效"),s({code:0,result:e}))})):o({code:-2,msg:"用户取消"})})):o({code:-1,msg:"没有该插件"})}))},e.upupdate=t=>new Promise(((s,a)=>{e.getAddonBySessionId(t)?n("要更新 "+e.getAddonBySessionId(t).name+" 吗？",(n=>{n?e.update(t).then((e=>{e.error?(i("更新出现错误："+e.msg),a({code:-3,msg:"更新出现错误",err:e})):(i("更新成功，刷新生效"),s({code:0,result:e}),o(t))})):a({code:-2,msg:"用户取消"})})):a({code:-1,msg:"没有该插件"})})),e}},46:function(e,t){const i=e(9),n=e(4);var s=window.isExt?"chrome-extension://"+window.extid+"/assets/def_addon.png":"./assets/def_addon.png";function o(){var t=new i({content:e(47).replace("{deficon}",s),class:"addon_install_ui",clickOtherToClose:!1});this._d=t;var o=this._d.getDialogDom();n.query(o,".btns").style.display="none"}o.prototype={bind(e){var t=this,i=this._d.getDialogDom();if(n.query(i,".msg").innerText=e.statuMsg+"...",n.query(i,".progress .r").style.width=100*e.progress+"%",-1!=e.errorCode&&(n.query(i,".msg").innerText=e.errorMsg,n.query(i,".progress").className="progress error",n.query(i,".btns").style.display="block",n.query(i,".btn.l").onclick=n.query(i,".btn.r").onclick=()=>{t.hide(),setTimeout((()=>{t.destroy()}),200)}),e.waiting){var s=e._waitfn,o=e._waitd;o.meta&&(n.query(i,".sth img").src=o.meta.icon,n.query(i,".sth .name").innerText=o.meta.name,n.query(i,".sth .version").innerText="版本："+o.meta.version),n.query(i,".msg").innerText=o.msg,n.query(i,".btns").style.display="block",n.query(i,".btn.l").onclick=()=>{s(!1)},n.query(i,".btn.r").onclick=()=>{s(!0)}}e.on("status",(function(e){n.query(i,".msg").innerText=e.msg})),e.on("progress",(function(e){n.query(i,".progress .r").style.width=100*e+"%"})),e.on("error",(function(e){n.query(i,".msg").innerText=e.msg,n.query(i,".progress").className="progress error",n.query(i,".btns").style.display="block",n.query(i,".btn.l").onclick=n.query(i,".btn.r").onclick=()=>{t.hide(),setTimeout((()=>{t.destroy()}),200)}})),e.on("wait",(function(e,t){t.meta&&(n.query(i,".sth img").src=t.meta.icon,n.query(i,".sth .name").innerText=t.meta.name,n.query(i,".sth .version").innerText="版本："+t.meta.version),n.query(i,".msg").innerText=t.msg,n.query(i,".btns").style.display="block",n.query(i,".btn.l").onclick=()=>{e(!1)},n.query(i,".btn.r").onclick=()=>{e(!0)}})),e.on("done",(function(){t.hide(),setTimeout((()=>{t.destroy()}),200)}))},ask(e,t,i={}){var s=this._d.getDialogDom();n.query(s,".sth img").src=i.img||"assets/def_addon.png",n.query(s,".sth .name").innerText=i.name||"-",n.query(s,".sth .version").innerText="版本："+i.version||"-",n.query(s,".msg").innerText=e,n.query(s,".btns").style.display="block",n.query(s,".btn.l").onclick=()=>{t(!1),n.query(s,".btns").style.display="none"},n.query(s,".btn.r").onclick=()=>{t(!0),n.query(s,".btns").style.display="none"}},show(){this._d.open()},hide(){this._d.close()},destroy(){this._d.destroy()}},t.exports=o},47:function(e,t){t.exports='<div class="ma"><div class="sth"><img src="{deficon}" alt="图标"><p class="name">...</p><p class="version">版本：...</p></div><div class="progress"><div class="r"></div></div><div class="msg"></div><div class="btns"><div class="btn l">取消</div><div class="btn r">确定</div></div></div>'},48:function(e,t){const i=e(4),{addon_dialog_d:n}=e(49),s=e(44),{confirm:o,alert:a}=e(8);var r=window.isExt?"chrome-extension://"+window.extid+"/assets/def_addon.png":"./assets/def_addon.png",l=i.query(n,".content .p.gl ul");function c(t){var n=s.getAddonBySessionId(t);"dev"==n.type&&(n.name="开发者端口："+n.url,n.author="dev",n.desc="开发者端口："+n.url);var d=i.query(l,'li[data-id="'+t+'"]');d||((d=i.element("li")).innerHTML=e(51).replace(/{deficon}/g,r),d.dataset.id=t,l.appendChild(d),d.onclick=function(e){l.querySelectorAll("li").forEach((e=>{e.classList.remove("active")})),this.classList.add("active")},i.query(d,".ch_update").onclick=function(){g.innerHTML="检查更新中...";var e=this;e.style.display="",s.checkUpdate(t).then((t=>{t?(g.innerHTML="发现新版本",i.query(d,".update").style.display="block"):(e.style.display="block",g.innerHTML="已是最新版本")}))},i.query(d,".update").onclick=function(){g.innerHTML="更新中...";var e=this;e.style.display="",s.update(t).then((n=>{n.error?(g.innerHTML="更新失败:"+n.msg,e.style.display="block"):(c(t),g.innerHTML="更新完成，刷新生效",i.query(d,".ch_update").style.display="inline-block")}))},i.query(d,".enable").onclick=function(){g.innerHTML="已启用，刷新生效",s.enable(t),i.query(d,".disable").style.display="block",i.query(d,".disabled_state").style.display="none",this.style.display=""},i.query(d,".disable").onclick=function(){g.innerHTML="已禁用，刷新生效",s.disable(t),i.query(d,".enable").style.display="block",i.query(d,".disabled_state").style.display="",this.style.display=""},i.query(d,".uninstall").onclick=function(){o("你真的要卸载吗？此操作不可恢复！",(function(e){e&&(g.innerHTML="正在卸载...",s.uninstall(t).then((e=>{e.error?a("卸载出现错误："+e.msg):a("卸载成功，刷新生效")})))}))}),i.query(d,".n>img").src=n.icon||r,i.query(d,".n .ds .name span").innerText=n.name;var u=i.query(d,".n .ds .message span",!0);u[0].innerText=n.author||"不详",u[1].innerText=n.version||"",u[2].innerText="",i.query(d,".d .desc").innerText=n.desc||"",i.query(d,".d .website").innerText=n.website||"";var g=i.query(d,".message span",!0)[2];n.type||(i.query(d,".ch_update").style.display="block"),n.disabled?(i.query(d,".enable").style.display="block",i.query(d,".disabled_state").style.display=""):(i.query(d,".disable").style.display="block",i.query(d,".disabled_state").style.display="none"),n.marketId?i.query(d,".official_state").style.display="":i.query(d,".official_state").style.display="none"}s.getAddonList().forEach((e=>{c(e)})),s.on("installnew",(e=>{c(e.id)})),s.on("update",(e=>{c(e.id)})),s.on("uninstall",(e=>{var t=i.query(l,'li[data-id="'+e.id+'"]');t&&t.remove()})),t.exports={xraddon:c}},49:function(e,t){const i=e(9),n=e(4);var s=new i({content:e(50).replace("{{close-btn}}",n.getGoogleIcon("e5cd")).replace("{{search}}",n.getGoogleIcon("e8b6")).replace("{{add-btn}}",n.getGoogleIcon("e145")),mobileShowtype:i.SHOW_TYPE_FULLSCREEN,class:"addon-dialog"}),o=s.getDialogDom();n.query(o,".closeBtn").addEventListener("click",(()=>{s.close()})),t.exports={addon_dialog:s,addon_dialog_d:o}},50:function(e,t){t.exports='<div class="addon-bar"><div class="l"><div class="item active" data-p="0">插件管理</div><div class="item" data-p="1">插件市场</div></div><div class="r"><div class="add-btn">{{add-btn}}</div><div class="closeBtn">{{close-btn}}</div></div></div><div class="content"><div class="p gl" style="display:block"><ul></ul></div><div class="p ma"><div class="addon-search-box"><input type="text" placeholder="搜索插件"> <button>{{search}}</button></div><ul><div class="loading-p"><div class="g"></div></div></ul></div></div>'},51:function(e,t){t.exports='<div class="n"><img src="{deficon}" alt="" onerror="this.src=\'{deficon}\'"><div class="ds"><div class="name"><span></span><div class="official_state">官方</div><div class="disabled_state">已禁用</div></div><div class="message"><span></span> <span></span> <span></span></div></div></div><div class="d"><div class="desc"></div><div class="website"></div><div class="controls"><div class="btn ch_update">检查更新</div><div class="btn update">更新</div><div class="btn enable">启用</div><div class="btn disable">禁用</div><div class="btn uninstall" style="display:block">卸载</div></div></div>'},52:function(e,t){const{prompt:i,alert:n}=e(8),s=e(10),o=e(4),a=e(44),{showOpenFilePicker:r}=e(1),{addon_dialog_d:l}=e(49),c=e(46);var d=new s({list:[{icon:o.getGoogleIcon("e157"),title:"从第三方链接添加插件",click(){i("请输入插件链接",(e=>{if(!e)return!1;var t=a.installByUrl(e),i=new c;return i.show(),i.bind(t),t.on("done",(e=>{n("安装成功")})),!0}))}},{icon:o.getGoogleIcon("e66d"),title:"从第三方文件添加插件",click(){r().then((e=>{var t=e[0],i=(t.name,new FileReader),s=new c;s.show(),i.onload=function(){var e=a.installByLocal(i.result);s.bind(e),e.ondone=e=>{installing_notice.destroy(),n("安装成功")}},i.readAsText(t)}))}},{icon:o.getGoogleIcon("e86f"),title:"添加开发者端口",click(){window.isExt?i("请输入开发者端口链接",(e=>{if(!e)return!1;a.installByDev(e),n("安装成功")})):n("请在浏览器扩展中安装开发端口")}}],offset:{top:0,left:0}});o.query(l,".add-btn").addEventListener("click",(function(e){e.stopPropagation();var t=this.getBoundingClientRect();d.setOffset({top:t.top+t.height,right:window.innerWidth-t.left-t.width}),d.show()}));var u=o.query(l,".addon-bar .l .item",!0),g=o.query(l,".content .p",!0);u.forEach((e=>{e.onclick=function(){u.forEach((e=>{e.classList.remove("active")})),this.classList.add("active"),g.forEach((e=>{e.style.display=""})),g[this.dataset.p].style.display="block"}}))},53:function(e,t){const i=e(5),n=e(4),{addon_dialog_d:s}=e(49),o=e(44);var a=window.isExt?"chrome-extension://"+window.extid+"/assets/def_addon.png":"./assets/def_addon.png",r=n.query(s,".content .p.ma ul"),l=!1;function c(){o.loadMarketData().then((e=>{for(var t in r.querySelector(".loading-p").remove(),e)d(e[t],t)})).catch((e=>{r.innerHTML='<p>加载失败，点击<a href="javascript:;">重试</a></p>',n.query(r,"a").onclick=()=>{r.innerHTML='<div class="loading-p"><div class="g"></div></div>',c()}}))}function d(t,s){var l=n.element("li");l.innerHTML=e(54).replace(/{deficon}/g,a),l.dataset.id=s,l.onclick=()=>{r.querySelectorAll("li").forEach((e=>{e.classList.remove("active")})),l.classList.add("active")},n.query(l,".n>img").src=t.icon||a,n.query(l,".n .ds .name span").innerText=t.name;var c=n.query(l,".n .ds .message span",!0);c[0].innerText=t.author||"不详",c[1].innerText=t.version||"",c[2].innerText="",n.query(l,".d .desc").innerText=t.desc||"",n.query(l,".d .website").innerText=t.website||"",r.appendChild(l);var d=o.getAddonByMarketId(s);d&&(n.query(l,".btn.install").style.display="",d.version_code<t.version_code?n.query(l,".btn.update").style.display="block":n.query(l,".btn.installed").style.display="block"),n.query(l,".btn.install").addEventListener("click",(function(){this.style.display="",c[2].innerText="正在安装...(0%)";var e=o.installByOfficialMarket(s);e.on("progress",(function(e){c[2].innerText="正在安装...("+parseInt(100*e)+"%)"})),e.on("done",(function(){c[2].innerText="安装完成",n.query(l,".btn.installed").style.display="block",i.show("插件 “"+t.name+"” 安装完成")})),e.on("error",(function(e){c[2].innerText="安装出错（"+e.msg+"）",n.query(l,".btn.install").style.display="block",i.show("插件 “"+t.name+"” 安装出错（"+e.msg+"）")}))})),n.query(l,".btn.update").addEventListener("click",(function(){this.style.display="",c[2].innerText="正在更新...",o.update(d.id).then((()=>{c[2].innerText="更新完成",n.query(l,".btn.installed").style.display="block",i.show("插件 “"+t.name+"” 更新完成")}))}))}n.query(s,'.l .item[data-p="1"]').addEventListener("click",(function(){l||(l=!0,c())})),o.on("uninstall",(function(e){if(e.marketId){var t=n.query(r,'li[data-id="'+e.marketId+'"]');t&&(n.query(t,".btn.install").style.display="block",n.query(t,".btn.installed").style.display="")}}));var u=n.query(s,".addon-search-box");function g(e){n.query(r,"li",!0).forEach((t=>{-1==n.query(t,".name span").innerText.indexOf(e)?t.style.display="none":t.style.display=""}))}n.query(u,"input").addEventListener("keydown",(function(e){"Enter"==e.key&&this.value.trim()&&g(this.value.trim())})),n.query(u,"input").addEventListener("input",(function(){this.value.trim()||n.query(r,"li",!0).forEach((e=>{e.style.display=""}))})),n.query(u,"button").addEventListener("click",(function(e){n.query(u,"input").value.trim()&&g(this.value.trim())}))},54:function(e,t){t.exports='<div class="n"><img src="{deficon}" alt="" onerror="this.src=\'{deficon}\'"><div class="ds"><div class="name"><span></span><div class="official_state">官方</div></div><div class="message"><span></span> <span></span> <span></span></div></div></div><div class="d"><div class="desc"></div><div class="website"></div><div class="controls"><div class="btn installed">已安装</div><div class="btn update">更新</div><div class="btn install" style="display:block">安装</div></div></div>'},55:function(e,t){const i=e(9),{initsto:n}=e(20),s=e(4),{refsay:o,getNowSay:a}=e(42);n.get("usersay")||n.set("usersay","海内存知己，天涯若比邻");var r=null;function l(){if(!r){var e=(r=new i({class:"sayseditordialog",content:'<h1>修改一言</h1><div class="content"><p><input class="says-input" type="text"/></p></div><div class="footer"><div class="cancel btn">取消</div><button class="ok btn">确定</button></div>'})).getDialogDom();s.query(e,".cancel.btn").onclick=()=>{r.close()},s.query(e,".ok.btn").onclick=()=>{var t=s.query(e,".says-input").value;n.set("usersay",t),o("user"),r.close()}}setTimeout((()=>{var e=r.getDialogDom();r.open(),s.query(e,".says-input").value=n.get("usersay")}))}t.exports={key:"user",name:"用户自定义",callback:()=>new Promise(((e,t)=>{e({say:n.get("usersay"),title:"点击修改"})})),click(){l()},menu:[{icon:s.getGoogleIcon("e3c9"),title:"修改",click(){l()}},{icon:s.getGoogleIcon("e14d"),title:"复制",click(){var e=a().say;s.copyText(e)}}]}},56:function(e,t){const i=e(4),{openSayDetailsDialog:n,refsay:s,getNowSay:o}=e(42);var a={load(e){var t=0;!function n(){i.xhr("https://v1.hitokoto.cn/",(t=>{e(JSON.parse(t))}),(()=>{++t<=5&&n()}))}()},cats:{a:"动画",b:"漫画",c:"游戏",d:"文学",e:"原创",f:"来自网络",g:"其他",h:"影视",i:"诗词",j:"网易云",k:"哲学",l:"抖机灵"}};t.exports={key:"hitokoto",name:"随机一言",callback:()=>new Promise(((e,t)=>{a.load((t=>{e({say:t.hitokoto,from:t.from,uuid:t.uuid,cat:t.type,from_who:t.from_who,title:"该一言来自"+t.from+"，由"+t.from_who+"上传"})}))})),click(){s("hitokoto")},menu:[{icon:i.getGoogleIcon("e5d5"),title:"刷新",click(){s("hitokoto")}},{icon:i.getGoogleIcon("e14d"),title:"复制",click(){var e=o().say;i.copyText(e)}},{icon:i.getGoogleIcon("e88e"),title:"一言详情",click(){var e=o(),t=a.cats[e.cat];n({API:"Hitokoto (hitokoto.cn)","内容":e.say,"来源":e.from,"上传者":e.from_who,"分类":t||"未知",UUID:e.uuid})}}]}},57:function(e,t){const{storage:i}=e(7),n=e(4),{refsay:s,openSayDetailsDialog:o,getNowSay:a}=e(42);var r=i("jrsc"),l={},c="jinrishici-token";function d(e,t){var i=new XMLHttpRequest;i.open("get",t),i.withCredentials=!1,i.send(),i.onreadystatechange=()=>{if(4===i.readyState){var t=JSON.parse(i.responseText);"success"===t.status&&e(t)}}}l.load=e=>{var t=r.get(c);return t?d(e,"https://v2.jinrishici.com/one.json?client=browser-sdk/1.2&X-User-Token="+encodeURIComponent(t)):d((t=>{r.set(c,t.token),e(t)}),"https://v2.jinrishici.com/one.json?client=browser-sdk/1.2")},t.exports={key:"jinrishici",name:"今日诗词",callback:()=>new Promise(((e,t)=>{l.load((t=>{e({say:t.data.content,author:"("+t.data.origin.dynasty+")"+t.data.origin.author,p_title:"《"+t.data.origin.title+"》",tags:t.data.matchTags.join(" "),content:"<br>"+t.data.origin.content.join("<br>"),title:"摘自"+t.data.origin.dynasty+"·"+t.data.origin.author+"的《"+t.data.origin.title+"》"})}))})),click(){s("jinrishici")},menu:[{icon:n.getGoogleIcon("e5d5"),title:"刷新",click(){s("jinrishici")}},{icon:n.getGoogleIcon("e14d"),title:"复制",click(){var e=a().say;n.copyText(e)}},{icon:n.getGoogleIcon("e88e"),title:"诗词详情",click(){var e=a();o({API:"今日诗词（jinrishici.com）","内容":e.say,"作者":e.author,"标题":e.p_title,"全部内容":e.content})}}]}},58:function(e,t){const i=e(4);var n=i.query(document,".cards"),s=i.query(document,".top.cards"),o=function(e){this.width=e.width,this.height=e.height,this.offset=e.offset;var t=i.element("div",{class:"card"});t.innerHTML=e.content,t.style.width=e.width+"px",t.style.height=e.height+"px",e.class&&t.classList.add(e.class),e.offset&&("number"==typeof e.offset.top?t.style.top=e.offset.top+"px":"number"==typeof e.offset.bottom&&(t.style.bottom=e.offset.bottom+"px"),"number"==typeof e.offset.left?t.style.left=e.offset.left+"px":"number"==typeof e.offset.right&&(t.style.right=e.offset.right+"px")),this.el=t,e.topper?s.appendChild(t):n.appendChild(t),this.isShow=!1};o.prototype={show(e){var t=this;t.isShow=!0,this.el.style.display="block",e&&e>0&&(this.el.style.transition="all "+e+"ms",this.el.offsetHeight,setTimeout((()=>{t.el.style.transition="none"}),e)),this.el.style.opacity="1"},hide(e){var t=this;t.isShow=!1,e&&e>0?(this.el.style.transition="all "+e+"ms",setTimeout((()=>{t.el.style.transition="none",t.el.style.display="none"}),e)):this.el.style.display="none",this.el.style.opacity="0"},destroy(){this.el.remove()},getCardDom(){return this.el},getOffset(){return this.offset},getWidth(){return this.width},getHeight(){return this.height},setWidth(e){this.width=e,this.el.style.width=e+"px"},setHeight(e){this.el.style.height=e+"px"},setOffset(e,t){var i=this,n=this.offset;if(t&&t>0){this.el.style.transition="all "+t+"ms";var s=this.el.getBoundingClientRect();"number"==typeof e.top?"number"==typeof n.bottom?this.el.style.bottom=window.innerHeight-e.top-s.height+"px":this.el.style.top=e.top+"px":"number"==typeof e.bottom&&("number"==typeof n.top?this.el.style.top=window.innerHeight-e.bottom-s.height+"px":this.el.style.bottom=e.bottom+"px"),"number"==typeof e.left?"number"==typeof n.right?this.el.style.right=window.innerWidth-e.left-s.width+"px":this.el.style.left=e.left+"px":"number"==typeof e.right&&("number"==typeof n.left?this.el.style.left=window.innerWidth-e.right-s.width+"px":this.el.style.right=e.right+"px"),setTimeout((()=>{i.el.style.transition="none",o.call(i)}),t)}else o.call(i);function o(){this.offset=e,this.el.style.top="auto",this.el.style.left="auto",this.el.style.bottom="auto",this.el.style.right="auto","number"==typeof e.top?this.el.style.top=e.top+"px":"number"==typeof e.bottom&&(this.el.style.bottom=e.bottom+"px"),"number"==typeof e.left?this.el.style.left=e.left+"px":"number"==typeof e.right&&(this.el.style.right=e.right+"px")}}},t.exports=o},59:function(e,t){const i=e(58),n=e(4);t.exports={create(e,t,s){if(0!=e.length){var o=new i({content:'<div class="guide-text"></div><div class="btn ok">确定</div>',class:"guide-card",offset:{top:0,left:0},width:200,topper:s}),a=o.getCardDom(),r=0;l(),n.query(a,".btn.ok").addEventListener("click",(()=>{++r>=e.length?(o.hide(300),t()):l()}))}else t();function l(){n.query(a,".guide-text").innerHTML=e[r].text,o.isShow?o.setOffset(e[r].offset,300):(o.setOffset(e[r].offset),o.show(300))}}}},60:function(e,t){const i=e(4);var n=i.element("div",{class:"fcard-frame"}),s=!1;n.addEventListener("click",(()=>{s=!0})),document.querySelector("main").append(n);var o=0,a=[];function r(e){this.content=e.content,o++,this.id=o;var t=i.element("div",{class:"fcard"+(e.class?" "+e.class:"")});t.innerHTML='<div class="content">'+this.content+"<div>",n.insertBefore(t,n.firstChild),this.el=t,a.push(this),this.isShow=!0,c.style.display=""}function l(){for(var e=0;e<a.length;e++)if(a[e].isShow)return!1;return!0}r.prototype={show(){this.el.style.display="block",this.isShow=!0,c.style.display=""},hide(){this.el.style.display="none",this.isShow=!1,l()&&(c.style.display="none")},getFCardDom(){return this.el},destroy(){this.el.remove(),this.el=null,a.splice(a.indexOf(this),1),l()&&(c.style.display="none")}},r.getFCardById=e=>{for(var t=0;t<a.length;t++)if(a[t].id==e)return a[t];return null};var c=i.element("div",{class:"fcard-mob-zd"});c.innerHTML=i.getGoogleIcon("e5cc"),c.style.display="none",document.querySelector("main").append(c),c.onclick=function(e){s=!0,n.classList.add("show"),this.classList.add("hide")},document.addEventListener("click",(()=>{s?s=!1:(n.classList.remove("show"),c.classList.remove("hide"))})),t.exports=r},61:function(e,t){var i=e(62),n=e(63),s=e(65),o=e(66),a=e(67),r=e(64);t.exports={setLite:i.set,isLite:i.get,getColor:s.getTheme,setColor:s.setTheme,setTheme:o.setTheme,addTheme:o.addTheme,removeTheme:o.removeTheme,isTimeLogo:()=>"b"==n.get(),setTimeLogo(){n.set("b")},getLogo:n.get,setLogo:n.set,isDialogBlur:a.get,setDialogBlur:a.set,on:r.on,off:r.off,waitdotheme:o.waitdotheme}},62:function(e,t){const i=e(59),n=e(26),{initsto:s}=e(20),{SettingItem:o,tyGroup:a}=e(12),r=e(4);r.initSet(s,"linkblur",!0);var l=new o({index:2,title:"极简模式",message:"(Alt+X)隐藏所有图标和链接，点击LOGO显示",type:"boolean",get:()=>!!s.get("lite"),callback(e){s.set("lite",e),u(e)}}),c=new o({index:3,title:"链接页面背景模糊",message:"链接页面背景一般模糊显示，关闭后正常显示",type:"boolean",get:()=>s.get("linkblur"),callback(e){s.set("linkblur",e),g(e)}});a.addNewItem(l),a.addNewItem(c);var d=r.element("div",{class:"liteback"});function u(e){if(document.body.classList.remove("hiden"),document.body.classList.remove("showall"),e){if(document.body.classList.add("lite"),document.body.classList.add("hiden"),c.show(),!s.get("lite_firsted")){var t=document.querySelector("main .logo .imglogo").getBoundingClientRect();i.create([{text:"点击LOGO就可以显示链接和所有图标",offset:window.innerWidth>600?{top:t.top,left:t.left+t.width+10}:{top:t.top+t.height+10,left:t.left}}],(function(){s.set("lite_firsted",!0)}))}}else document.body.classList.remove("lite"),n.cateWidthShiPei(),c.hide()}function g(e){e?document.querySelector("main").classList.remove("noblur"):document.querySelector("main").classList.add("noblur")}d.innerHTML=r.getGoogleIcon("e5ce"),document.querySelector("main .center").appendChild(d),d.addEventListener("click",(()=>{document.body.classList.remove("showall"),document.body.classList.add("hiden")})),document.querySelector("main .center .logo").addEventListener("click",(()=>{document.body.classList.add("showall"),document.body.classList.remove("hiden"),n.cateWidthShiPei()})),u(s.get("lite")),g(s.get("linkblur")),t.exports={set(e){e=!!e,s.set("lite",e),u(e),l.reGet()},get:()=>s.get("lite")}},63:function(e,t){const{SettingItem:i,tyGroup:n}=e(12),s=e(4),{initsto:o}=e(64);var a=document.querySelector("main .center .logo");o.get("timelogo")?(o.set("logo","b"),o.remove("timelogo")):o.get("logo")||o.set("logo","a");var r=new i({index:4,title:"LOGO样式",message:"切换LOGO显示的内容",type:"select",init:()=>({a:"普通LOGO",b:"LED时间",c:"空"}),get:()=>o.get("logo"),callback(e){o.set("logo",e),h(e)}}),l=new i({index:5,title:"显示日期",message:"开启后时间LOGO下方将显示日期",type:"boolean",get:()=>!!o.get("timelogo_x"),callback(e){o.set("timelogo_x",e),g(e)}});function c(){for(var e="",t=0;t<7;t++)e+='<div class="num_line a'+t+'"></div>';return'<div class="_num">'+e+"</div>"}function d(e,t){for(var i={0:"1110111",1:"0010010",2:"1011101",3:"1011011",4:"0111010",5:"1101011",6:"1101111",7:"1010010",8:"1111111",9:"1111011"}[t],n=0;n<7;n++){var o=s.query(e,".a"+n);"1"==i[n]?o.classList.add("show"):o.classList.remove("show")}}s.query(a,".timelogo .h").innerHTML=s.query(a,".timelogo .m").innerHTML=c()+c();var u=!1;function g(e){u&&(e?s.query(a,".timelogo").classList.add("showxx"):s.query(a,".timelogo").classList.remove("showxx"))}function h(e){s.query(a,".timelogo").style.display="none",s.query(a,".imglogo").style.display="none",l.hide(),"a"==e?s.query(a,".imglogo").style.display="block":"b"==e&&(s.query(a,".timelogo").style.display="block",function(){if(!u){u=!0;var e=()=>{var e=new Date,t=s.b0(e.getHours()).toString(),i=s.b0(e.getMinutes()).toString(),n=s.query(a,".timelogo .h ._num",!0),o=s.query(a,".timelogo .m ._num",!0);d(n[0],t[0]),"1"==t[0]?s.query(a,".timelogo .t").style.marginLeft="-13px":s.query(a,".timelogo .t").style.marginLeft="",d(n[1],t[1]),d(o[0],i[0]),d(o[1],i[1])};setInterval(e,1e3),e();var t=s.element("div",{class:"xxxx"});s.query(a,".timelogo").append(t);var i=new Date;t.innerHTML=i.getFullYear()+" 年 "+(i.getMonth()+1)+" 月 "+i.getDate()+" 日 星期"+"日一二三四五六"[i.getDay()],g(o.get("timelogo_x"))}}(),l.show())}h(o.get("logo")),n.addNewItem(r),n.addNewItem(l),"b"!=o.get("logo")&&l.hide(),t.exports={set(e){o.set("logo",e),h(e),r.reGet()},get:()=>o.get("logo")}},64:function(e,t){const i=e(3),{settingSto:n}=e(12);var s=n,o=i(),a=o.on,r=o.off,l=o.doevent;t.exports={initsto:s,on:a,off:r,doevent:l}},65:function(e,t){const{SettingItem:i,tyGroup:n}=e(12),{on:s,off:o,initsto:a,doevent:r}=e(64);var l=null;a.get("theme")||a.set("theme","a");var c=new i({index:1,title:"主题颜色",type:"select",message:"",get:()=>a.get("theme"),callback(e){a.set("theme",e),u(e)},init:()=>({a:"浅色",b:"深色",c:"跟随时间",d:"跟随系统"})});n.addNewItem(c);var d=3;function u(e){var t;3!=d&&(d=!1),"b"==e?(document.body.classList.add("dark"),r("colorchange",["dark"]),l="dark"):"a"==e?(document.body.classList.remove("dark"),r("colorchange",["light"]),l="light"):"c"==e?(new Date).getHours()>=18||(new Date).getHours()<6?(document.body.classList.add("dark"),r("colorchange",["dark"]),l="dark"):(document.body.classList.remove("dark"),r("colorchange",["light"]),l="light"):"d"==e&&(window.matchMedia?3==d?(d=!0,(t=window.matchMedia("(prefers-color-scheme: dark)")).matches?document.body.classList.add("dark"):document.body.classList.remove("dark"),t.addEventListener("change",(e=>{e.matches?(document.body.classList.add("dark"),r("colorchange",["dark"]),l="dark"):(document.body.classList.remove("dark"),r("colorchange",["light"]),l="light")}))):d=!0:toast("你的浏览器不支持此功能"))}u(a.get("theme")),t.exports={setTheme(e){a.set("theme",e),u(e),c.reGet()},on:s,off:o,getTheme:function(){return l}}},66:function(e,t){const{alert:i}=e(8),{SettingItem:n,tyGroup:s}=e(12),{initsto:o,doevent:a}=e(64),r=e(43);o.get("themea")||o.set("themea","def");var l=["dark","t-dark","t-light","dialogblur","lite","hiden","showall"],c={def:"默认主题"},d=new n({index:0,title:"主题",type:"select",message:"",get:()=>o.get("themea"),callback(e){o.set("themea",e),u(e)},init:()=>c});function u(e){if(-1==l.indexOf(e)&&c[e])return document.body.classList.forEach((e=>{-1==l.indexOf(e)&&document.body.classList.remove(e)})),document.body.classList.add(e),a("dotheme",[]),g||(g=!0,h.forEach((e=>e()))),!0}s.addNewItem(d);var g=!1,h=[];var p=!1;u(o.get("themea"))||(p=!0,r.on("allrun",(()=>{p&&(o.set("themea","def"),u("def"),i("您的主题由于插件缺失无法显示，已为您切换为默认。"))}))),t.exports={addTheme:function(e,t){c[e]=t,d.reInit(),p&&e==o.get("themea")&&(p=!1,u(e))},removeTheme:function(e){"def"!=e&&(delete c[e],o.get("themea")==e&&(o.set("themea","def"),d.reGet()),d.reInit())},setTheme:function(e){c[e]&&(o.set("themea",e),u(e),d.reGet())},waitdotheme:function(e){g?e():h.push(e)}}},67:function(e,t){const{SettingItem:i,tyGroup:n}=e(12),{initsto:s}=e(64);var o=new i({index:3,title:"毛玻璃效果",message:"为所有内容开启毛玻璃效果，可能会影响性能。",type:"boolean",get:()=>!!s.get("dialogblur"),callback(e){s.set("dialogblur",e),a(e)}});function a(e){e?document.body.classList.add("dialogblur"):document.body.classList.remove("dialogblur")}n.addNewItem(o),a(s.get("dialogblur")),t.exports={set(e){e=!!e,s.set("dialogblur",e),a(e),o.reGet()},get:()=>s.get("dialogblur")}},68:function(e,t){const{_setDrawerList:i,dodrawer:n,pushBgDrawer:s,getbg:o,setbg:a,on:r,off:l,drawbg:c,initsto:d}=e(69);var u=e(70),g=u.drawer;i([g]),n(g),c(d.get("bg")),t.exports={neizhiDraw:{img:u.draws.img,video:u.draws.video,color:u.draws.color},pushBgDrawer:s,getbg:o,setbg:a,on:r,off:l}},69:function(e,t){const i=e(9),{alert:n,confirm:s}=e(8),o=e(3),{SettingGroup:a,SettingItem:r,mainSetting:l}=e(12),{storage:c}=e(7),d=e(4),u=e(11),g=e(43);var h=new a({title:"背景",index:3}),p=new r({title:"背景设置",message:"点击设置背景",index:0,type:"null",callback:B});l.addNewGroup(h),h.addNewItem(p);var y=o(),v=y.on,m=y.off,f=y.doevent,b=d.element("div",{class:"bgf"});d.query(document,"body").appendChild(b);var w,k,q,x,L=c("background",{sync:!0,get:()=>new Promise(((e,t)=>{var i=L.getAll();delete i.upload,"default"!=i.bg.type?i.requireAddon=g.getAddonBySessionId(i.bg.type).url:"userbg"==i.bg.data.type&&i.userbg.useidb&&(i.bg={type:"default",data:{type:"color",light:"#fff",dark:"#333"}}),i.userbg&&i.userbg.useidb?(delete i.userbg,n("不支持同步用户上传的背景",(function(){e(i)}))):e(i)})),rewrite:(e,t,i)=>new Promise(((o,a)=>{if(i.requireAddon){var r=g.getAddonByUrl(i.requireAddon);r?(i.bg.type=r.session.id,e[t]=i,o()):s("该背景数据需要安装插件以同步，是否安装？",(s=>{if(s){var a=g.installAddon(i.requireAddon);a.on("error",(e=>{n("插件安装失败，同步取消",(()=>{o()}))})),a.on("wait",(e=>{e(!0)})),a.on("done",(n=>{i.bg.type=n.id,e[t]=i,o()}))}else n("已取消背景同步",(()=>{o()}))}))}else e[t]=i,o()})),title:"背景",desc:"QUIK起始页背景相关配置"}),T=0;d.initSet(L,"bg",{type:"default",data:{type:"color",light:"#fff",dark:"#333"}});var S=[];function _(e){var t=e.tab,i=d.element("div",{class:"tabitem","data-tab":T.toString()});k.appendChild(i),i.innerHTML=t,i.onclick=function(){I(this.getAttribute("data-tab"))};var n=d.element("div",{class:"scrollitem","data-tab":T.toString()});return q.appendChild(n),n.innerHTML=e.content,T++,n}function I(e){d.query(x,".tabitem",!0).forEach((e=>{e.classList.remove("active")})),d.query(x,".scrollitem",!0).forEach((e=>{e.style.display=""})),d.query(x,'.tabitem[data-tab="'+e+'"]').classList.add("active"),d.query(x,'.scrollitem[data-tab="'+e+'"]').style.display="block"}var E=0;function M(e){w&&e.init({bgf:b,pushBgTab:_,setbg:A,type:e.type})}var D=null;g.on("allrun",(()=>{D&&(D=null,L.set("bg",{type:"default",data:{type:"color",light:"#fff",dark:"#333"}}),O(L.get("bg")),n("您的背景数据由于插件缺失无法显示，已为您切换为默认。"))}));var C=null;function O(e){for(var t=0;t<S.length;t++)if(e.type==S[t].type)return C&&C.type!=S[t].type&&(C.cancel({bgf:b}),C=S[t]),void S[t].draw({bgf:b,data:e.data});D=e}function A(e){L.set("bg",e),O(e),f("change",[e])}function B(){w?w.open():(w=new i({content:`<div class="actionbar"><h1>背景设置</h1><div class="closeBtn">${d.getGoogleIcon("e5cd")}</div></div><div class="tab_con"></div><div class="scroll_con"></div>`,class:"bg_d auto-size",mobileShowtype:i.SHOW_TYPE_FULLSCREEN}),x=w.getDialogDom(),d.query(x,".closeBtn").onclick=()=>{w.close()},k=d.query(x,"div.tab_con"),q=d.query(x,"div.scroll_con"),S.forEach((e=>{M(e)})),setTimeout((()=>{w.open(),I("0")}),10))}u.pushMenu({icon:d.getGoogleIcon("e1bc"),title:"背景设置",click:B},u.MAIN_MENU_TOP),t.exports={pushBgDrawer:function(e){var t=e.session;try{if(!d.checkSession(t))throw"session error"}catch(e){throw new Error("背景Drawer注册失败，Session校验错误。")}var i="bgdrawer-"+E;return E++,e.type=i,S.push(e),M(e),function(e){D&&e.type==D.type&&(e.draw({bgf:b,data:D.data}),D=null)}(e),i},getbg:function(){return L.get("bg")},setbg:A,on:v,off:m,_setDrawerList(e){S=e},dodrawer:M,initsto:L,urlnocache:function(e){return e+(e.indexOf("?")>-1?"&":"?")+"t="+(new Date).getTime()},backgroundsg:h,drawbg:O,getd:()=>x}},70:function(e,t){var i=e(71),n=e(72);const s=e(58),{icon:o}=e(6),a=e(4),{initsto:r,getd:l}=e(69);var c,d,u,g,h,{ImgOrVideoSi:p,checkBgCoverStyle:y}=e(73),{getVideoCaptrue:v,getUserUploadUrl:m,hasUploadedImg:f,uploadIov:b,_listensetbg:w,_listenseti:k,setl:q}=e(74),{colorChange:x,_listensetbg2:L}=e(76);if(w((function(e){d(e)})),L((function(e){d(e)})),k((function(e){a.query(l(),".zdy .left img").src=e})),window.isExt){h=e(78);for(var T=0;T<h.length;T++)for(var S in h[T])h[T][S]="chrome-extension://"+window.extid+"/assets/"+h[T][S]}else h=e(79);var _=new o({content:a.getGoogleIcon("e86a"),offset:"br",important:!0}),I=new o({content:a.getGoogleIcon("f090"),offset:"br"});I.getIcon().onclick=()=>{window.open(document.querySelector(".bgf img").src)};var E=new o({content:a.getGoogleIcon("e88e"),offset:"br",important:!0}),M=new s({content:'<div class="copyright">...</div>\n      <div class="second">...</div>\n      <div class="title">...</div>\n      <a class="link" target="_blank" href="https://www.bing.com/">去Bing搜索</a>',offset:{right:5,bottom:50},class:"bing_info"});E.getIcon().onclick=()=>{var e;M.isShow?M.hide(400):(M.show(400),e=function(e){var t=M.getCardDom();a.query(t,".copyright").innerText=e.copyright,a.query(t,".second").innerText=e.second_copyright,a.query(t,".title").innerText=e.title,a.query(t,".link").href=e.link},D?e(D):a.xhr("https://bing.shangzhenyang.com/api/json",(t=>{var i=(t=JSON.parse(t)).images[0],n=i.copyright.split("(");n[1]="("+n[1],D={copyright:n[0],second_copyright:n[1],link:i.copyrightlink,title:i.title},e(D)}),(()=>{e({copyright:"加载失败",second_copyright:"(© Bing)",link:"https://www.bing.com/",title:"点击前往必应"})})))},E.getIcon().title="显示壁纸详情",_.getIcon().onclick=function(){var e=document.querySelector(".bgf .full img");e&&(e.style.opacity="0");var t=this;setTimeout((()=>{refreshFn.call(t)}),300)};var D,C=new o({content:a.getGoogleIcon("e8f4",{type:"fill"}),offset:"br"});function O(){document.querySelector("main").style.display="block",setTimeout((()=>{document.querySelector("main").style.opacity=1}),10),document.querySelector(".bgf .cover").style.opacity="",document.removeEventListener("click",O)}function A(){var e=new Date;return{light:`rgb(${256-e.getHours()},${256-e.getMinutes()},${256-e.getSeconds()})`,dark:`rgb(${e.getHours()},${e.getMinutes()},${e.getSeconds()})`}}C.getIcon().onclick=function(e){e.preventDefault(),e.stopPropagation(),document.querySelector("main").style.opacity=0,setTimeout((()=>{document.querySelector("main").style.display="none"}),300),document.querySelector(".bgf .cover").style.opacity=0,document.addEventListener("click",O)},C.getIcon().title="查看壁纸";var B=null,H={img(e,t){e.innerHTML='<div class="img-sp full"><div class="cover"></div><img src="'+(t.url||h[t.index].img)+'"/></div>',e.querySelector("img").onload=function(){this.style.opacity="1"},y(),p.show(),C.show()},video(e,t){e.innerHTML='<div class="video-sp full"><div class="cover"></div><video src="" muted loop></video></div>',a.query(e,".video-sp video").src=t.url||h[t.index].img,a.query(e,".video-sp video").oncanplay=function(){this.play(),this.style.opacity="1"},y(),p.show(),C.show()},color(e,t){if(e.innerHTML='<div class="color-sp full"></div>',!a.query(document.head,"style.colorSpControl")){var i=document.createElement("style");i.className="colorSpControl",document.head.appendChild(i)}a.query(document.head,"style.colorSpControl").innerHTML=`.color-sp{background-color:${t.light};}body.dark .color-sp{background-color:${t.dark};}`},api:function(e,t){function s(t){_.show(),_.getIcon().classList.add("round-anim"),t.getImg((t=>{_.getIcon().classList.remove("round-anim"),H.img(e,{url:t.url}),t.candownload&&I.show()})),refreshFn=()=>{_.getIcon().classList.add("round-anim"),t.getImg((t=>{_.getIcon().classList.remove("round-anim"),H.img(e,{url:t.url}),t.candownload&&I.show()}))}}switch(t.api){case"acg":s(i);break;case"fj":s(n);break;case"bing":H.img(e,{url:"https://bing.shangzhenyang.com/api/1080p"}),I.show(),E.show();break;case"time":B=setInterval((()=>{H.color(e,A())}),200)}},userbg(e,t){var i=r.get("userbg");if(i)if(document.body.classList.add("t-dark"),"video"==i.type)i.useidb?r.get("upload",!0,(t=>{H.video(e,{url:URL.createObjectURL(t)})})):H.video(e,{url:i.url});else if("image"==i.type){i.useidb?r.get("upload",!0,(t=>{H.img(e,{url:URL.createObjectURL(t)})})):H.img(e,{url:i.url})}},zdy(e,t){if(a.query(e,".zdy-sp")||(e.innerHTML='<div class="zdy-sp full"></div>'),!a.query(document.head,"style.zdySpControl")){var i=document.createElement("style");i.className="zdySpControl",document.head.appendChild(i)}a.query(document.head,"style.zdySpControl").innerHTML=`.zdy-sp{background:${t.light};}body.dark .zdy-sp{background:${t.dark};}`}};function G(e){if(a.query(c,".bgitem",!0).forEach((e=>{e.classList.remove("selected")})),a.query(u,".bgitem",!0).forEach((e=>{e.classList.remove("selected")})),"default"==e.type)if("img"==e.data.type)try{a.query(c,`.neizhi .bgitem[data-id="${e.data.index}"]`).classList.add("selected")}catch(e){}else"userbg"==e.data.type?a.query(c,".zdy .bgitem").classList.add("selected"):"api"==e.data.type?"time"==e.data.api?a.query(u,".api .bgitem").classList.add("selected"):a.query(c,`.api .bgitem[data-api="${e.data.api}"]`).classList.add("selected"):"color"==e.data.type&&a.query(u,".zdy .bgitem").classList.add("selected")}function N(){document.body.classList.remove("t-dark"),_.hide(),refreshFn=()=>{},clearInterval(B),I.hide(),p.hide(),E.hide(),C.hide()}q((function(){a.query(c,".noBg").style.display="none",a.query(c,".hasBg").style.display="block",a.query(c,".zdy .editbtn").style.display="block"})),t.exports={drawer:{type:"default",init(t){d=t.setbg,c=t.pushBgTab({tab:"图片/视频",content:e(80)}),f()?(a.query(c,".noBg").style.display="none",m((e=>{a.query(c,".zdy .left img").src=e}))):(a.query(c,".hasBg").style.display="none",a.query(c,".zdy .editbtn").style.display="none"),a.query(c,".zdy .left").addEventListener("click",(()=>{f()?t.setbg({type:t.type,data:{type:"userbg"}}):b()})),a.query(c,".zdy .editbtn").addEventListener("click",(()=>{b(!0)}));var i=a.query(c,".neizhi .unit-content");h.forEach(((e,n)=>{var s=a.element("div",{class:"bgitem def","data-id":n});s.innerHTML='<div class="left"><img data-src="'+e.thumbnail+'" loading="lazy"/></div>',i.appendChild(s),a.query(s,".left").onclick=()=>{t.setbg({type:t.type,data:{type:"img",index:parseInt(s.getAttribute("data-id"))}})}})),a.query(c,".u-se").onclick=()=>{p.callback()},a.query(c,".api.unit-item .left",!0).forEach((e=>{e.addEventListener("click",(()=>{t.setbg({type:t.type,data:{type:"api",api:e.parentElement.getAttribute("data-api")}})}))})),u=t.pushBgTab({tab:"纯色",content:e(81)});var n=r.get("usercolor");a.query(u,".zdy .color-left").style.backgroundColor=n.light,a.query(u,".zdy .color-right").style.backgroundColor=n.dark,a.query(u,".zdy .left").onclick=()=>{var e=r.get("usercolor");t.setbg({type:t.type,data:{type:"color",light:e.light,dark:e.dark}})},a.query(u,".zdy .btn").onclick=()=>{x()};var s=A();a.query(u,".api .color-left").style.backgroundColor=s.light,a.query(u,".api .color-right").style.backgroundColor=s.dark,a.query(u,".api .left").onclick=function(){t.setbg({type:t.type,data:{type:"api",api:this.parentElement.getAttribute("data-api")}})},g=t.pushBgTab({tab:"自定义",content:e(82)});var o=r.get("custombglight"),l=r.get("custombgdark");a.query(g,".gjzdytlight").value=o||"",a.query(g,".gjzdytdark").value=l||"",a.query(g,".gjzdysetbtn").onclick=()=>{r.set("custombglight",a.query(g,".gjzdytlight").value),r.set("custombgdark",a.query(g,".gjzdytdark").value),t.setbg({type:t.type,data:{type:"zdy",dark:a.query(g,".gjzdytdark").value,light:a.query(g,".gjzdytlight").value}}),quik.toast.show("设置成功")},setTimeout((()=>{G(quik.background.getbg()),quik.background.on("change",G)}))},cancel(e){e.bgf.innerHTML="",N()},draw(e){var t=e.bgf,i=e.data;N(),H[i.type](t,i)}},draws:H}},71:function(e,t){const i=e(4);t.exports={getImg:function(e){var t="";t=window.innerWidth<=500?"https://img.loliapi.cn/i/pe/img"+(parseInt(3095*Math.random())+1)+".webp":"https://img.loliapi.cn/i/pc/img"+(parseInt(696*Math.random())+1)+".webp",i.loadimg(t,(n=>{n?e({url:t,candownload:!0}):(t="https://loliapi.com/acg/?_="+Date.now(),i.loadimg(t,(()=>{e({url:t,candoanload:!1})})))}))}}},72:function(e,t){t.exports={getImg(e){e({url:"https://tu.ltyuanfang.cn/api/fengjing.php?_="+Date.now(),candoanload:!1})}}},73:function(e,t){const{SettingItem:i,Setting:n,SettingGroup:s}=e(12),o=e(4),{initsto:a,backgroundsg:r}=e(69);o.initSet(a,"ivsetting",{mb:50,isbr:!1,br:6,th:1});var l=new i({title:"背景图片/视频显示设置",message:"设置背景图片/视频显示的蒙版和模糊等",type:"null",callback(){c.open()}});r.addNewItem(l);var c=new n({title:"背景图片/视频显示设置"}),d=new s({title:"通用",index:0}),u=new i({title:"背景蒙版颜色主题",index:0,type:"select",init:()=>({0:"跟随主题",1:"黑色",2:"白色"}),get(){var e=a.get("ivsetting").th;return void 0===e?1:e},callback(e){var t=a.get("ivsetting");t.th=parseInt(e),a.set("ivsetting",t),y()}}),g=new i({title:"背景蒙版浓度",index:1,type:"range",init:()=>[0,90],get:()=>a.get("ivsetting").mb,callback(e){var t=a.get("ivsetting");t.mb=e,a.set("ivsetting",t),y()}}),h=new i({title:"背景模糊",message:"可能会影响性能",type:"boolean",index:2,get:()=>a.get("ivsetting").isbr,callback(e){e?p.show():p.hide();var t=a.get("ivsetting");t.isbr=e,a.set("ivsetting",t),y()}}),p=new i({title:"背景模糊程度",index:3,type:"range",init:()=>[1,20],get:()=>a.get("ivsetting").br,callback(e){var t=a.get("ivsetting");t.br=e,a.set("ivsetting",t),y()}});function y(){if(document.querySelector(".bgf .img-sp")||document.querySelector(".bgf .video-sp")){var e=a.get("ivsetting"),t=document.querySelector("#ivbgse");t||((t=document.createElement("style")).id="ivbgse",document.head.append(t));var i="",n="";1==e.th?(m(),n="0,0,0",document.body.classList.add("t-dark"),document.body.classList.remove("t-light")):2==e.th?(m(),n="255,255,255",document.body.classList.remove("t-dark"),document.body.classList.add("t-light")):0==e.th&&(!function(){if(v)return;v=!0,setTimeout((()=>{quik.custom.on("colorchange",f)}))}(),"dark"==custom.getColor()?(document.body.classList.add("t-dark"),document.body.classList.remove("t-light"),n="0,0,0"):(document.body.classList.remove("t-dark"),document.body.classList.add("t-light"),n="255,255,255")),i+=".img-sp .cover,.video-sp .cover{background-color:rgba("+n+","+e.mb/100+")}",e.isbr&&(i+=".img-sp .cover,.video-sp .cover{backdrop-filter:blur("+e.br+"px)}"),t.innerHTML=i}}c.addNewGroup(d),d.addNewItem(u),d.addNewItem(g),d.addNewItem(h),d.addNewItem(p),a.get("ivsetting").isbr||p.hide();var v=!1;function m(){v&&(v=!1,setTimeout((()=>{quik.custom.off("colorchange",f)})))}function f(e){var t=a.get("ivsetting"),i=document.querySelector("#ivbgse"),n="",s="";"dark"==e?(document.body.classList.add("t-dark"),document.body.classList.remove("t-light"),n="0,0,0"):(document.body.classList.remove("t-dark"),document.body.classList.add("t-light"),n="255,255,255"),s+=".img-sp .cover,.video-sp .cover{background-color:rgba("+n+","+t.mb/100+")}",t.isbr&&(s+=".img-sp .cover,.video-sp .cover{backdrop-filter:blur("+t.br+"px)}"),i.innerHTML=s}y(),t.exports={ImgOrVideoSi:l,checkBgCoverStyle:y}},74:function(e,t){const i=e(9),{storage:n}=e(7),s=e(4),{initsto:o}=e(69);var a,r;let l;function c(e){var t=o.get("userbg");if(t){if("video"==t.type)if(t.useidb)o.get("upload",!0,(t=>{d(URL.createObjectURL(t),(function(t){e(t)}))}));else try{d(t.url,(t=>{e(t)}))}catch(t){e(!1)}else if("image"==t.type){t.useidb?o.get("upload",!0,(t=>{e(URL.createObjectURL(t))})):e(t.url)}}else e(!1)}function d(e,t){var i=document.createElement("video");i.src=e,i.crossOrigin="anonymous",i.onloadedmetadata=function(){var e=document.createElement("canvas"),n=e.getContext("2d");e.width=i.videoWidth,e.height=i.videoHeight,i.currentTime=i.duration/4,i.oncanplay=function(){n.drawImage(i,0,0,e.width,e.height),t(e.toDataURL("image/png")),this.remove()}}}function u(e){g.forEach((t=>t(e)))}var g=[];function h(e){p.forEach((t=>t(e)))}var p=[];t.exports={hasUploadedImg:function(){return!!o.get("userbg")},getUserUploadUrl:c,getVideoCaptrue:d,uploadIov:function(t){if(a?a.open():(a=new i({content:e(75),class:"iovuploader"}),r=a.getDialogDom(),n.checkIDB()||(s.query(r,".pddb").innerHTML+='<span style="color:red;font-size:12px;">您的浏览器版本过低，无法上传本地文件作背景</span>',s.query(r,".pddb input").style.display="none"),s.query(r,".cancel").onclick=e=>{e.preventDefault(),a.close()},s.query(r,"form").onsubmit=e=>{e.preventDefault();var t=s.query(r,".uploadi").checked?"image":"video",i=s.query(r,'input[type="url"]').value,n=s.query(r,'input[type="file"]').files[0];h(""),n?(o.set("upload",n,!0,(function(){a.close(),c((function(e){h(e)})),u({type:"default",data:{type:"userbg"}})})),o.set("userbg",{type:t,useidb:!0})):(o.set("userbg",{type:t,url:i}),a.close(),c((e=>{h(e),u({type:"default",data:{type:"userbg"}})}))),l()},setTimeout((()=>{a.open()}),10)),t){var d=o.get("userbg");d&&(s.query(r,'input[type="url"]').value=d.url?d.url:"","image"==d.type?s.query(r,".uploadi").checked=!0:s.query(r,".uploadv").checked=!0)}},_listensetbg:function(e){g.push(e)},_listenseti:function(e){p.push(e)},setl:function(e){l=e}}},75:function(e,t){t.exports='<form><h1>上传背景</h1><div class="content"><p>背景类型：<input type="radio" class="uploadi" name="uploadiov" checked="checked"> 图片 <input type="radio" class="uploadv" name="uploadiov"> 视频</p><p>背景URL：<input type="url" placeholder="URL"></p><p class="tip">或者</p><p>从本地选择文件：</p><p class="pddb"><input type="file"></p><p></p></div><div class="footer"><div class="cancel btn">取消</div><button class="ok btn">确定</button></div></form>'},76:function(e,t){const i=e(9),n=e(4),{initsto:s}=e(69);var o,a;function r(){o=new i({content:e(77)}),a=o.getDialogDom(),n.query(a,".cancel").onclick=function(e){e.preventDefault(),o.close()},n.query(a,"form").onsubmit=function(e){e.preventDefault();var t,i=n.query(a,".lightbgcolor").value,r=n.query(a,".darkbgcolor").value;s.set("color",{light:i,dark:r}),n.query(tab2,".zdy .color-left").style.backgroundColor=i,n.query(tab2,".zdy .color-right").style.backgroundColor=r,o.close(),t={type:"default",data:{type:"color",light:i,dark:r}},l.forEach((e=>e(t)))}}n.initSet(s,"usercolor",{dark:"#333333",light:"#ffffff"});var l=[];t.exports={colorChange:function(){o?o.open():(r(),setTimeout((()=>{o.open()}),10));var e=s.get("usercolor");n.query(a,".lightbgcolor").value=e.light,n.query(a,".darkbgcolor").value=e.dark},_listensetbg2:function(e){l.push(e)}}},77:function(e,t){t.exports='<form><h1>自定义背景颜色</h1><div class="content"><p>浅色模式：<input type="color" class="lightbgcolor"></p><p>深色模式：<input type="color" class="darkbgcolor"></p></div><div class="footer"><div class="cancel btn">取消</div><button class="ok btn">确定</button></div></form>'},78:function(e,t){t.exports=[{thumbnail:"mrbgp1_th.png",img:"mrbgp1.webp"},{thumbnail:"mrbgp2_th.png",img:"mrbgp2.webp"}]},79:function(e,t){t.exports=[{thumbnail:"https://image.gumengya.com/thumbnails/b0289db9349e17ca66be2e772cc647a5.png",img:"https://image.gumengya.com/i/2024/06/09/66656920a034a.webp"},{thumbnail:"https://image.gumengya.com/thumbnails/18231c314c064e8c5059debae2506a77.png",img:"https://image.gumengya.com/i/2024/08/12/66b9bd00d60ea.webp"}]},80:function(e,t){t.exports='<div class="unit-item zdy"><div class="unit-title">自定义</div><div class="unit-content"><div class="bgitem full"><div class="left"><div class="hasBg"><img src="" alt=""></div><div class="noBg"><span class="material-symbols-outlined">&#xf09b;</span></div></div><div class="right"><div class="bg-title">用户自定义背景</div><div class="bg-message">上传任意你喜欢的图片/视频作背景</div></div><div class="editbtn"><div class="btn ok">重新上传</div></div></div></div></div><div class="unit-item neizhi"><div class="unit-title">内置</div><div class="unit-content"></div></div><div class="unit-item api"><div class="unit-title">API</div><div class="unit-content"><div class="bgitem half" data-api="bing"><div class="left"><img data-src="https://bing.shangzhenyang.com/api/1080p" alt="" loading="lazy"></div><div class="right"><div class="bg-title">必应壁纸</div><div class="bg-message">获取必应首页的壁纸作为背景</div></div></div><div class="bgitem half" data-api="acg"><div class="left"><img data-src="https://www.loliapi.com/acg/" alt="" loading="lazy"></div><div class="right"><div class="bg-title">随机二次元壁纸</div><div class="bg-message">获取随机二次元壁纸作为背景，背景提供：loliapi.com</div></div></div><div class="bgitem half" data-api="fj"><div class="left"><img data-src="https://tu.ltyuanfang.cn/api/fengjing.php" alt="" loading="lazy"></div><div class="right"><div class="bg-title">随机风景壁纸</div><div class="bg-message">获取随机风景壁纸作为背景，背景提供：ltyuanfang.cn</div></div></div></div></div><div class="unit-item se"><div class="u-se"><p>背景图片显示设置</p><p class="material-symbols-outlined">&#xe5cc;</p></div></div>'},81:function(e,t){t.exports='<div class="unit-item zdy"><div class="unit-title">自定义颜色</div><div class="unit-content"><div class="bgitem full"><div class="left"><div class="color-left color"></div><div class="color-right color"></div></div><div class="right"><div class="bg-title">自定义纯色背景</div><div class="bg-message">将你喜欢的颜色做背景，分亮色和暗色（你也可以都设一个颜色或反着来，但不建议这么做）</div></div><div class="editbtn"><div class="btn ok">编辑</div></div></div></div></div><div class="unit-item api"><div class="unit-title">API</div><div class="unit-content"><div class="bgitem full" data-api="time"><div class="left"><div class="color-left color"></div><div class="color-right color"></div></div><div class="right"><div class="bg-title">时间的颜色</div><div class="bg-message">如果当前时间为12:34:56，那么时间的颜色就是rgb(12,34,56)，在亮色模式下就是rgb(255-12,255-34,255-56)</div></div></div></div></div>'},82:function(e,t){t.exports='<p>浅色模式：</p><br><textarea class="gjzdytlight textarea"></textarea><p>深色模式：</p><br><textarea class="gjzdytdark textarea"></textarea> <button class="gjzdysetbtn">设置</button><p class="tip">参见 <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/background" target="_blank">CSS | background属性</a></p>'},83:function(e,t){const i=e(9),n=e(19),{SettingItem:s}=e(12),o=e(4),a=e(5);var r;function l(){var t=(r=new i({content:e(84).replace("{{close}}",o.getGoogleIcon("e5cd")),mobileShowtype:i.SHOW_TYPE_FULLSCREEN,class:"search_editor auto-size"})).getDialogDom(),s=n.neizhi,l=n.getSearchTypeList(),c=o.query(t,".neizhilist");for(var d in s){var u=o.element("div",{class:"item","data-k":d});u.innerHTML="<img/><div>"+s[d].name+"</div>",((e,t)=>{o.getFavicon(s[e].link,(e=>{o.query(t,"img").src=e||o.createIcon("s")}))})(d,u),c.append(u),"bing"==d?u.addEventListener("click",(()=>{a.show("该项不可取消")})):u.addEventListener("click",(function(){this.classList.contains("active")?this.classList.remove("active"):this.classList.add("active")})),l.hasOwnProperty(d)&&(u.classList.add("active"),delete l[d])}var g="";for(var d in l)g+='<div class="item" data-k="'+d+'"><div class="icon"><img/></div><div class="url"><input value="'+l[d]+'"/></div><div class="remove">'+o.getGoogleIcon("e5cd")+"</div></div>";function h(e,t){t||o.getFavicon(l[e.getAttribute("data-k")],(t=>{o.query(e,".icon img").src=t||o.createIcon("s")})),o.query(e,".url input").oninput=function(){try{var e=this.parentElement.parentElement.querySelector(".icon img");o.getFavicon(this.value,(t=>{e.src=t||o.createIcon("s")}))}catch(e){}},o.query(e,".remove").onclick=function(){this.parentElement.remove()}}g+=`<div class="addnewitem">${o.getGoogleIcon("e145")} 添加自定义的搜索引擎</div>`,o.query(t,".searchlist").innerHTML=g,o.query(t,".searchlist .item",!0).forEach((e=>{h(e)})),o.query(t,".searchlist .addnewitem").onclick=()=>{var e=o.element("div",{class:"item","data-k":"user_"+Date.now().toString().slice(3)});e.innerHTML='<div class="icon"><img src="https://cn.bing.com/favicon.ico"/></div><div class="url"><input value="https://cn.bing.com/search?q=%keyword%"/></div><div class="remove">'+o.getGoogleIcon("e5cd")+"</div>",o.query(t,".searchlist").insertBefore(e,o.query(t,".searchlist .addnewitem")),h(e,!0)},o.query(t,".closeBtn").onclick=o.query(t,".cancel.btn").onclick=()=>{r.close()},o.query(t,".ok.btn").onclick=()=>{var e={};o.query(t,".searchlist .item",!0).forEach((t=>{e[t.dataset.k]=t.querySelector(".url input").value})),o.query(t,".neizhilist .item.active",!0).forEach((t=>{e[t.dataset.k]=""})),(l=e)[n.getSearchTypeIndex()]||n.setSearchType("bing"),n.setSearchList(l),r.close(),a.show("设置成功")}}var c=new s({title:"自定义搜索引擎",index:0,type:"null",message:"",callback(e){r?r.open():(l(),setTimeout((()=>{r.open()}),10))}});n.sg.addNewItem(c),t.exports={open(){r?r.open():(l(),setTimeout((()=>{r.open()}),10))}}},84:function(e,t){t.exports='<div class="actionbar"><h1>搜索引擎列表设置</h1><div class="closeBtn">{{close}}</div></div><div class="list"><h2>内置搜索引擎</h2><div class="neizhilist"></div><h2>自定义搜索引擎</h2><div class="searchlist"></div></div><div class="footer"><button class="cancel btn">取消</button> <button class="ok btn">确定</button></div>'},85:function(e,t){var i=document.querySelector(".notice-con"),n=document.querySelector(".no-notice-tip");const{icon:s}=e(6),o=e(4);var a=e(86),r=document.querySelector(".focus-notice"),l=0,c=!1;function d(e){var t;this.el=o.element("div",{class:"notice-item"}),i.appendChild(this.el),this.title=e.title,this.content=e.content,this.btns=e.btns||[],this.useprogress=e.useprogress,this.progress=0,(t=this).el.innerHTML=a.replace("{{close-btn}}",o.getGoogleIcon("e5cd")),o.query(t.el,".notice-close-btn").onclick=()=>{t.hide()},p(t),y(t),v(t),m(t)}d.prototype={show(e){n.classList.remove("show"),b(1),clearTimeout(this._timeouthide),this.el.classList.add("show"),this.el.addEventListener("click",(function(e){c=!0}));var t=this;this.el.style.display="block",this.el.style.animation="noticein .3s",e&&setTimeout((()=>{t.hide()}),e)},hide(){this.el.classList.remove("show"),document.querySelector(".notice-con .notice-item.show")||(n.classList.add("show"),b(0)),this.el.style.animation="noticeout .3s";var e=this;this._timeouthide=setTimeout((()=>{e.el.style.display="none"}),300)},focus(){this.show(),function(e){g.push(e),1==g.length&&h()}(this)},destroy(){this.hide();var e=this;setTimeout((()=>{e.el.remove()}),300)},setTitle(e){this.title=e,p(this)},setContent(e){this.content=e,y(this)},setBtn(e){this.btns=e,v(this)},setProgress(e){!this.useprogress||e>1||e<0||(this.progress=e,m(this))}};var u,g=[];function h(){var e=g[0],t=e.el.cloneNode(!0);r.appendChild(t),o.query(t,".notice-close-btn").onclick=function(){clearTimeout(u),t.remove(),e.hide(),g.shift(),g.length>0&&h()},v({el:t,btns:e.btns,hide(){e.hide(),clearTimeout(u),t.remove()},show(){}}),u=setTimeout((()=>{t.remove(),g.shift(),g.length>0&&h()}),3e3)}function p(e){o.query(e.el,".notice-title").innerHTML=e.title}function y(e){o.query(e.el,".notice-content").innerHTML=e.content}function v(e){var t=o.query(e.el,".notice-btns");t.innerHTML="";for(var i=0;i<e.btns.length;i++)(i=>{var n=e.btns[i],s=o.element("div",{class:"btn"+(n.style?" "+n.style:"")});s.innerText=n.text,s.onclick=()=>{n.click(e)},t.appendChild(s)})(i)}function m(e){e.useprogress?o.query(e.el,".notice-progress .p div").style.width=100*e.progress+"%":o.query(e.el,".notice-progress").style.display="none"}var f=new s({content:o.getGoogleIcon("e7f4"),offset:"tl",class:"notice-icon"});function b(e){void 0===e?e=l:l=e,window.innerWidth<600&&e?f.show():f.hide()}window.addEventListener("resize",(()=>{b()})),f.getIcon().addEventListener("click",(()=>{document.querySelector(".notice-sc").classList.add("show")})),document.querySelector(".notice-sc").addEventListener("click",(function(){c?c=!1:this.classList.remove("show")})),b(),t.exports=d},86:function(e,t){t.exports='<div class="notice-actionbar"><div class="notice-title"></div><div class="notice-close-btn">{{close-btn}}</div></div><div class="notice-content"></div><div class="notice-progress"><div class="p"><div></div></div></div><div class="notice-btns"></div>'},87:function(e,t){const i=e(85),{storage:n}=e(7),s=e(4);var o=n("tuisong");s.initSet(o,"d",0);var a=o.get("d");s.xhr("/quik-notice.json",(e=>{if((e=JSON.parse(e)).date>a){setTimeout((()=>{o.set("d",e.date)}),1e4);var t=new i({content:e.content,title:e.title,btns:e.btns.map((e=>{var i;return i=e.link?()=>{t.hide(),window.open(e.link)}:()=>{t.hide()},{text:e.text,style:e.style,click:i}}))});t.show()}}),(()=>{}))},88:function(e,t){let{storage:i}=e(7),{SettingGroup:n,SettingItem:s,mainSetting:o}=e(12);const{cateWidthShiPei:a}=e(26),r=e(4),{icon:l}=e(6),c=e(85),{alert:d,confirm:u,prompt:g}=e(8);var h=i("safe");function p(){var e,t=location.hash.slice(1);-1!=t.indexOf(";")&&(e=t.split(";")[0],t=t.split(";")[1]),"safe"==t&&(location.hash="#"+(e?e+";":""),window.addon_=!0,d("已阻止所有插件运行，请修改设置或删除插件"))}window.addEventListener("hashchange",p),window.addEventListener("visibilitychange",(()=>{"hidden"==document.visibilityState?document.body.style.display="none":(document.body.style.display="block",a())})),p();var y=new n({title:"高级",index:5}),v=new s({title:"性能模式",message:"强制关闭所有滤镜和动画效果",index:1,type:"boolean",get:()=>!!h.get("xnse"),callback(e){h.set("xnse",e),b(e)}});y.addNewItem(v);var m=new s({title:"清除数据",message:"清除QUIK起始页的所有数据",index:2,type:"null",callback(){u("确定要清除所有数据吗？",(e=>{if(e){!function e(){g("请在下方输入“clearAll”，并再次确定是否要清除所有数据，此操作无法恢复。",(t=>{if("clearAll"==t){var n=i("oobe").getAll();localStorage.quik2=JSON.stringify({oobe:n}),localforage.clear().then((()=>{location.reload()}))}else t&&e()}))}()}}))}});y.addNewItem(m);var f=new s({title:"强制更新",message:"强行从远程获取最新版本并更新",index:2,type:"null",callback(){u("确定要强制更新吗？",(e=>{e&&(window.swReg?window.isInframe&&-1!=location.href.indexOf("://quik.42web.io/")?d("因安全原因，扩展程序无法进行强制更新，请在网页端更新",(function(){window.open("https://quik.42web.io/?forceUpdate=1")})):(window.swReg.active.postMessage("update"),new c({title:"更新提示",content:"已向后台发送更新请求，请耐心等待。"}).show()):d("更新完成",(()=>{location.reload()})))}))}});function b(e){if(e){var t=r.element("style");t.id="xnse",t.innerHTML="*{filter:none!important;backdrop-filter:none!important;animation:none!important;transition:none!important;}",document.head.append(t)}else try{document.getElementById("xnse").remove()}catch(e){}}y.addNewItem(f),o.addNewGroup(y),b(!!h.get("xnse")),window.addEventListener("offline",q),window.addEventListener("online",q);var w=new l({content:r.getGoogleIcon("f239"),offset:"br",important:!0});w.getIcon().style.color="red";var k=new c({title:"断网提醒",content:"您的网络已断开，请尽快重连！"});function q(){window.navigator.onLine?(k.hide(),w.hide()):(k.show(),k.focus(),w.show())}q()},89:function(e,t){const{SettingGroup:i,SettingItem:n,mainSetting:s}=e(12),o=e(4),a=e(9);var{getJSON:r,setJSON:l}=e(90),{registerWebSync:c,unregister:d,isSync:u}=e(91);const{getStorageList:g}=e(7);function h(){var e=new a({content:"正在加载模块..."});e.open();var t=o.element("script",{src:"./quik1.js"});document.body.append(t),window.quik1to2=t=>{window.quik1to2=null,t(q),e.close()}}const{alert:p}=e(8),{showOpenFilePicker:y}=e(1),v=e(43);var m=new i({title:"数据",index:4}),f=new n({title:"导出数据",message:"导出数据到文件",type:"null",callback:b});function b(){L||(L=new a({content:`<div class="actionbar">\n        <h1>导出数据</h1>\n        <div class="closeBtn">${o.getGoogleIcon("e5cd")}</div>\n      </div>\n      <div class="exportslist">\n      </div>\n      <div class="btns">\n        <div class="btn cancel">取消</div>\n        <div class="btn ok">导出</div>\n      </div>`,class:"sync-dialog auto-size",mobileShowtype:a.SHOW_TYPE_FULLSCREEN}),S=L.getDialogDom(),o.query(S,".closeBtn").onclick=o.query(S,".cancel").onclick=()=>{L.close()},o.query(S,".ok").onclick=()=>{var e=[];o.query(S,".exportslist .item",!0).forEach((t=>{o.query(t,"input").checked&&e.push(t.dataset.key)})),r(e).then((e=>{var t,i,n;t=JSON.stringify(e),i="quik-2-exportdata.json",(n=document.createElement("a")).href=URL.createObjectURL(new Blob([t],{type:"application/json"})),n.download=i,n.click()})),L.close()});var e=g();for(var t in e)if(e[t]&&e[t].sync){var i=e[t],n=document.createElement("div");n.classList.add("item"),n.innerHTML=`<input type="checkbox"/><div class="message">\n        <div class="title">${i.title||t}</div>\n        <div class="desc">${i.desc||""}</div>\n      </div>`,n.dataset.key=t,o.query(S,".exportslist").appendChild(n),o.query(n,"input").checked=!0}setTimeout((()=>{L.open()}),10)}var w=new n({title:"导入数据",message:"从文件导入数据",type:"null",callback:k});function k(){y().then((e=>{var t=e[0];if(t)try{var i=new FileReader;i.onload=e=>{q(I=JSON.parse(e.target.result))},i.readAsText(t)}catch(e){p("读取文件有误！")}}))}function q(e){I=e;var t=g();for(var i in T||(T=new a({content:`<div class="actionbar">\n        <h1>导入数据</h1>\n        <div class="closeBtn">${o.getGoogleIcon("e5cd")}</div>\n      </div>\n      <div class="importslist">\n      </div>\n      <div class="btns">\n        <div class="btn cancel">取消</div>\n        <div class="btn ok">导入</div>\n      </div>`,class:"sync-dialog auto-size",mobileShowtype:a.SHOW_TYPE_FULLSCREEN}),_=T.getDialogDom(),o.query(_,".closeBtn").onclick=o.query(_,".cancel").onclick=()=>{I=null,T.close()},o.query(_,".ok").onclick=()=>{var e={};o.query(_,".importslist .item",!0).forEach((t=>{o.query(t,"input").checked&&(o.query(t,"select")?e[t.dataset.key]=o.query(t,"select").value:e[t.dataset.key]="rewrite")})),l(I,e),T.close()}),e)x(e[i],i,t);setTimeout((()=>{T.open()}),10)}function x(e,t,i){var n=document.createElement("div");if(!i[t]&&e.addon&&!v.getAddonByUrl(e.addon)){n.classList.add("item");var s=!1;return 0==e.addon.indexOf("market:")&&(s=!0),function(i){n.innerHTML=`<input type="checkbox" disabled/><div class="message">\n            <div class="title">${e.title||t}</div>\n            <div class="desc">需要安装插件以同步：${i}</div>\n          </div>\n          <div class="installbtn">安装</div>`;var o=n.querySelector(".installbtn");o.addEventListener("click",(function(){var i;this.classList.contains("ing")||(this.classList.contains("err")&&this.classList.remove("err"),this.innerHTML="安装中...",this.classList.add("ing"),(i=s?v.installByOfficialMarket(e.addon.replace("market:","")):v.installByUrl(e.addon)).on("error",(()=>{o.innerHTML="安装失败",o.classList.add("err")})),i.on("wait",(e=>{e(!0)})),i.on("done",(()=>{n.remove(),setTimeout((()=>{x(e,t,g())}),10)})))}))}(e.addon),n.dataset.key=t,void o.query(_,".importslist").appendChild(n)}i[t]&&(n.classList.add("item"),n.innerHTML=`<input type="checkbox"/><div class="message">\n      <div class="title">${e.title||t}</div>\n      <div class="desc">${e.desc||""}</div>\n    </div>`,i[t].compare&&(n.innerHTML+='<select>\n        <option value="compare">对比</option>\n        <option value="rewrite">覆盖</option>\n      </select>',o.query(n,"select").value="compare"),n.dataset.key=t,o.query(_,".importslist").appendChild(n),o.query(n,"input").checked=!0)}m.addNewItem(f),m.addNewItem(w),s.addNewGroup(m);var L,T,S,_,I=null;var E=new n({title:"QUIK 1",message:"从 QUIK 1 中导入数据",type:"null",callback:h});m.addNewItem(E),t.exports={getJSON:r,setJSON:l,openImport:k,openExport:b,registerWebSync:c,unregister:d,isSync:u,openQUIK1:h}},90:function(e,t){const{alert:i}=e(8),{storage:n}=e(7),{getStorageList:s,getAllStorage:o}=e(7),{abortSync:a}=e(91);async function r(e){var t={};for(var i in e)if("string"==typeof e[i]&&"^"==e[i][0]){var n={"^_t":"db","^_k":e[i],"^_d":await localforage.getItem(e[i])};try{JSON.stringify(n),t[i]=n}catch(e){}}else t[i]=e[i];return t}async function l(e,t,i){for(var s in i)if("db"==i[s]["^_t"]&&i[s]["^_k"]){if(!n.checkIDB())throw new Error("Your browser is not support indexedDB,Please update your browser.");await localforage.setItem(i[s]["^_k"],i[s]["^_d"]),e[t][s]=i[s]["^_k"]}else e[t][s]=i[s]}t.exports={getJSON:async function(e){for(var t=s(),i=o(),n={},a=0;a<e.length;a++){var l=e[a];if(t[l]){n[l]={title:t[l].title||l,desc:t[l].desc||"",addon:t[l].addon,data:null};try{t[l]&&t[l].sync&&(t[l].get?n[l].data=await t[l].get():n[l].data=await r(i[l]))}catch(e){throw new Error("在获取 "+l+" 时遇到错误",e)}}}return n},setJSON:async function(e,t){a();var n=s(),r=o(),c={};for(var d in e)if(t[d])if(n[d]){if(c[d]=r[d],"rewrite"==t[d])"function"==typeof n[d].rewrite?await n[d].rewrite(c,d,e[d].data):await l(c,d,e[d].data);else if("compare"==t[d]){if("function"!=typeof n[d].compare)throw new Error(d+" 不支持compare");await n[d].compare(c,d,e[d].data)}}else e[d].addon;var u=JSON.parse(localStorage.quik2);for(var d in c)u[d]=c[d];localStorage.quik2=JSON.stringify(u),i("数据导入成功，请重新加载页面",(()=>{-1!=location.hash.indexOf(";")?location.hash=location.hash.split(";")[0]+";newnow":location.hash="#newnow",location.reload()}))}}},91:function(e,t){const i=e(9),{confirm:n}=e(8),{icon:s}=e(6),o=e(85),{storage:a}=e(7),r=e(4),{getJSON:l}=e(90),c=e(43);var d=a("websync");d.get("wait")||d.set("wait",[]);var u,g,h=d.get("yesid");async function p(e){if(u=e,await u.isLogin()||await u.login(),function(){var e=location.hash.slice(1);-1!=e.indexOf(";")&&(e=e.split(";")[1]);if("newnow"==e)return location.hash=location.hash.replace("newnow",""),!0}())await v(),f();else{var t=await new Promise(((e,t)=>{u.getLastReq().then((n=>{if(n!=d.get("last_req")){var s=g.getDialogDom();if("no"==n)v();else{var o=new Date(n).toLocaleString()+"的更改";r.query(s,".last_req").innerText=o,r.query(s,".btn.ok").onclick=()=>{!async function(){var e=new i({content:"获取中。。。"});e.open();var t=await u.getAll();e.close(),_importData(t)}()},r.query(s,".btn.cancel").onclick=()=>{v().then(e).catch(t),g.close()},g||(g=new i({content:'<div>\n                <p>您的在线存档与本地存档存在冲突:</p>\n                <p class="last_req"></p>\n                <p>你要：</p>\n            </div>\n            <div class="btns">\n                <div class="btn ok">从在线同步</div>\n                <div class="btn cancel">本地覆盖在线</div>\n            </div>'})),setTimeout((()=>{g.open()}),10)}}else e("n")})).catch(t)}));t&&f()}}h&&m();var y=new s({content:r.getGoogleIcon("eb5a"),offset:"br",important:!0});async function v(){y.show();var e=getStorageList(),t=await l(Object.keys(e).filter((t=>!!e[t]&&e[t].sync))),i=Date.now();await u.updateAll(t,i),d.set("last_req",i),d.set("wait",[]),y.hide()}function m(){a.on("websync",(e=>{var t=Date.now();e.id=t,function(e){var t=d.get("wait");if(e.sp)t.push(e);else{for(var i=0;i<t.length;i++)if(t[i].key==e.key){t.splice(i,1);break}t.push({key:e.key,id:e.id})}d.set("wait",t),1==t.length&&u&&f()}(e)}))}function f(){if(y.show(),u){var e=d.get("wait"),t=e[0];t&&u.update(t,(i=>{i?(d.set("last_req",i),function(e){d.set("last_req",e);for(var t=d.get("wait"),i=0;i<t.length;i++)if(t[i].id==e){t.splice(i,1);break}d.set("wait",t),0==t.length&&y.hide()}(i),e=null,t=null,f()):new o({title:"云同步",content:"数据（"+new Date(i).toLocaleString()+"的更改）同步失败了，是否重试？",btns:[{text:"确定",click(){f()}},{text:"取消",click(){}}]}).show()}))}}y.hide(),c.on("allrun",(()=>{setTimeout((()=>{h&&!u&&n("正在使用的云同步插件已被卸载或禁用，是否取消当前的云同步服务？",(e=>{e&&(d.remove("yesid"),d.remove("last_req"),location.reload())}))}),1e3)})),t.exports={registerWebSync:function(e,t,i){r.checkDetailsCorrect(e,["isLogin","login","getLastReq","getAll","update","updateAll"])?r.checkSession(t)?h!=t.id?n('插件 "'+c.getAddonById(t.id)+'" 申请提供数据云同步功能，是否同意？',(n=>{n?(h=t.id,d.set("yesid",h),d.remove("last_req"),i({code:0,msg:"OK"}),m(),p(e)):i({code:-1,msg:"用户取消"})})):(i({code:0,msg:"OK"}),p(e).catch((e=>{new o({title:"云同步",content:"云同步初始化失败，请检查网络连接后刷新"}).show()}))):i({code:-3,msg:"session不正确"}):i({code:-2,msg:"格式不正确"})},unregister:function(e){r.checkSession(e)?h==e.id&&(d.remove("yesid"),d.remove("last_req"),location.reload()):cb({code:-3,msg:"session不正确"})},isSync:function(){return!!h},abortSync:function(){u=null}}},92:function(e,t){let{mainSetting:i}=e(12),{setLite:n,isLite:s}=e(61),{setShowCate:o,isShowCate:a}=e(26);document.addEventListener("keydown",(function(e){"s"==e.key&&e.altKey?(e.preventDefault(),i.open()):"x"==e.key&&e.altKey?(e.preventDefault(),n(!s())):"g"==e.key&&e.altKey&&(e.preventDefault(),o(!a()))}))},93:function(e,t){const{SettingGroup:i,SettingItem:n,mainSetting:s}=e(12),o=e(11),{confirm:a,alert:r}=e(8),l=e(4),c=e(9);var d=e(94),u=new i({title:"关于",index:5});s.addNewGroup(u);var g=new n({type:"null",title:"关于QUIK起始页",index:1,callback(){w.open()}}),h=new n({type:"null",title:"更新日志",index:2,callback(){L?f.open():(!function(){f=new c({content:`<div class="actionbar">\n        <h1>更新日志</h1>\n        <div class="closeBtn">${l.getGoogleIcon("e5cd")}</div>\n      </div>\n      <div class="version_list"><div></div></div>`,mobileShowtype:c.SHOW_TYPE_FULLSCREEN,class:"update_dia def-size"}),b=f.getDialogDom(),l.query(b,".version_list div").innerHTML="正在加载更新日志...",l.query(b,".closeBtn").onclick=()=>{f.close()},L=!0;var e=l.element("script",{src:"./updates.js"});document.body.append(e),window.connectUpdates=function(e){l.query(b,".version_list div").innerHTML=(()=>{var t="";for(var i in e)t+=T(i,e[i]);return t})(),window.connectUpdates=null},e.onload=()=>{e.remove()}}(),setTimeout((()=>{f.open()}),10))}}),p=new n({type:"null",title:"用户协议和隐私政策",index:3,callback(){q?q.open():(q=new c({content:` <div class="close">${l.getGoogleIcon("e5cd")}</div><div class="lic-con">${S()}</div>`,mobileShowtype:c.SHOW_TYPE_FULLSCREEN,class:"lic-dialog def-size"}),l.query(q.getDialogDom(),".close").onclick=()=>{q.close()},setTimeout((()=>{q.open()}),10))}}),y=new n({type:"null",title:"特别鸣谢",index:4,callback(){x?x.open():(_(),setTimeout((()=>{x.open()}),10))}}),v=(y=new n({type:"null",title:"提供反馈",index:5,callback(){window.open("./feedback.html")}}),new n({type:"null",title:"加入官方QQ群",message:"在官方QQ群可以查看最新消息，也是处理建议最快的地方，更有机会参与新功能测试",index:5,callback:m}));function m(){window.open("https://qm.qq.com/q/6nOculioy4"),a("如果没有跳转至QQ，点击确定复制群号：971915865",(e=>{e&&l.copyText("971915865")}))}u.addNewItem(g),u.addNewItem(h),u.addNewItem(p),u.addNewItem(y),u.addNewItem(v),o.pushMenu({icon:l.getGoogleIcon("e88e"),title:"关于QUIK",click(){w.open()}},1),o.pushMenu({icon:l.getGoogleIcon("e0bf"),title:"加入官方QQ群",click:m},1),window.isExt||o.pushMenu({icon:l.getGoogleIcon("e87b"),title:"浏览器扩展",click(){r("浏览器扩展尚处于测试中，只支持chromium内核的浏览器（chrome,edge,360浏览器等），暂未上传至扩展商店，请下载crx后手动安装。",(function(){-1!=location.href.indexOf("quik.42web.io")?window.open("/intro/#h"):window.open("/#h")}))}},1);var f,b,w=new c({content:e(95).replace("{{close-btn}}",l.getGoogleIcon("e5cd")),class:"def-size",mobileShowtype:c.SHOW_TYPE_FULLSCREEN}),k=w.getDialogDom();l.query(k,".close").onclick=()=>{w.close()},l.query(k,".t.thanks a").onclick=()=>{x||_(),setTimeout((()=>{x.open()}),50)},setTimeout((()=>{l.query(k,".ver span").innerText=window.version.version}));var q,x,L=!1;function T(e,t){for(var i="",n={new:"新增",del:"删除",fix:"修复",change:"修改",thanks:"感谢"},s=t.updates,o=0;o<s.length;o++)i+='<div class="update_item"><div class="update_item_tag '+s[o].tag+'"><div>'+n[s[o].tag]+'</div></div><div class="update_item_content">'+s[o].content+"</div></div>";return'<div class="version_item"><div class="version_item_title">'+e+'</div><div class="version_item_update_time">发布时间：'+t.time+'</div><div class="version_update">'+i+"</div></div>"}function S(){return d}function _(){var t=e(96);x=new c({content:`<div class="close">${l.getGoogleIcon("e5cd")}</div><div class="thank-con">${t}</div>`,class:"thank-dialog def-size",mobileShowtype:c.SHOW_TYPE_FULLSCREEN}),l.query(x.getDialogDom(),".close").onclick=()=>{x.close()}}t.exports={lic:d}},94:function(e,t){t.exports='<h1>QUIK起始页用户协议与隐私政策</h1><p><b>请务必认真阅读！</b></p><h2>一、QUIK起始页简介</h2><p>QUIK起始页（以下简称本产品）是一个由个人开发者（<a href="https://siquan001.github.io/" target="_blank">陈思全</a>）编写的一个开源免费的纯前端项目，以GPL 3.0 license声明，版权归原作者所有</p><h2>二、用户使用须知</h2><p>1.使用本产品即代表您同意本条款的所有内容。</p><p>2.<b>下面的插件使用须知更重要</b></p><p>3.本产品中的大部分图标使用Google开源的Material Outlined图标。</p><p>4.本产品中一言的“随机一言”功能、“今日诗词”功能、搜索联想功能、背景设置中的API背景、搜索框的“自动翻译”功能，均由第三方API提供，与QUIK起始页无关，如出现问题，QUIK起始页不负责任，但我们会尽量保证API的可用性</p><p>5.本产品的随机背景API均支持下载壁纸，但这些壁纸仅能用做壁纸，禁止商业化使用</p><h2>三、插件使用须知</h2><p>1.本产品提供插件拓展功能，使用本产品的插件拓展功能即代表您知晓并同意本条款的所有内容。</p><p>2.安装官方提供的插件需要您同意插件的用户协议与隐私政策，若与本协议存在出入，以本协议为准</p><p>3.安装来自第三方的不明插件是十分不安全的行为，同时请保证您的设备未被病毒程序感染，<b>否则本产品不能保证您的数据安全和使用安全！</b></p><h2>四、隐私政策</h2><p>1.本产品本身属于纯前端项目，不会收集除您的IP地址以外的任何信息，您的所有使用数据都会存在本地</p><p>2.如您安装了插件，插件可能会收集您的一些信息，详见插件的用户协议与隐私政策。</p><p>3.本产品中使用的一些API和站点服务提供者可能会收集您的IP地址、Cookie等信息用于数据分析和安全防护等</p><h2>五、免责声明</h2><p>1.本产品不对因使用本产品而导致的任何损失承担责任，包括但不限于因下载、安装、使用本产品而受到的损失、数据丢失等。</p><p>2.本产品不保证本产品所提供的全部功能或服务一定能满足您的要求，也不保证本产品所提供的服务不会中断或停机。</p><p>3.本产品对本条款的解释权归原作者所有。</p>'},95:function(e,t){t.exports='<div class="about-dialog"><div class="close">{{close-btn}}</div><div class="ab-logo"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 456 128"><circle cx="64" cy="64" r="40" stroke="black" stroke-width="3" fill="transparent"/><line x1="74" y1="74" x2="104" y2="104" style="stroke:rgb(0,0,0);stroke-width:3;"/><path d="M148 24L148 68Q148 104 180 104Q212 104 212 68L212 24" style="fill:transparent;stroke:rgb(0,0,0);stroke-width:3;"></path><path d="M276 24L306 24M291 24L291 104M276 104L306 104" style="fill:transparent;stroke:rgb(0,0,0);stroke-width:3;"></path><path d="M384 24L384 104M424 26L384 68M424 102L384 68" style="fill:transparent;stroke:rgb(0,0,0);stroke-width:3;"></path></svg></div><div class="t ver">当前版本: <span></span></div><div class="t intro">介绍: QUIK起始页是由前端爱好者<a href="https://siquan001.github.io/?ref=quik" target="_blank">陈思全</a>编写的一个简洁、实用的浏览器主页</div><div class="t license">版权声明: 本项目以GPL 3.0协议声明，版权归原作者所有。</div><div class="t thanks">感谢这些项目或可爱的人为QUIK起始页提供的支持: <a href="javascript:;">点击查看</a></div><div class="t feedback">反馈: chensiquan2023@qq.com</div></div>'},96:function(e,t){t.exports='<h1>特别鸣谢</h1><h2>感谢以下项目对QUIK的支持</h2><ul><li><a href="https://github.com/localForage/localForage" target="_blank">localforage</a> - 为indexedDB的管理提供一个方便的类似于localStorage的API</li><li><a href="https://github.com/siquan001/rem/" target="_blank">REM</a> - 简单的模块化工具（我做的）</li></ul><h2>感谢以下服务对QUIK的支持</h2><ul><li><a href="https://loliapi.com/" target="_blank">loliapi</a> - 双端自适应随机二次元图片API提供</li><li><a href="https://api.gumengya.com/" target="_blank">故梦API</a> - 随机风景图片API,随机一言API提供</li><li><a href="https://bing.com/" target="_blank">必应</a> | <a href="https://bing.shangzhenyang.com/" target="_blank">bing.shangzhenyang.com</a> - 每日必应壁纸API提供</li><li><a href="https://jinrishici.com/" target="_blank">jinrishici.com</a> - 随机诗词API提供</li><li><a href="https://baidu.com/" target="_blank">百度</a> - 搜索联想API提供</li><li><a href="https://github.com/" target="_blank">Github</a> - 静态网站托管服务提供</li></ul><h2>感谢所有QUIK用户和支持QUIK的人</h2><p style="padding-left: 20px;">没有你们，就没有现在的QUIK起始页。</p>'},97:function(e,t){const i=e(9),{alert:n,confirm:s}=e(8),o=e(5),a=e(4);if(window.version_code=160,window.version={version:"2.7.0",version_code:window.version_code,updateTime:"2025/2/4",log:[{tag:"change",content:"采用新的代码框架（Beta）"}]},"serviceWorker"in navigator&&!window._dev){function r(e){a.xhr("./version",(t=>{var i=parseInt(t);i>version_code&&(window.isInframe&&-1!=location.href.indexOf("://quik.42web.io/")?n("检测到新版本，安全原因无法在扩展中更新，即将打开新页面更新。",(function(){window.open("https://quik.42web.io/?update=1")})):(o.show("发现新版本(版本序号："+i+")，正在更新"),e.active.postMessage("update")))}),(()=>{}))}navigator.serviceWorker.ready.then((e=>{if(window.swReg=e,-1!=window.location.href.indexOf("://quik.42web.io/")){var t=a.element("iframe",{src:"./version",style:"opacity:0"});document.body.appendChild(t);var i=0;t.onload=function(){++i>=2&&r(e)},setTimeout((()=>{r(e)}),4e3)}else r(e)})),navigator.serviceWorker.addEventListener("message",(e=>{"updated"==e.data&&s("新版本已准备就绪，是否刷新页面",(e=>{e&&(localStorage.setItem("__q__s__","1"),location.reload())}))}))}var l=null;function c(e){for(var t="",i={new:"新增",del:"删除",fix:"修复",change:"修改",thanks:"感谢"},n=0;n<e.length;n++)t+='<div class="update_item"><div class="update_item_tag '+e[n].tag+'"><div>'+i[e[n].tag]+'</div></div><div class="update_item_content">'+e[n].content+"</div></div>";return t}localStorage.getItem("__q__s__")&&(l||(l=new i({content:`<h1>版本更新</h1><div class="version_item">\n<div class="version_item_title">版本号：${window.version.version}</div>\n<div class="version_item_update_time">发布时间：${window.version.updateTime}</div>\n<div class="version_update">${c(window.version.log)}</div>\n</div><div class="footer"><div class="btn ok">我知道了</div></div>`,class:"update_dialog"}),a.query(l.getDialogDom(),".btn.ok").onclick=()=>{l.close()}),setTimeout((()=>{l.open()})),localStorage.removeItem("__q__s__"))},98:function(e,t){const i=e(9),n=e(59),{storage:s}=e(7),o=e(4),a=e(93);var r=s("oobe");if(r.get("agree"))y();else{var l=a.lic,c=0,d=e(99),u=[e(100),e(101)];u.forEach(((e,t)=>{d=d.replace("{{part"+(t+1)+"}}",e)}));var g=new i({content:d=d.replace("{{lic}}",l),class:"oobedia def-size",mobileShowtype:i.SHOW_TYPE_FULLSCREEN,clickOtherToClose:!1}),h=g.getDialogDom();function p(){if(c>0&&(o.query(h,".part.a"+c).classList.remove("show"),o.query(h,".part.a"+c).classList.add("n")),c==u.length)return g.close(),void y();c++,setTimeout((()=>{o.query(h,".part.a"+c).classList.add("show")}),200)}o.query(h,".part.a1 .btn.ok").onclick=()=>{r.set("agree",!0),p()},o.query(h,".part.a1 .btn.cancel").onclick=()=>{location.href="about:blank"},o.query(h,".part.a2 .item.a").onclick=()=>{p()},o.query(h,".part.a2 .item.b").onclick=()=>{p(),sync.openImport()},o.query(h,".part.a2 .item.c").onclick=()=>{p(),sync.openQUIK1()},p(),g.open()}function y(){r.get("guided")||n.create([{text:"点击左下角的"+o.getGoogleIcon("e8b8",{type:"fill"})+"就可以打开设置，你可以在设置里个性化你的QUIK起始页",offset:{bottom:40,left:0}},{text:"QUIK起始页提供插件来拓展QUIK起始页的功能，点击"+o.getGoogleIcon("e87b",{type:"fill"})+"看看插件市场里是否有中意的吧",offset:{top:40,right:40}},{text:"主菜单中包含常用功能，有时也是插件的功能入口。",offset:{top:40,right:0}},{text:"单击鼠标右键或长按链接即可修改链接，点击“+”号可以添加新链接。",offset:{bottom:window.innerHeight/2-150,right:window.innerWidth/2-100}},{text:"开始使用QUIK起始页吧！",offset:{bottom:window.innerHeight/2-50,right:window.innerWidth/2-80}}],(()=>{r.set("guided",!0)}))}},99:function(e,t){t.exports='<div class="part a1">{{part1}}</div><div class="part a2">{{part2}}</div>'},100:function(e,t){t.exports='<div class="lic-c">{{lic}}</div><div class="btns"><div class="btn cancel">不同意</div><div class="btn ok">同意</div></div>'},101:function(e,t){t.exports='<div class="imglogo"><svg xmlns="http://www.w3.org/2000/svg" style="stroke: #000;" version="1.1" viewBox="0 0 456 128"><circle cx="64" cy="64" r="40" stroke-width="3" fill="transparent"/><line x1="74" y1="74" x2="104" y2="104" style="stroke-width:3;"/><path d="M148 24L148 68Q148 104 180 104Q212 104 212 68L212 24" style="fill:transparent;stroke-width:3;"></path><path d="M276 24L306 24M291 24L291 104M276 104L306 104" style="fill:transparent;stroke-width:3;"></path><path d="M384 24L384 104M424 26L384 68M424 102L384 68" style="fill:transparent;stroke-width:3;"></path></svg></div><div class="biaoyu">2.0版本，焕新归来！</div><div class="clist"><div class="item a">开始使用</div><div class="item b">导入数据</div><div class="item c">从QUIK1.x还原</div></div>'},102:function(t,n){const s=t(19),o=t(4);s.on("beforeenter",(e=>{"rainbowcatXquik"==e&&(localStorage.__quik_egg__="1")})),setTimeout((()=>{window.eggnow__&&(setTimeout((()=>{var t=o.element("audio",{src:"./assets/nyan.mp3",loop:!0,preload:!0});function n(){var t;setTimeout((()=>{var e=0,i=["Nyan Cat","Artist:桃音モモ","From:网易云音乐"];document.querySelector(".loading-f p").innerHTML=i[e],t=setInterval((()=>{e=e==i.length-1?0:e+1,document.querySelector(".loading-f p").innerHTML=i[e]}),2e3)}),0),setTimeout((()=>{clearInterval(t);var e=0,i=["nya nya nya nya nya nya nya nya nya nya nya nya nyan","nay nya nya~ nay nya nya_ nya nya nya nya nya nya nyan?","nya nya nya_ nya nya nya nay nya nya nya nay nya nyan","nya nya nya nya nay nya nya_ nya nya~ nya nya nya nyan*","nya nya nya nya nya nya~ nya nya nya nya nya nya nyan","nya nya~ nya nya nya_ nya nya nay nya nya nya nya nyan!","nya nya nya nya nya nya nya nya_ nya nya nya nya nyan","nya nya nya nay nya nya_ nya nya nya nya nya nya nyan:","nya nya~ nya nya nya nya nya nya_ nya nya nya nya nyan..","nya nya nya nya nya nya nay nya nya nya nya_ nya nyan"];document.querySelector(".loading-f p").innerHTML=i[e],t=setInterval((()=>{e=e==i.length-1?0:e+1,document.querySelector(".loading-f p").innerHTML=i[e]}),250)}),8e3),setTimeout((()=>{clearInterval(t);var e=0,i=["","nya","nya!","nay","n_ay","n_ya","nya?","nya~","nya","nyanya","nyan","nyan:","nyan..","ny"];document.querySelector(".loading-f p").innerHTML=i[e],t=setInterval((()=>{e=e==i.length-1?0:e+1,document.querySelector(".loading-f p").innerHTML="QUIK 2.4.1 - 彩蛋 - RainbowCat "+i[e]}),250)}),35e3),setTimeout((()=>{clearInterval(t),t=setInterval((()=>{document.querySelector(".loading-f p").innerHTML=function(){e=6*Math.random()+17;var t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678!@#$%^&*()_+~`-=[];'\\,./{}:\"|<>/?",n=t.length,s="";for(i=0;i<e;i++)s+=t.charAt(Math.floor(Math.random()*n));return s}()}),100)}),48e3)}document.body.append(t),document.querySelector(".loading-f").innerHTML='<p>正在加载音频中...</p><img src="https://image.gumengya.com/i/2024/08/22/66c694973aba5.gif"/>',t.oncanplaythrough=function(){try{t.play()}catch(e){}t.paused||n(),document.querySelector(".loading-f p").innerHTML="CLICK TO PLAY 点击播放音乐",document.addEventListener("click",(function e(){t.play(),n(),document.removeEventListener("click",e)}))},document.querySelector(".loading-f").classList.add("rainbow")}),4e3),o.addStyle(`.loading-f.rainbow{background:#036}.loading-f p{font-size:20px;line-height:36px;width:100%;color:#fff;position:absolute;top:0;left:0;text-align:center;}.loading-f img{${window.innerWidth>window.innerHeight?"height":"width"}:100%;display:block;margin:0 auto}`))}),10)},103:function(e,t){const i=e(85),{SettingItem:n,SettingGroup:s,mainSetting:o}=e(12),{storage:a}=e(7),r=e(5),l=e(4);var c=a("hello",{sync:!0,title:"QUIK问候",desc:"QUIK问候配置文件"});c.get("init")||(c.set("name",""),c.set("birth",""),c.set("init",!0),c.set("enable",!0));var d=new s({title:"问候",index:1});o.addNewGroup(d);var u=new n({type:"boolean",title:"启用问候",message:"即每日打开页面时自动弹出的问候",get:function(){return c.get("enable")},callback:function(e){c.set("enable",e),e?(g.show(),h.show()):(g.hide(),h.hide())}}),g=new n({type:"string",title:"称呼",message:"问候时的称呼",get:function(){return c.get("name")},callback:function(e){c.set("name",e)}}),h=new n({type:"string",title:"生日",message:"格式：月日，如：0910（也许我们会祝你生日快乐呢？）",get:function(){return c.get("birth")},check:function(e){if(""==e)return!0;var t=/^[0-9]{4}$/.test(e);return t||r.show("格式错误，请重新输入"),t},callback:function(e){c.set("birth",e)}});d.addNewItem(u),d.addNewItem(g),d.addNewItem(h);var p,y=["早安！$0","$1你是怎么做到这么早起的！","一大早就开始工作吗$2？那有点辛苦哦"],v=["上午好！$0","$1听说早起的人运气会好很多，不知道是不是真的","$1我算了一卦，今天是属于你的吉日！"],m=["中午好！$0","$1你是要来找电子榨菜吗？"],f=["下午好！$0"],b=["晚上好！$0"],w=["已经很晚了哦$2，早点休息吧！","不要在意他人的看法，你独一无二，你是你自己的一束光","你的身体是为了你的一生服务的，而不是为了QUIK"],k=["你好$2，我是天使","不要在意他人的看法，你独一无二，你是你自己的一束光","你的身体是为了你的一生服务的，而不是为了QUIK"];function q(e){return(1==e.length||Math.random()<.6?e[0]:e[Math.floor(Math.random()*e.length-1)+1]).replace("$0",c.get("name")).replace("$1",c.get("name")?c.get("name")+"，":"").replace("$2",c.get("name")?"，"+c.get("name"):"")}if(c.get("enable")?sessionStorage.getItem("hello")||((p=(new Date).getHours())>=0&&p<=1&&r.show(q(w)),2<=p&&p<=4&&r.show(q(k)),5<=p&&p<=7&&r.show(q(y)),8<=p&&p<=11&&r.show(q(v)),12<=p&&p<=13&&r.show(q(m)),14<=p&&p<=18&&r.show(q(f)),19<=p&&p<=21&&r.show(q(b)),p>=22&&r.show(q(w)),l.xhr("https://static-wzdh.2345.com/tools/yjc?date="+function(e){var t=e.getFullYear(),i=e.getMonth()+1,n=e.getDate();function s(e){return e<10?"0"+e:e}return t+s(i)+s(n)}(new Date),(function(e){200==(e=JSON.parse(e)).code&&(e.data.html.jiri&&new i({title:"QUIK问候",content:"今天是"+("春节"==e.data.html.jiri?"春节！祝你新年快乐！":e.data.html.jiri)}).show(),e.data.html.jiqi&&new i({title:"QUIK问候",content:"今天是"+e.data.html.jiqi}).show())})),sessionStorage.setItem("hello","yet")):(g.hide(),h.hide()),c.get("birth")){var x=c.get("birth"),L=x.substr(0,2),T=x.substr(2,4),S=new Date;S.getMonth()+1==L&&S.getDate()==T&&new i({title:"生日快乐",content:"今天是你的生日！（反正你是这么填的）无论今天有没有人祝福你，总之，生日快乐！！！"}).show()}}});